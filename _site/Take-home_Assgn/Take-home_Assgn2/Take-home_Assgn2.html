<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Rhonda Ho Kah Yee">
<meta name="dcterms.date" content="2023-02-20">

<title>IS415-GAA - Take-home Assignment 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="../../site_libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">IS415-GAA</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Hands-on Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-exercise">    
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01.html">
 <span class="dropdown-text">Week 1&amp;2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html">
 <span class="dropdown-text">Week 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex04/Hands-on_Ex04.html">
 <span class="dropdown-text">Week 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex05/Hands-on_Ex05.html">
 <span class="dropdown-text">Week 5</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html">
 <span class="dropdown-text">Week 6</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex07/Hands-on_Ex07.html">
 <span class="dropdown-text">Week 7</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-in-class-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">In-class Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-in-class-exercise">    
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex02/In-class_Ex02.html">
 <span class="dropdown-text">In-class Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex03/In-class_Ex03.html">
 <span class="dropdown-text">In-class Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex04/In-class_Ex04.html">
 <span class="dropdown-text">In-class Exercise 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex05/In-class_Ex05.html">
 <span class="dropdown-text">In-class Exercise 5</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex06/In-class_Ex06.html">
 <span class="dropdown-text">In-class Exercise 6</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex07/In-class_Ex07.html">
 <span class="dropdown-text">In-class Exercise 7</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-take-home-assignment" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Take-home Assignment</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-take-home-assignment">    
        <li>
    <a class="dropdown-item" href="../../Take-home_Assgn/Take-home_Assgn1/Take-home_Assgn1.html">
 <span class="dropdown-text">Take-home Assignment 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Take-home_Assgn/Take-home_Assgn2/Take-home_Assgn2.html">
 <span class="dropdown-text">Take-home Assignment 2</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Take-home Assignment 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Rhonda Ho Kah Yee </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 20, 2023</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">March 1, 2023</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">1. Overview</a>
  <ul class="collapse">
  <li><a href="#objectives" id="toc-objectives" class="nav-link" data-scroll-target="#objectives">1.1 Objectives</a></li>
  <li><a href="#the-data" id="toc-the-data" class="nav-link" data-scroll-target="#the-data">1.2 The Data</a></li>
  <li><a href="#tasks" id="toc-tasks" class="nav-link" data-scroll-target="#tasks">1.3 Tasks</a></li>
  </ul></li>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started">2. Getting Started</a></li>
  <li><a href="#data-wrangling" id="toc-data-wrangling" class="nav-link" data-scroll-target="#data-wrangling">3. Data Wrangling</a>
  <ul class="collapse">
  <li><a href="#geospatial-data" id="toc-geospatial-data" class="nav-link" data-scroll-target="#geospatial-data">3.1 Geospatial Data</a>
  <ul class="collapse">
  <li><a href="#import-shapefile-into-r-environment" id="toc-import-shapefile-into-r-environment" class="nav-link" data-scroll-target="#import-shapefile-into-r-environment">3.1.1 Import shapefile into r environment</a></li>
  <li><a href="#identifying-relevant-columns" id="toc-identifying-relevant-columns" class="nav-link" data-scroll-target="#identifying-relevant-columns">3.1.2 Identifying Relevant Columns</a></li>
  <li><a href="#data-pre-processing" id="toc-data-pre-processing" class="nav-link" data-scroll-target="#data-pre-processing">3.1.3 Data Pre-Processing</a></li>
  </ul></li>
  <li><a href="#aspatial-data" id="toc-aspatial-data" class="nav-link" data-scroll-target="#aspatial-data">3.2 Aspatial Data</a>
  <ul class="collapse">
  <li><a href="#observations-of-data-website" id="toc-observations-of-data-website" class="nav-link" data-scroll-target="#observations-of-data-website">3.2.1 Observations of Data Website</a></li>
  <li><a href="#importing-aspatial-data" id="toc-importing-aspatial-data" class="nav-link" data-scroll-target="#importing-aspatial-data">3.2.2 Importing Aspatial Data</a></li>
  <li><a href="#data-pre-processing-1" id="toc-data-pre-processing-1" class="nav-link" data-scroll-target="#data-pre-processing-1">3.2.3 Data Pre-processing</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#geospatial-data-integration" id="toc-geospatial-data-integration" class="nav-link" data-scroll-target="#geospatial-data-integration">4. Geospatial Data Integration</a></li>
  <li><a href="#choropleth-mapping-and-analysis" id="toc-choropleth-mapping-and-analysis" class="nav-link" data-scroll-target="#choropleth-mapping-and-analysis">5. Choropleth Mapping and Analysis</a>
  <ul class="collapse">
  <li><a href="#calculation-of-monthly-vaccination-rates" id="toc-calculation-of-monthly-vaccination-rates" class="nav-link" data-scroll-target="#calculation-of-monthly-vaccination-rates">5.1 Calculation of Monthly Vaccination Rates</a></li>
  <li><a href="#mapping-of-monthly-vaccination-rates" id="toc-mapping-of-monthly-vaccination-rates" class="nav-link" data-scroll-target="#mapping-of-monthly-vaccination-rates">5.2 Mapping of Monthly Vaccination Rates</a></li>
  </ul></li>
  <li><a href="#local-gi-analysis" id="toc-local-gi-analysis" class="nav-link" data-scroll-target="#local-gi-analysis">6. Local Gi* Analysis</a>
  <ul class="collapse">
  <li><a href="#computing-local-gi-values-of-monthly-vaccination-rates" id="toc-computing-local-gi-values-of-monthly-vaccination-rates" class="nav-link" data-scroll-target="#computing-local-gi-values-of-monthly-vaccination-rates">6.1 Computing local Gi* Values of Monthly Vaccination Rates</a></li>
  <li><a href="#mapping-of-gi-and-monthly-vaccination-rates" id="toc-mapping-of-gi-and-monthly-vaccination-rates" class="nav-link" data-scroll-target="#mapping-of-gi-and-monthly-vaccination-rates">6.2 Mapping of Gi* and Monthly Vaccination Rates</a>
  <ul class="collapse">
  <li><a href="#mapping-for-july-2021" id="toc-mapping-for-july-2021" class="nav-link" data-scroll-target="#mapping-for-july-2021">6.2.1 Mapping for July 2021</a></li>
  <li><a href="#mapping-for-4-time-periods" id="toc-mapping-for-4-time-periods" class="nav-link" data-scroll-target="#mapping-for-4-time-periods">6.2.1 Mapping for 4 Time Periods</a></li>
  <li><a href="#statistical-conclusion" id="toc-statistical-conclusion" class="nav-link" data-scroll-target="#statistical-conclusion">6.2.3 Statistical Conclusion</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#emerging-hot-spot-analysisehsa" id="toc-emerging-hot-spot-analysisehsa" class="nav-link" data-scroll-target="#emerging-hot-spot-analysisehsa">7. Emerging Hot Spot Analysis(EHSA)</a>
  <ul class="collapse">
  <li><a href="#mann-kendall-test" id="toc-mann-kendall-test" class="nav-link" data-scroll-target="#mann-kendall-test">7.1 Mann-Kendall Test</a>
  <ul class="collapse">
  <li><a href="#for-kebon-kacang" id="toc-for-kebon-kacang" class="nav-link" data-scroll-target="#for-kebon-kacang">7.1.1 For KEBON KACANG</a></li>
  <li><a href="#for-srengseng-sawah" id="toc-for-srengseng-sawah" class="nav-link" data-scroll-target="#for-srengseng-sawah">7.1.2 For SRENGSENG SAWAH</a></li>
  <li><a href="#for-koja" id="toc-for-koja" class="nav-link" data-scroll-target="#for-koja">7.1.3 For KOJA</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#performing-emerging-hotspot-analysis" id="toc-performing-emerging-hotspot-analysis" class="nav-link" data-scroll-target="#performing-emerging-hotspot-analysis">7.2 Performing Emerging Hotspot Analysis</a>
  <ul class="collapse">
  <li><a href="#visualising-the-distribution-of-ehsa-classes" id="toc-visualising-the-distribution-of-ehsa-classes" class="nav-link" data-scroll-target="#visualising-the-distribution-of-ehsa-classes">7.2.1 Visualising the distribution of EHSA classes</a></li>
  <li><a href="#visualising-ehsa" id="toc-visualising-ehsa" class="nav-link" data-scroll-target="#visualising-ehsa">7.2.2 Visualising EHSA</a></li>
  <li><a href="#statistical-conclusion-1" id="toc-statistical-conclusion-1" class="nav-link" data-scroll-target="#statistical-conclusion-1">7.2.3 Statistical Conclusion</a></li>
  </ul></li>
  <li><a href="#acknowledgment" id="toc-acknowledgment" class="nav-link" data-scroll-target="#acknowledgment">8. Acknowledgment</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="overview" class="level1">
<h1>1. Overview</h1>
<p>Hello! This is Rhonda Ho’s take-home Assignment 2 for IS415 module.</p>
<p>To view/hide all the code at once, please click on the “&lt;/&gt; code” tab beside the title of this html document and select the option to view/hide the code.</p>
<p>The full details of this assignment can be found <a href="https://is415-ay2022-23t2.netlify.app/th_ex2.html">here</a>.</p>
<section id="objectives" class="level2">
<h2 class="anchored" data-anchor-id="objectives">1.1 Objectives</h2>
<p>Exploratory Spatial Data Analysis (ESDA) hold tremendous potential to address complex problems facing society. In this study, you are tasked to apply appropriate Local Indicators of Spatial Association (LISA) and Emerging Hot Spot Analysis (EHSA) to undercover the spatio-temporal trends of COVID-19 vaccination in DKI Jakarta.</p>
</section>
<section id="the-data" class="level2">
<h2 class="anchored" data-anchor-id="the-data">1.2 The Data</h2>
<ol type="1">
<li><strong>Aspatial data</strong></li>
</ol>
<p>For the purpose of this assignment, data from <a href="https://riwayat-file-vaksinasi-dki-jakarta-jakartagis.hub.arcgis.com/">Riwayat File Vaksinasi DKI Jakarta</a> will be used. Daily vaccination data are provided. We are only required to download either the first day of the month or last day of the month of the study period.</p>
<ol start="2" type="1">
<li><strong>Geospatial data</strong></li>
</ol>
<p>For the purpose of this study, DKI Jakarta administration boundary 2019 will be used. The data set can be downloaded at Indonesia Geospatial portal, specifically at <a href="https://www.indonesia-geospasial.com/2020/04/download-shapefile-shp-batas-desa.html">this page</a>.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>The national Projected Coordinates Systems of Indonesia is DGN95 / Indonesia TM-3 zone 54.1.</li>
<li>Exclude all the outer islands from the DKI Jakarta sf data frame, and</li>
<li>Retain the first nine fields in the DKI Jakarta sf data frame. The ninth field JUMLAH_PEN = Total Population.</li>
</ul>
</div>
</div>
</section>
<section id="tasks" class="level2">
<h2 class="anchored" data-anchor-id="tasks">1.3 Tasks</h2>
<p>The specific tasks of this take-home exercise are as follows:</p>
<ol type="1">
<li><p><strong>Choropleth Mapping and Analysis</strong></p>
<ul>
<li><p>Compute the monthly vaccination rate from July 2021 to June 2022 at sub-district (also known as kelurahan in Bahasa Indonesia) level,</p></li>
<li><p>Prepare the monthly vaccination rate maps by using appropriate tmap functions,</p></li>
<li><p>Describe the spatial patterns revealed by the choropleth maps (not more than 200 words).</p></li>
</ul></li>
<li><p><strong>Local Gi* Analysis</strong></p>
<p>With reference to the vaccination rate maps prepared in ESDA:</p>
<ul>
<li><p>Compute local Gi* values of the monthly vaccination rate,</p></li>
<li><p>Display the Gi* maps of the monthly vaccination rate. The maps should only display the significant (i.e.&nbsp;p-value &lt; 0.05)</p></li>
<li><p>With reference to the analysis results, draw statistical conclusions (not more than 250 words).</p></li>
</ul></li>
<li><p><strong>Emerging Hot Spot Analysis(EHSA)</strong></p>
<p>With reference to the local Gi* values of the vaccination rate maps prepared in the previous section:</p>
<ul>
<li><p>Perform Mann-Kendall Test by using the spatio-temporal local Gi* values,</p></li>
<li><p>Select three sub-districts and describe the temporal trends revealed (not more than 250 words), and</p></li>
<li><p>Prepared a EHSA map of the Gi* values of vaccination rate. The maps should only display the significant (i.e.&nbsp;p-value &lt; 0.05).<br>
</p></li>
<li><p>With reference to the EHSA map prepared, describe the spatial patterns revealed. (not more than 250 words).</p></li>
</ul></li>
</ol>
</section>
</section>
<section id="getting-started" class="level1">
<h1>2. Getting Started</h1>
<p>The following packages will be used:</p>
<ul>
<li><p><a href="https://r-spatial.github.io/sf/">sf</a>: to import, manage, and process geospatial data</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/tmap/">tmap</a>: provides functions for plotting cartographic quality static point patterns maps or interactive maps</p></li>
<li><p><a href="https://cran.r-project.org/package=plotly">plotly</a>: for creating interactive web-based graphs</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/sfdep/">sfdep</a>: for spatial dependence of simple features</p></li>
<li><p><a href="https://readxl.tidyverse.org/reference/read_excel.html">readxl</a>: to import Excel worksheets(.xlsx)</p></li>
<li><p><a href="https://cran.r-project.org/package=Kendall">Kendall</a>: for Mann-Kendall Test</p></li>
<li><p><a href="https://www.tidyverse.org/">tidyverse</a>: a collection of packages for data science tasks</p></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(sf, tmap, plotly, sfdep, readxl, kendall, tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="data-wrangling" class="level1">
<h1>3. Data Wrangling</h1>
<section id="geospatial-data" class="level2">
<h2 class="anchored" data-anchor-id="geospatial-data">3.1 Geospatial Data</h2>
<section id="import-shapefile-into-r-environment" class="level3">
<h3 class="anchored" data-anchor-id="import-shapefile-into-r-environment">3.1.1 Import shapefile into r environment</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>jkt2019 <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="at">dsn =</span> <span class="st">"data/geospatial"</span>, </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">layer =</span> <span class="st">"BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA' from data source 
  `C:\RhondaHO\IS415-GAA\Take-home_Assgn\Take-home_Assgn2\data\geospatial' 
  using driver `ESRI Shapefile'
Simple feature collection with 269 features and 161 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 106.3831 ymin: -6.370815 xmax: 106.9728 ymax: -5.184322
Geodetic CRS:  WGS 84</code></pre>
</div>
</div>
<p>From the output, we can observe that:</p>
<ol type="1">
<li><p>Geometry type is MULTIPOLYGON</p></li>
<li><p>CRS information is <a href="https://epsg.io/4326">WGS 84</a> instead of the CRS for Indonesia, Jakarta.</p></li>
</ol>
</section>
<section id="identifying-relevant-columns" class="level3">
<h3 class="anchored" data-anchor-id="identifying-relevant-columns">3.1.2 Identifying Relevant Columns</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(jkt2019)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 269
Columns: 162
$ OBJECT_ID  &lt;dbl&gt; 25477, 25478, 25397, 25400, 25378, 25379, 25390, 25382, 253…
$ KODE_DESA  &lt;chr&gt; "3173031006", "3173031007", "3171031003", "3171031006", "31…
$ DESA       &lt;chr&gt; "KEAGUNGAN", "GLODOK", "HARAPAN MULIA", "CEMPAKA BARU", "PU…
$ KODE       &lt;dbl&gt; 317303, 317303, 317103, 317103, 310101, 310101, 317102, 310…
$ PROVINSI   &lt;chr&gt; "DKI JAKARTA", "DKI JAKARTA", "DKI JAKARTA", "DKI JAKARTA",…
$ KAB_KOTA   &lt;chr&gt; "JAKARTA BARAT", "JAKARTA BARAT", "JAKARTA PUSAT", "JAKARTA…
$ KECAMATAN  &lt;chr&gt; "TAMAN SARI", "TAMAN SARI", "KEMAYORAN", "KEMAYORAN", "KEPU…
$ DESA_KELUR &lt;chr&gt; "KEAGUNGAN", "GLODOK", "HARAPAN MULIA", "CEMPAKA BARU", "PU…
$ JUMLAH_PEN &lt;dbl&gt; 21609, 9069, 29085, 41913, 6947, 7059, 15793, 5891, 33383, …
$ JUMLAH_KK  &lt;dbl&gt; 7255, 3273, 9217, 13766, 2026, 2056, 5599, 1658, 11276, 128…
$ LUAS_WILAY &lt;dbl&gt; 0.36, 0.37, 0.53, 0.97, 0.93, 0.95, 1.76, 1.14, 0.47, 1.31,…
$ KEPADATAN  &lt;dbl&gt; 60504, 24527, 54465, 42993, 7497, 7401, 8971, 5156, 71628, …
$ PERPINDAHA &lt;dbl&gt; 102, 25, 131, 170, 17, 26, 58, 13, 113, 178, 13, 87, 56, 12…
$ JUMLAH_MEN &lt;dbl&gt; 68, 52, 104, 151, 14, 32, 36, 10, 60, 92, 5, 83, 21, 70, 93…
$ PERUBAHAN  &lt;dbl&gt; 20464, 8724, 27497, 38323, 6853, 6993, 15006, 5807, 31014, …
$ WAJIB_KTP  &lt;dbl&gt; 16027, 7375, 20926, 30264, 4775, 4812, 12559, 3989, 24784, …
$ SILAM      &lt;dbl&gt; 15735, 1842, 26328, 36813, 6941, 7057, 7401, 5891, 23057, 2…
$ KRISTEN    &lt;dbl&gt; 2042, 2041, 1710, 3392, 6, 0, 3696, 0, 4058, 5130, 1, 3061,…
$ KHATOLIK   &lt;dbl&gt; 927, 1460, 531, 1082, 0, 0, 1602, 0, 2100, 2575, 0, 1838, 7…
$ HINDU      &lt;dbl&gt; 15, 9, 42, 127, 0, 0, 622, 0, 25, 27, 0, 9, 115, 47, 382, 7…
$ BUDHA      &lt;dbl&gt; 2888, 3716, 469, 495, 0, 2, 2462, 0, 4134, 4740, 5, 1559, 3…
$ KONGHUCU   &lt;dbl&gt; 2, 1, 5, 1, 0, 0, 10, 0, 9, 10, 0, 4, 1, 1, 4, 0, 2, 0, 0, …
$ KEPERCAYAA &lt;dbl&gt; 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 2, 0, 22, 0, 3, 3, 0, 0, 0…
$ PRIA       &lt;dbl&gt; 11049, 4404, 14696, 21063, 3547, 3551, 7833, 2954, 16887, 1…
$ WANITA     &lt;dbl&gt; 10560, 4665, 14389, 20850, 3400, 3508, 7960, 2937, 16496, 1…
$ BELUM_KAWI &lt;dbl&gt; 10193, 4240, 14022, 20336, 3366, 3334, 7578, 2836, 15860, 1…
$ KAWIN      &lt;dbl&gt; 10652, 4364, 13450, 19487, 3224, 3404, 7321, 2791, 15945, 1…
$ CERAI_HIDU &lt;dbl&gt; 255, 136, 430, 523, 101, 80, 217, 44, 381, 476, 39, 305, 10…
$ CERAI_MATI &lt;dbl&gt; 509, 329, 1183, 1567, 256, 241, 677, 220, 1197, 993, 79, 90…
$ U0         &lt;dbl&gt; 1572, 438, 2232, 3092, 640, 648, 802, 585, 2220, 2399, 376,…
$ U5         &lt;dbl&gt; 1751, 545, 2515, 3657, 645, 684, 995, 588, 2687, 2953, 331,…
$ U10        &lt;dbl&gt; 1703, 524, 2461, 3501, 620, 630, 1016, 513, 2653, 2754, 309…
$ U15        &lt;dbl&gt; 1493, 521, 2318, 3486, 669, 671, 1106, 548, 2549, 2666, 328…
$ U20        &lt;dbl&gt; 1542, 543, 2113, 3098, 619, 609, 1081, 491, 2313, 2515, 290…
$ U25        &lt;dbl&gt; 1665, 628, 2170, 3024, 639, 582, 1002, 523, 2446, 2725, 325…
$ U30        &lt;dbl&gt; 1819, 691, 2363, 3188, 564, 592, 1236, 478, 2735, 3122, 329…
$ U35        &lt;dbl&gt; 1932, 782, 2595, 3662, 590, 572, 1422, 504, 3034, 3385, 317…
$ U40        &lt;dbl&gt; 1828, 675, 2371, 3507, 480, 486, 1200, 397, 2689, 3037, 250…
$ U45        &lt;dbl&gt; 1600, 607, 2250, 3391, 421, 457, 1163, 365, 2470, 2597, 206…
$ U50        &lt;dbl&gt; 1408, 619, 1779, 2696, 346, 369, 1099, 288, 2129, 2282, 134…
$ U55        &lt;dbl&gt; 1146, 602, 1379, 1909, 252, 318, 979, 235, 1843, 1930, 129,…
$ U60        &lt;dbl&gt; 836, 614, 1054, 1397, 197, 211, 880, 162, 1386, 1394, 75, 9…
$ U65        &lt;dbl&gt; 587, 555, 654, 970, 122, 114, 747, 111, 958, 932, 50, 706, …
$ U70        &lt;dbl&gt; 312, 311, 411, 631, 69, 55, 488, 65, 554, 573, 38, 412, 129…
$ U75        &lt;dbl&gt; 415, 414, 420, 704, 74, 61, 577, 38, 717, 642, 37, 528, 125…
$ TIDAK_BELU &lt;dbl&gt; 3426, 1200, 4935, 7328, 1306, 1318, 2121, 973, 5075, 6089, …
$ BELUM_TAMA &lt;dbl&gt; 1964, 481, 2610, 3763, 730, 676, 1278, 732, 3241, 3184, 383…
$ TAMAT_SD   &lt;dbl&gt; 2265, 655, 2346, 2950, 1518, 2054, 1169, 1266, 4424, 3620, …
$ SLTP       &lt;dbl&gt; 3660, 1414, 3167, 5138, 906, 1357, 2236, 852, 5858, 6159, 5…
$ SLTA       &lt;dbl&gt; 8463, 3734, 12172, 16320, 2040, 1380, 5993, 1570, 12448, 14…
$ DIPLOMA_I  &lt;dbl&gt; 81, 23, 84, 179, 22, 15, 43, 36, 85, 83, 4, 63, 27, 79, 110…
$ DIPLOMA_II &lt;dbl&gt; 428, 273, 1121, 1718, 101, 59, 573, 97, 604, 740, 25, 734, …
$ DIPLOMA_IV &lt;dbl&gt; 1244, 1241, 2477, 4181, 314, 191, 2199, 357, 1582, 1850, 83…
$ STRATA_II  &lt;dbl&gt; 74, 46, 166, 315, 10, 8, 168, 8, 63, 92, 5, 174, 125, 122, …
$ STRATA_III &lt;dbl&gt; 4, 2, 7, 21, 0, 1, 13, 0, 3, 9, 0, 16, 8, 7, 75, 49, 65, 14…
$ BELUM_TIDA &lt;dbl&gt; 3927, 1388, 5335, 8105, 1788, 1627, 2676, 1129, 5985, 6820,…
$ APARATUR_P &lt;dbl&gt; 81, 10, 513, 931, 246, 75, 156, 160, 132, 79, 23, 145, 369,…
$ TENAGA_PEN &lt;dbl&gt; 70, 43, 288, 402, 130, 93, 81, 123, 123, 73, 45, 109, 30, 1…
$ WIRASWASTA &lt;dbl&gt; 8974, 3832, 10662, 14925, 788, 728, 6145, 819, 12968, 14714…
$ PERTANIAN  &lt;dbl&gt; 1, 0, 1, 3, 2, 2, 1, 3, 2, 5, 1, 1, 0, 0, 2, 5, 2, 1, 13, 4…
$ NELAYAN    &lt;dbl&gt; 0, 0, 2, 0, 960, 1126, 1, 761, 1, 2, 673, 0, 0, 0, 0, 0, 2,…
$ AGAMA_DAN  &lt;dbl&gt; 6, 6, 5, 40, 0, 0, 49, 2, 10, 11, 0, 54, 15, 16, 21, 14, 17…
$ PELAJAR_MA &lt;dbl&gt; 4018, 1701, 6214, 9068, 1342, 1576, 3135, 1501, 6823, 6866,…
$ TENAGA_KES &lt;dbl&gt; 28, 29, 80, 142, 34, 26, 60, 11, 48, 55, 16, 68, 89, 93, 28…
$ PENSIUNAN  &lt;dbl&gt; 57, 50, 276, 498, 20, 7, 59, 14, 56, 75, 2, 97, 53, 146, 57…
$ LAINNYA    &lt;dbl&gt; 4447, 2010, 5709, 7799, 1637, 1799, 3430, 1368, 7235, 7206,…
$ GENERATED  &lt;chr&gt; "30 Juni 2019", "30 Juni 2019", "30 Juni 2019", "30 Juni 20…
$ KODE_DES_1 &lt;chr&gt; "3173031006", "3173031007", "3171031003", "3171031006", "31…
$ BELUM_     &lt;dbl&gt; 3099, 1032, 4830, 7355, 1663, 1704, 2390, 1213, 5330, 5605,…
$ MENGUR_    &lt;dbl&gt; 4447, 2026, 5692, 7692, 1576, 1731, 3500, 1323, 7306, 7042,…
$ PELAJAR_   &lt;dbl&gt; 3254, 1506, 6429, 8957, 1476, 1469, 3185, 1223, 6993, 6858,…
$ PENSIUNA_1 &lt;dbl&gt; 80, 65, 322, 603, 24, 8, 70, 20, 75, 97, 2, 132, 67, 165, 6…
$ PEGAWAI_   &lt;dbl&gt; 48, 5, 366, 612, 223, 72, 65, 143, 73, 48, 15, 89, 91, 174,…
$ TENTARA    &lt;dbl&gt; 4, 0, 41, 57, 3, 0, 74, 1, 20, 12, 2, 11, 90, 340, 41, 52, …
$ KEPOLISIAN &lt;dbl&gt; 10, 1, 16, 42, 11, 8, 2, 9, 17, 7, 3, 9, 165, 15, 17, 28, 1…
$ PERDAG_    &lt;dbl&gt; 31, 5, 1, 3, 6, 1, 2, 4, 3, 1, 4, 0, 1, 2, 9, 2, 8, 2, 5, 9…
$ PETANI     &lt;dbl&gt; 0, 0, 1, 2, 0, 1, 1, 0, 1, 1, 1, 2, 0, 0, 1, 2, 0, 1, 6, 1,…
$ PETERN_    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ NELAYAN_1  &lt;dbl&gt; 1, 0, 1, 0, 914, 1071, 0, 794, 0, 1, 663, 0, 0, 0, 0, 0, 2,…
$ INDUSTR_   &lt;dbl&gt; 7, 3, 4, 3, 1, 3, 0, 0, 1, 7, 0, 0, 2, 2, 1, 3, 12, 1, 8, 4…
$ KONSTR_    &lt;dbl&gt; 3, 0, 2, 6, 3, 8, 1, 6, 1, 5, 10, 0, 2, 5, 7, 4, 7, 1, 6, 2…
$ TRANSP_    &lt;dbl&gt; 2, 0, 7, 4, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 6, 3, 2, 1, 2, 5,…
$ KARYAW_    &lt;dbl&gt; 6735, 3034, 7347, 10185, 237, 264, 4319, 184, 9405, 10844, …
$ KARYAW1    &lt;dbl&gt; 9, 2, 74, 231, 4, 0, 16, 1, 13, 10, 1, 24, 17, 29, 187, 246…
$ KARYAW1_1  &lt;dbl&gt; 0, 0, 5, 15, 0, 0, 0, 1, 0, 1, 0, 0, 2, 4, 7, 9, 3, 1, 6, 5…
$ KARYAW1_12 &lt;dbl&gt; 23, 4, 25, 35, 141, 50, 16, 157, 6, 9, 40, 11, 11, 15, 22, …
$ BURUH      &lt;dbl&gt; 515, 155, 971, 636, 63, 218, 265, 55, 1085, 652, 17, 357, 2…
$ BURUH_     &lt;dbl&gt; 1, 0, 0, 0, 2, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 2, 1, 0, 1, 1,…
$ BURUH1     &lt;dbl&gt; 0, 0, 1, 0, 1, 25, 0, 2, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ BURUH1_1   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,…
$ PEMBANT_   &lt;dbl&gt; 1, 1, 4, 1, 1, 0, 7, 0, 5, 1, 0, 6, 1, 10, 11, 9, 8, 3, 4, …
$ TUKANG     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0,…
$ TUKANG_1   &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ TUKANG_12  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ TUKANG__13 &lt;dbl&gt; 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0,…
$ TUKANG__14 &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ TUKANG__15 &lt;dbl&gt; 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1,…
$ TUKANG__16 &lt;dbl&gt; 7, 4, 10, 14, 0, 0, 2, 0, 7, 8, 0, 8, 1, 0, 3, 2, 2, 0, 17,…
$ TUKANG__17 &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ PENATA     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,…
$ PENATA_    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ PENATA1_1  &lt;dbl&gt; 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 2, 0, 1, 0, 0, 0, 0, 0, 0,…
$ MEKANIK    &lt;dbl&gt; 11, 1, 10, 8, 0, 0, 4, 0, 7, 8, 0, 9, 0, 15, 10, 10, 3, 0, …
$ SENIMAN_   &lt;dbl&gt; 4, 0, 12, 28, 0, 0, 2, 0, 3, 4, 0, 9, 6, 7, 14, 13, 17, 22,…
$ TABIB      &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0,…
$ PARAJI_    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ PERANCA_   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 2, 1, 0, 1, 2, 0, 0,…
$ PENTER_    &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 2, 0, 2, 0, 0, 0,…
$ IMAM_M     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ PENDETA    &lt;dbl&gt; 2, 4, 5, 33, 0, 0, 20, 0, 10, 8, 0, 30, 14, 14, 18, 12, 1, …
$ PASTOR     &lt;dbl&gt; 0, 1, 0, 1, 0, 0, 8, 0, 0, 0, 0, 23, 0, 0, 0, 0, 2, 0, 0, 0…
$ WARTAWAN   &lt;dbl&gt; 7, 1, 16, 27, 0, 0, 4, 0, 8, 6, 0, 9, 5, 9, 26, 30, 11, 7, …
$ USTADZ     &lt;dbl&gt; 6, 1, 1, 5, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,…
$ JURU_M     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0,…
$ PROMOT     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ ANGGOTA_   &lt;dbl&gt; 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 2, 1, 2, 1, 0, 0,…
$ ANGGOTA1   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1,…
$ ANGGOTA1_1 &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ PRESIDEN   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ WAKIL_PRES &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0,…
$ ANGGOTA1_2 &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0,…
$ ANGGOTA1_3 &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0,…
$ DUTA_B     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0,…
$ GUBERNUR   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0,…
$ WAKIL_GUBE &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ BUPATI     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ WAKIL_BUPA &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ WALIKOTA   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ WAKIL_WALI &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ ANGGOTA1_4 &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 1, 0, 0, 1,…
$ ANGGOTA1_5 &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,…
$ DOSEN      &lt;dbl&gt; 3, 2, 23, 36, 1, 2, 11, 0, 3, 5, 0, 14, 6, 28, 69, 73, 58, …
$ GURU       &lt;dbl&gt; 72, 40, 272, 378, 118, 72, 69, 116, 126, 71, 36, 97, 23, 10…
$ PILOT      &lt;dbl&gt; 1, 0, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 1, 0, 0, 0,…
$ PENGACARA_ &lt;dbl&gt; 4, 1, 8, 22, 0, 0, 5, 0, 5, 4, 0, 4, 3, 12, 24, 26, 40, 13,…
$ NOTARIS    &lt;dbl&gt; 0, 0, 3, 5, 0, 0, 4, 0, 0, 0, 0, 5, 0, 5, 10, 3, 7, 1, 0, 4…
$ ARSITEK    &lt;dbl&gt; 1, 0, 2, 3, 0, 0, 2, 0, 0, 0, 0, 4, 1, 2, 7, 3, 9, 2, 0, 4,…
$ AKUNTA_    &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 1, 0, 0, 2, 0, 3, 1,…
$ KONSUL_    &lt;dbl&gt; 1, 0, 2, 11, 0, 0, 4, 0, 0, 0, 0, 6, 2, 3, 10, 8, 12, 2, 1,…
$ DOKTER     &lt;dbl&gt; 16, 32, 35, 68, 0, 1, 63, 0, 27, 32, 1, 63, 48, 60, 236, 12…
$ BIDAN      &lt;dbl&gt; 3, 1, 9, 18, 12, 8, 1, 3, 3, 3, 7, 3, 10, 10, 7, 2, 3, 2, 1…
$ PERAWAT    &lt;dbl&gt; 7, 0, 25, 44, 12, 10, 3, 6, 12, 20, 6, 7, 26, 16, 21, 20, 9…
$ APOTEK_    &lt;dbl&gt; 0, 0, 2, 3, 1, 0, 0, 0, 1, 2, 0, 1, 2, 3, 3, 3, 3, 1, 0, 1,…
$ PSIKIATER  &lt;dbl&gt; 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 3, 2, 1, 0, 0, 0,…
$ PENYIA_    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0,…
$ PENYIA1    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,…
$ PELAUT     &lt;dbl&gt; 0, 0, 6, 16, 1, 1, 0, 14, 2, 4, 1, 2, 4, 2, 10, 13, 2, 0, 3…
$ PENELITI   &lt;dbl&gt; 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 3, 0, 1, 0, 2, 0,…
$ SOPIR      &lt;dbl&gt; 65, 3, 94, 123, 0, 1, 61, 0, 76, 79, 0, 63, 44, 101, 71, 59…
$ PIALAN     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ PARANORMAL &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0,…
$ PEDAGA_    &lt;dbl&gt; 379, 126, 321, 562, 11, 10, 412, 15, 202, 225, 0, 271, 212,…
$ PERANG_    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,…
$ KEPALA_    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ BIARAW_    &lt;dbl&gt; 0, 1, 0, 0, 0, 0, 22, 0, 3, 0, 0, 2, 1, 0, 4, 0, 17, 1, 0, …
$ WIRASWAST_ &lt;dbl&gt; 1370, 611, 1723, 3099, 131, 119, 1128, 259, 2321, 2677, 79,…
$ LAINNYA_12 &lt;dbl&gt; 94, 57, 82, 122, 12, 10, 41, 6, 89, 158, 24, 37, 15, 94, 12…
$ LUAS_DESA  &lt;dbl&gt; 25476, 25477, 25396, 25399, 25377, 25378, 25389, 25381, 253…
$ KODE_DES_3 &lt;chr&gt; "3173031006", "3173031007", "3171031003", "3171031006", "31…
$ DESA_KEL_1 &lt;chr&gt; "KEAGUNGAN", "GLODOK", "HARAPAN MULIA", "CEMPAKA BARU", "PU…
$ KODE_12    &lt;dbl&gt; 317303, 317303, 317103, 317103, 310101, 310101, 317102, 310…
$ geometry   &lt;MULTIPOLYGON [°]&gt; MULTIPOLYGON (((106.8164 -6..., MULTIPOLYGON (…</code></pre>
</div>
</div>
<p>Having a glimpse at our data, some of relevant column(s) that we need for our task is:</p>
<ul>
<li><p><code>KAB_KOTA</code> : represents the cities in Jakarta</p></li>
<li><p><code>KECAMATAN</code> : represents the district in Jakarta</p></li>
<li><p><code>DESA_KELUR</code> : represents the sub-districts in Jakarta.</p></li>
</ul>
</section>
<section id="data-pre-processing" class="level3">
<h3 class="anchored" data-anchor-id="data-pre-processing">3.1.3 Data Pre-Processing</h3>
<section id="check-for-invalid-geometries" class="level4">
<h4 class="anchored" data-anchor-id="check-for-invalid-geometries">3.1.3.1 Check for Invalid Geometries</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#check for invalid geometries</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">which</span>(<span class="fu">st_is_valid</span>(jkt2019) <span class="sc">==</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>There is no invalid geometries!</p>
</section>
<section id="check-for-missing-values" class="level4">
<h4 class="anchored" data-anchor-id="check-for-missing-values">3.1.3.2 Check for Missing Values</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#check for missing values</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(jkt2019))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 14</code></pre>
</div>
</div>
<p>Based on the output, we have discovered that there are 14 missing values in our dataset which may affect our analysis. Thus, I removed all missing values in the sub-districts(a part of our main study focus), using the code chunk below.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>jkt2019 <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(jkt2019,<span class="fu">c</span>(<span class="st">"DESA_KELUR"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="transformation-of-coordinates-information" class="level4">
<h4 class="anchored" data-anchor-id="transformation-of-coordinates-information">3.1.3.3 Transformation of Coordinates Information</h4>
<p>Earlier on, we discovered that the assigned coordinates system of our data is WGS 84 which is not appropriate for an Indonesian-specific geospatial dataset. Another way of checking it is using the function, <a href="https://www.rdocumentation.org/packages/sf/versions/1.0-9/topics/st_crs">st_crs()</a>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#check whether need to transform</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(jkt2019)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: WGS 84 
  wkt:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["latitude",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["longitude",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    ID["EPSG",4326]]</code></pre>
</div>
</div>
<p>As this is an Indonesian-specific geospatial dataset, I will be using <a href="https://epsg.io/23845">EPSG:23845.</a></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transforms the CRS to DGN95, ESPG code 23845</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>jkt2019 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(jkt2019, <span class="dv">23845</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(jkt2019)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: EPSG:23845 
  wkt:
PROJCRS["DGN95 / Indonesia TM-3 zone 54.1",
    BASEGEOGCRS["DGN95",
        DATUM["Datum Geodesi Nasional 1995",
            ELLIPSOID["WGS 84",6378137,298.257223563,
                LENGTHUNIT["metre",1]]],
        PRIMEM["Greenwich",0,
            ANGLEUNIT["degree",0.0174532925199433]],
        ID["EPSG",4755]],
    CONVERSION["Indonesia TM-3 zone 54.1",
        METHOD["Transverse Mercator",
            ID["EPSG",9807]],
        PARAMETER["Latitude of natural origin",0,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8801]],
        PARAMETER["Longitude of natural origin",139.5,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8802]],
        PARAMETER["Scale factor at natural origin",0.9999,
            SCALEUNIT["unity",1],
            ID["EPSG",8805]],
        PARAMETER["False easting",200000,
            LENGTHUNIT["metre",1],
            ID["EPSG",8806]],
        PARAMETER["False northing",1500000,
            LENGTHUNIT["metre",1],
            ID["EPSG",8807]]],
    CS[Cartesian,2],
        AXIS["easting (X)",east,
            ORDER[1],
            LENGTHUNIT["metre",1]],
        AXIS["northing (Y)",north,
            ORDER[2],
            LENGTHUNIT["metre",1]],
    USAGE[
        SCOPE["Cadastre."],
        AREA["Indonesia - onshore east of 138°E."],
        BBOX[-9.19,138,-1.49,141.01]],
    ID["EPSG",23845]]</code></pre>
</div>
</div>
<p>We have successfully managed to transform our dataset to the appropriate coordinates system!</p>
</section>
<section id="removal-of-outer-islands" class="level4">
<h4 class="anchored" data-anchor-id="removal-of-outer-islands">3.1.3.4 Removal of Outer Islands</h4>
<p>To start off, let visualise our data!</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(jkt2019))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Assgn2_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The visualisation above shows that our data consist of outer islands beyond Jakarta. As this is not important for our analysis, we should remove it.</p>
<p>Previously, we have identified 3 important attributes which represents the divisions of Jakarta. They are <code>KAB_KOTA</code> (City), <code>KECAMATAN</code> (District) and <code>DESA_KELUR</code> (Village). Removing the outer islands by the City would help us to remove all the districts and villages within it, so I proceeded to check the unique values of it.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(jkt2019<span class="sc">$</span><span class="st">"KAB_KOTA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "JAKARTA BARAT"    "JAKARTA PUSAT"    "KEPULAUAN SERIBU" "JAKARTA UTARA"   
[5] "JAKARTA TIMUR"    "JAKARTA SELATAN" </code></pre>
</div>
</div>
<p>From this, we can observe that all the values has “JAKARTA” in it except “KEPULAUAN SERIBU”(Thousand Island). The code chunk below visualises the different cities in Jakarta.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(jkt2019) <span class="sc">+</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">"KAB_KOTA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Assgn2_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Next, we will need to remove the outer islands by using the <a href="https://www.educative.io/answers/what-is-the-filter-method-in-r">filter()</a> function to filter out the outer islands.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># accepts only if the value of KAB_KOTA is NOT KEPULAUAN SERIBU</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>jkt2019 <span class="ot">&lt;-</span> <span class="fu">filter</span>(jkt2019, KAB_KOTA <span class="sc">!=</span> <span class="st">"KEPULAUAN SERIBU"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>For this assignment, we are required to only retain the first 9 fields.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filters out other fields by accepting only the first 9 fields</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>jkt2019 <span class="ot">&lt;-</span> jkt2019[, <span class="dv">0</span><span class="sc">:</span><span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>For easier comprehension of our data, I have decided to translate the column headers to English.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>jkt2019 <span class="ot">&lt;-</span> jkt2019 <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Object_ID=</span>OBJECT_ID,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Province=</span>PROVINSI, </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">City=</span>KAB_KOTA, </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">District=</span>KECAMATAN, </span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Village_Code=</span>KODE_DESA, </span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Village=</span>DESA, </span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">Sub_District=</span>DESA_KELUR,</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">Code=</span>KODE, </span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Population=</span>JUMLAH_PEN</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>With that, we are done for our geospatial data!</p>
</section>
</section>
</section>
<section id="aspatial-data" class="level2">
<h2 class="anchored" data-anchor-id="aspatial-data">3.2 Aspatial Data</h2>
<section id="observations-of-data-website" class="level3">
<h3 class="anchored" data-anchor-id="observations-of-data-website">3.2.1 Observations of Data Website</h3>
<p>Examining DKI Jakarta Vaccination File History <a href="https://riwayat-file-vaksinasi-dki-jakarta-jakartagis.hub.arcgis.com/">website</a>, some of my observations were:</p>
<ul>
<li><p>Entire page is in Indonesian</p>
<ul>
<li>To translate to English, simply right click anywhere on the webpage and click “Translate to English” button</li>
</ul></li>
<li><p>There were two columns for DKI Jakarta Vaccination File History, one for “<em>Vaccination Data Based on Village and District</em>”, another for “<em>RT-Based Vaccination Data</em>”</p>
<ul>
<li>We will be focusing on the “V<em>accination Data Based on Village and District</em>”column as our task require us to analyse on a sub-district level.</li>
</ul></li>
<li><p>Many instances of missing data!</p>
<ul>
<li><p>E.g 1) The hyperlink to March 1 2022 will direct you to March 2 2022 data and March 1 2022 cannot be found</p></li>
<li><p>E.g 2) Certain months such as July 2021, August 2021, February 2022 were missing the record of the date written in the table and its respective data</p>
<ul>
<li><p>A few examples of missing records are 19 July 2021, 28 August 2022, 11 September, 28 February 2022, 17 March 2022</p></li>
<li><p>Upon further research and some of my assumptions, missing data can be due to:</p>
<ul>
<li><p>A glitch in the system, which prevents the data from being uploaded</p></li>
<li><p>An update of the system which may prevent records from being uploaded on that day</p></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<p>Under our task we are required to compute monthly vaccination rate from <u>July 2021 to June 2022</u> and we are only required to download the <u>first or last day of the month of study period</u>.</p>
<p>For this assignment, I will be using data of the <u>first day of each month</u> of the study period with the exception of March 2021, I will be using March 2 instead of March 1 as March 1’s data is missing.</p>
</section>
<section id="importing-aspatial-data" class="level3">
<h3 class="anchored" data-anchor-id="importing-aspatial-data">3.2.2 Importing Aspatial Data</h3>
<p>In our ‘data/aspatial’ folder, we have downloaded multiple .xlsx files ranging from 1 July 2021 to 1 June 2022. But before we compile it together, we need to understand each dataset and check for any discrepancies.</p>
<p>The purpose of the code chunk below is to reach each excel file under the folder ‘data/aspatial’ , create its dataframe(df) and assign it to a variable name which is in the format of “month_year”. E.g April_2022 . The following functions are used:</p>
<ul>
<li><p><a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/list.files">list.files():</a> creates a list of the files in a directory/folder</p></li>
<li><p><a href="https://www.digitalocean.com/community/tutorials/substring-function-in-r">substr():</a> extract the characters present in the data</p></li>
<li><p><a href="https://stringr.tidyverse.org/reference/str_trim.html">str_trim():</a> remove whitespace</p></li>
<li><p><a href="https://www.digitalocean.com/community/tutorials/paste-in-r">paste():</a> concatenate strings and values into a single element</p></li>
<li><p><a href="https://readxl.tidyverse.org/reference/read_excel.html#:~:text=read_excel()%20calls%20excel_format(),file%20itself%2C%20in%20that%20order.">read_excel()</a>: to read the data in xlsx format</p></li>
<li><p><a href="https://www.geeksforgeeks.org/finding-the-length-of-string-in-r-programming-nchar-method/#:~:text=nchar()%20method%20in%20R,character%20in%20a%20string%20object.&amp;text=Where%3A%20String%20is%20object.,the%20length%20of%20a%20string.">nchar():</a> gets the length of string</p></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#gets all files under the folder 'data/aspatial' which is in '.xlsx' format</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>study_period_data <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">'data/aspatial'</span>,<span class="at">pattern =</span> <span class="st">"*.xlsx"</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">#instantiate an empty list which will be used later to contain all the df names</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>df_list <span class="ot">&lt;-</span><span class="fu">list</span>()</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (x <span class="cf">in</span> study_period_data){</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a> <span class="co"># eg of x: Data Vaksinasi Berbasis Kelurahan (01 April 2022).xlsx</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a> <span class="co"># extract the year and month from the data file name</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a> month_yr <span class="ot">&lt;-</span> <span class="fu">str_trim</span>(<span class="fu">substr</span>(x, <span class="dv">38</span>, <span class="fu">nchar</span>(x)<span class="sc">-</span><span class="dv">6</span>)) <span class="co">#e.g output: April 2022</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a> <span class="co">#split the month and year by the empty space inbetween</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a> split_month_yr <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(month_yr,<span class="st">" "</span>) <span class="co">#e.g output: [[1]][1]'April' '2022'</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a> <span class="co">#split_month_yr[[1]][1] shows the month, split_month_yr[[1]][2] shows the year </span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a> <span class="co">#join the month and year with "_"</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a> join_month_yr <span class="ot">&lt;-</span> <span class="fu">paste</span>(split_month_yr[[<span class="dv">1</span>]][<span class="dv">1</span>],split_month_yr[[<span class="dv">1</span>]][<span class="dv">2</span>],<span class="at">sep=</span><span class="st">"_"</span>) </span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a> <span class="co">#e.g output: April_2022</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a> <span class="co">#join_month_yr will be used as the variable name to store the df</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a> <span class="co">#add each month name to list</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a> df_list<span class="ot">&lt;-</span><span class="fu">append</span>(df_list,join_month_yr)</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a> <span class="co"># get filepath that we need to read each month's excel file</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a> filepath <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"data/aspatial/"</span>,x,<span class="at">sep=</span><span class="st">""</span>)</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a> <span class="co"># eg output: "data/aspatial/Data Vaksinasi Berbasis Kelurahan (01 April 2022).xlsx"</span></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a> <span class="co">#reach each excel file and assign it to its variable name </span></span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a> <span class="fu">assign</span>(join_month_yr,<span class="fu">read_excel</span>(filepath))</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="data-pre-processing-1" class="level3">
<h3 class="anchored" data-anchor-id="data-pre-processing-1">3.2.3 Data Pre-processing</h3>
<section id="check-for-duplicated-values" class="level4">
<h4 class="anchored" data-anchor-id="check-for-duplicated-values">3.2.3.1 Check for Duplicated Values</h4>
<p>To check for any duplicate columns for each dataset, I created a function called duplication_check() which takes in the df filename as a variable.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>duplication_check <span class="ot">&lt;-</span> <span class="cf">function</span>(file_name) {</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  duplicated_columns <span class="ot">&lt;-</span> <span class="fu">duplicated</span>(<span class="fu">as.list</span>(file_name))</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  duplicated_chara <span class="ot">&lt;-</span> <span class="fu">colnames</span>(file_name[duplicated_columns])</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(duplicated_chara)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>I then made use of df_list which I populated earlier on to contain all of our df names and looped through it. This allows me to check for each time period df, which df has duplicated columns using the function I created.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (df <span class="cf">in</span> df_list) {</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  duplicated_col <span class="ot">&lt;-</span> <span class="fu">duplication_check</span>(<span class="fu">get</span>(df))</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">identical</span>(duplicated_col, <span class="fu">character</span>(<span class="dv">0</span>))){</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    duplicated_col<span class="ot">=</span><span class="st">"none"</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Under df"</span>, df, <span class="st">"| duplicated col:"</span>, <span class="fu">toString</span>(duplicated_col)))</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Under df April_2022 | duplicated col: LANSIA\r\nDOSIS 3"
[1] "Under df Desember_2021 | duplicated col: none"
[1] "Under df Februari_2022 | duplicated col: none"
[1] "Under df Januari_2022 | duplicated col: none"
[1] "Under df Juli_2021 | duplicated col: none"
[1] "Under df Juni_2022 | duplicated col: LANSIA\r\nDOSIS 3"
[1] "Under df Mei_2022 | duplicated col: LANSIA\r\nDOSIS 3"
[1] "Under df November_2021 | duplicated col: none"
[1] "Under df Oktober_2021 | duplicated col: none"
[1] "Under df September_2021 | duplicated col: none"
[1] "Under df Maret_2022 | duplicated col: none"
[1] "Under df Agustus_2021 | duplicated col: none"</code></pre>
</div>
</div>
<p>Based on the output, we can observe that for df April_2022, Juni_2022 and Mei_2022. There is a duplicated column called <code>LANSIA\r\nDOSIS 3</code>.</p>
<p>Diving deeper into each dataset with a duplicated column with the use of glimpse(), we can observe that column <code>LANSIA\r\nDOSIS 3</code> and column <code>LANSIA\r\nDOSIS 2</code> are exactly the same.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(April_2022)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 268
Columns: 34
$ `KODE KELURAHAN`                             &lt;chr&gt; NA, "3172051003", "317304…
$ `WILAYAH KOTA`                               &lt;chr&gt; NA, "JAKARTA UTARA", "JAK…
$ KECAMATAN                                    &lt;chr&gt; NA, "PADEMANGAN", "TAMBOR…
$ KELURAHAN                                    &lt;chr&gt; "TOTAL", "ANCOL", "ANGKE"…
$ SASARAN                                      &lt;dbl&gt; 8941211, 23947, 29381, 29…
$ `BELUM VAKSIN`                               &lt;dbl&gt; 1481006, 4518, 5181, 5774…
$ `JUMLAH\r\nDOSIS 1`                          &lt;dbl&gt; 7460205, 19429, 24200, 23…
$ `JUMLAH\r\nDOSIS 2`                          &lt;dbl&gt; 6684941, 16915, 21004, 20…
$ `JUMLAH\r\nDOSIS 3`                          &lt;dbl&gt; 1886300, 4266, 6227, 4237…
$ `TOTAL VAKSIN\r\nDIBERIKAN`                  &lt;dbl&gt; 16031446, 40610, 51431, 4…
$ `LANSIA\r\nDOSIS 1`                          &lt;dbl&gt; 649702, 1574, 2476, 1457,…
$ `LANSIA\r\nDOSIS 2`                          &lt;dbl&gt; 610834, 1433, 2350, 1366,…
$ `LANSIA\r\nDOSIS 3`                          &lt;dbl&gt; 610834, 1433, 2350, 1366,…
$ `LANSIA TOTAL \r\nVAKSIN DIBERIKAN`          &lt;dbl&gt; 1536442, 3562, 6059, 3290…
$ `PELAYAN PUBLIK\r\nDOSIS 1`                  &lt;dbl&gt; 1481384, 3980, 3910, 4605…
$ `PELAYAN PUBLIK\r\nDOSIS 2`                  &lt;dbl&gt; 1375790, 3634, 3524, 4175…
$ `PELAYAN PUBLIK\r\nDOSIS 3`                  &lt;dbl&gt; 210484, 627, 678, 484, 25…
$ `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN`   &lt;dbl&gt; 3067658, 8241, 8112, 9264…
$ `GOTONG ROYONG\r\nDOSIS 1`                   &lt;dbl&gt; 88150, 178, 178, 262, 102…
$ `GOTONG ROYONG\r\nDOSIS 2`                   &lt;dbl&gt; 86122, 173, 179, 260, 99,…
$ `GOTONG ROYONG\r\nDOSIS 3`                   &lt;dbl&gt; 20351, 24, 55, 60, 20, 42…
$ `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN`    &lt;dbl&gt; 194623, 375, 412, 582, 22…
$ `TENAGA KESEHATAN\r\nDOSIS 1`                &lt;dbl&gt; 115539, 140, 135, 348, 12…
$ `TENAGA KESEHATAN\r\nDOSIS 2`                &lt;dbl&gt; 112036, 130, 130, 331, 12…
$ `TENAGA KESEHATAN\r\nDOSIS 3`                &lt;dbl&gt; 84980, 106, 96, 244, 83, …
$ `TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt; 312555, 376, 361, 923, 32…
$ `TAHAPAN 3\r\nDOSIS 1`                       &lt;dbl&gt; 4259873, 11254, 14777, 13…
$ `TAHAPAN 3\r\nDOSIS 2`                       &lt;dbl&gt; 3716743, 9507, 12437, 114…
$ `TAHAPAN 3\r\nDOSIS 3`                       &lt;dbl&gt; 1282989, 2927, 4122, 2958…
$ `TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN`        &lt;dbl&gt; 9259605, 23688, 31336, 28…
$ `REMAJA\r\nDOSIS 1`                          &lt;dbl&gt; 865557, 2303, 2724, 2851,…
$ `REMAJA\r\nDOSIS 2`                          &lt;dbl&gt; 783416, 2038, 2384, 2541,…
$ `REMAJA\r\nDOSIS 3`                          &lt;dbl&gt; 11590, 27, 43, 24, 7, 28,…
$ `REMAJA TOTAL\r\nVAKSIN DIBERIKAN`           &lt;dbl&gt; 1660563, 4368, 5151, 5416…</code></pre>
</div>
</div>
<p><strong>But how does this affect our dataset?</strong></p>
<p>Upon translation, i discovered that <code>LANSIA\r\nDOSIS</code> refers to elderly dosage.</p>
<p>This means that in our datasets with duplicated columns, there is 4 related columns - Elderly Dosage 1, Elderly Dosage 2, Elderly Dosage 3, Total Elderly Dosage where Dosage 3 values are a repeat of Dosage 2 values.</p>
<p>I suspected that the Total elderly vaccine delivered should be the sum of Elderly Dosage 1, 2 and 3. However, according to April_2022 df, total elderly vaccine delivered is 1536442 which is neither the sum of elderly dosage 1, 2 and 3 nor the sum of elderly dosage 1 and 2. This suggests that either the total sum is wrongly added or the values for elderly dosage 3 was input wrongly. Regardless, this reduces the reliability of those data columns.</p>
</section>
<section id="check-for-missing-values-1" class="level4">
<h4 class="anchored" data-anchor-id="check-for-missing-values-1">3.2.3.2 Check for Missing Values</h4>
<p>To check for missing values, I created a function, check_missing_value() and used it to check for each df.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>check_missing_value <span class="ot">&lt;-</span> <span class="cf">function</span>(filename){</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>(<span class="fu">is.na</span>(filename))</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (df <span class="cf">in</span> df_list) {</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">check_missing_value</span>(<span class="fu">get</span>(df)))</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3
[1] 3
[1] 3
[1] 3
[1] 3
[1] 3
[1] 3
[1] 3
[1] 3
[1] 3
[1] 3
[1] 3</code></pre>
</div>
</div>
<p>Based on the output, I realised that all the df were missing 3 fields. Looking deeper, I realised it was the same 3 fields (1st row, first 3 columns) for all the df that were blank. The reason why it is empty is due to the fact that is was merged with the top column in the excel and the 1st row of each excel file was meant to represent the total dosages across all districts. Thus, we will be removing it later.</p>
</section>
<section id="combination-of-every-.xlsx-files" class="level4">
<h4 class="anchored" data-anchor-id="combination-of-every-.xlsx-files">3.2.3.3 Combination of every .xlsx Files</h4>
<p>Now, we need to combine the data files for every time period of our study period.</p>
<p>First, I would need to add the date in a new column called <code>Time_Period</code> .</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (df_str <span class="cf">in</span> df_list) {</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  df<span class="ot">&lt;-</span><span class="fu">get</span>(df_str)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  new_df<span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">#extract relevant columns</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">'WILAYAH KOTA'</span>, <span class="co"># CITY AREA</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>             <span class="st">'KECAMATAN'</span>, <span class="co"># DISTRICT</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>             <span class="st">'KELURAHAN'</span>, <span class="co"># SUBDISTRICT</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>             <span class="st">'SASARAN'</span>, <span class="co"># TARGET population to be vacinated</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>             <span class="st">'BELUM VAKSIN'</span> <span class="co">#Yet to be vacinnated</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>             )) <span class="sc">%&gt;%</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">#add the month_year</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_column</span>(<span class="at">Time_Period =</span> df_str)</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assign</span>(df_str,new_df)</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>combined_df <span class="ot">&lt;-</span> <span class="fu">setNames</span>(<span class="fu">data.frame</span>(<span class="fu">matrix</span>(<span class="at">ncol =</span> <span class="dv">6</span>, <span class="at">nrow =</span> <span class="dv">0</span>)), </span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">c</span>(<span class="st">'WILAYAH KOTA'</span>,</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>                          <span class="st">'KECAMATAN'</span>,</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>                          <span class="st">'KELURAHAN'</span>,</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>                          <span class="st">'SASARAN'</span>,</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>                          <span class="st">'BELUM VAKSIN'</span>,</span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>                          <span class="st">'Time_Period'</span>))</span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a><span class="co">#combining all tgt</span></span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (df_str <span class="cf">in</span> df_list) {</span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>  combined_df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(combined_df,<span class="fu">get</span>(df_str))</span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Next, I translated the Indonesian column headers into English so we can understand it better.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#translate  colnames into eng</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(combined_df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"CITY_AREA"</span>, <span class="st">"DISTRICT"</span>,<span class="st">"SUBDISTRICT"</span>, <span class="st">"TARGET"</span>, <span class="st">"YET_TO_BE_VACINATED"</span>, <span class="st">"TIME_PERIOD"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Afterwards, I wanted to convert our time period into the date format yyyy-mm-dd.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#convert into date format yyyy-mm-dd</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Desember_2021'</span>] <span class="ot">&lt;-</span> <span class="st">'2021-12-01'</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Februari_2022'</span>] <span class="ot">&lt;-</span> <span class="st">'2022-02-01'</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Januari_2022'</span>] <span class="ot">&lt;-</span> <span class="st">'2022-01-01'</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Juli_2021'</span>] <span class="ot">&lt;-</span> <span class="st">'2021-07-01'</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Juni_2022'</span>] <span class="ot">&lt;-</span> <span class="st">'2022-06-01'</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Mei_2022'</span>] <span class="ot">&lt;-</span> <span class="st">'2022-05-01'</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Oktober_2021'</span>] <span class="ot">&lt;-</span> <span class="st">'2021-10-01'</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Maret_2022'</span>] <span class="ot">&lt;-</span> <span class="st">'2022-03-02'</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Agustus_2021'</span>] <span class="ot">&lt;-</span> <span class="st">'2021-08-01'</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'September_2021'</span>] <span class="ot">&lt;-</span> <span class="st">'2021-09-01'</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'November_2021'</span>] <span class="ot">&lt;-</span> <span class="st">'2021-11-01'</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'April_2022'</span>] <span class="ot">&lt;-</span> <span class="st">'2022-04-01'</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="co">#convert to date format</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD <span class="ot">&lt;-</span><span class="fu">as.Date</span>(combined_df<span class="sc">$</span>TIME_PERIOD, <span class="at">format=</span><span class="st">"%Y-%m-%d"</span>)</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(combined_df<span class="sc">$</span>TIME_PERIOD)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">#check missing values</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>combined_df[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(combined_df))<span class="sc">!=</span><span class="dv">0</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 6
   CITY_AREA DISTRICT SUBDISTRICT  TARGET YET_TO_BE_VACINATED TIME_PERIOD
   &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;         &lt;dbl&gt;               &lt;dbl&gt; &lt;date&gt;     
 1 &lt;NA&gt;      &lt;NA&gt;     TOTAL       8941211             1481006 2022-04-01 
 2 &lt;NA&gt;      &lt;NA&gt;     TOTAL       8941211             1718787 2021-12-01 
 3 &lt;NA&gt;      &lt;NA&gt;     TOTAL       8941211             1536737 2022-02-01 
 4 &lt;NA&gt;      &lt;NA&gt;     TOTAL       8941211             1620250 2022-01-01 
 5 &lt;NA&gt;      &lt;NA&gt;     TOTAL       7739060             5041111 2021-07-01 
 6 &lt;NA&gt;      &lt;NA&gt;     TOTAL       8941211             1444901 2022-06-01 
 7 &lt;NA&gt;      &lt;NA&gt;     TOTAL       8941211             1455001 2022-05-01 
 8 &lt;NA&gt;      &lt;NA&gt;     TOTAL       8941211             1875655 2021-11-01 
 9 &lt;NA&gt;      &lt;NA&gt;     TOTAL       8941211             2221074 2021-10-01 
10 &lt;NA&gt;      &lt;NA&gt;     TOTAL       8941211             3259430 2021-09-01 
11 &lt;NA&gt;      &lt;NA&gt;     TOTAL       8941211             1516200 2022-03-02 
12 &lt;NA&gt;      &lt;NA&gt;     TOTAL       8941211             4399496 2021-08-01 </code></pre>
</div>
</div>
<p>As identified earlier, there are missing values under <code>CITY AREA</code> and <code>DISTRICT</code> where the <code>SUBDISTRICT</code> is “TOTAL”. As our analysis focuses on the Subdistricts of Jakarta, knowing the “Total” is not important. Hence, I decided to remove it.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>combined_df <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(combined_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(combined_df))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
</section>
<section id="removal-of-outer-islands-1" class="level4">
<h4 class="anchored" data-anchor-id="removal-of-outer-islands-1">3.2.3.4 Removal of Outer Islands</h4>
<p>Next, we need to check whether this data consist of any outer islands and remove it accordingly. The code chunk below follow the steps earlier shown in the removal of outer islands.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">#identify unique values of city areas in Jakarta</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(combined_df<span class="sc">$</span><span class="st">"CITY_AREA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "JAKARTA UTARA"      "JAKARTA BARAT"      "JAKARTA TIMUR"     
[4] "JAKARTA SELATAN"    "JAKARTA PUSAT"      "KAB.ADM.KEP.SERIBU"</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">#remove the outer island i.e KAB.ADM.KEP.SERIBU</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>combined_df <span class="ot">&lt;-</span> <span class="fu">filter</span>(combined_df, CITY_AREA <span class="sc">!=</span> <span class="st">"KAB.ADM.KEP.SERIBU"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
</section>
</section>
<section id="geospatial-data-integration" class="level1">
<h1>4. Geospatial Data Integration</h1>
<p>Now that we have prepared our geospatial and aspatial data frames, we’ll need to join them. A quick look at their headers tell us what their common fields are:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(jkt2019)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Object_ID"        "Village_Code"     "Village"          "Code"            
 [5] "Province"         "City"             "District"         "Sub_District"    
 [9] "Total_Population" "geometry"        </code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(combined_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "CITY_AREA"           "DISTRICT"            "SUBDISTRICT"        
[4] "TARGET"              "YET_TO_BE_VACINATED" "TIME_PERIOD"        </code></pre>
</div>
</div>
<p>Analyzing the columns headers, columns related to the city, district and subdistrictshould match.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># joins based on district, Sub_District and City</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>combined_jakarta <span class="ot">&lt;-</span> <span class="fu">left_join</span>(jkt2019, combined_df,</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">by=</span><span class="fu">c</span>(</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"City"</span><span class="ot">=</span><span class="st">"CITY_AREA"</span>, </span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"District"</span><span class="ot">=</span><span class="st">"DISTRICT"</span>,</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Sub_District"</span><span class="ot">=</span><span class="st">"SUBDISTRICT"</span>)</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>                              )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now, let’s visualise our combined_jakarta and with its target and to be vaccinated values count.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>target_vaccines <span class="ot">=</span> <span class="fu">tm_shape</span>(combined_jakarta)<span class="sc">+</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"TARGET"</span>) <span class="sc">+</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Target Vaccinated Count"</span>)</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>yet_to_be_vaccines <span class="ot">=</span> <span class="fu">tm_shape</span>(combined_jakarta)<span class="sc">+</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"YET_TO_BE_VACINATED"</span>) <span class="sc">+</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Yet To Be Vaccinated Count"</span>)</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(target_vaccines, yet_to_be_vaccines)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Assgn2_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Both our maps show that there are missing values even though both dataframes missing values were removed earlier.</p>
<p>Thus, we need to look deeper into our values. Some of my observations looking at the <code>SUBDISTRICT</code> and <code>Sub_District</code> values directly were that there were alternate ways of calling the same sub district. For example, “KRAMAT JATI” in combined_df, but “KRAMAT ATI” in jkt2019.</p>
<p>The code chunk below further explores the unique values of sub districts found in count_subdistrict but not in bd_subdistrict and vice versa.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>count_subdistrict <span class="ot">&lt;-</span> <span class="fu">c</span>(combined_df<span class="sc">$</span>SUBDISTRICT)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>bd_subdistrict <span class="ot">&lt;-</span> <span class="fu">c</span>(jkt2019<span class="sc">$</span>Sub_District)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Unique Aspatial SUBDISTRICT:</span><span class="sc">\n</span><span class="st">__________________________________________________________</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Unique Aspatial SUBDISTRICT:
__________________________________________________________</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(count_subdistrict[<span class="sc">!</span>(count_subdistrict <span class="sc">%in%</span> bd_subdistrict)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "BALE KAMBANG"          "HALIM PERDANA KUSUMAH" "JATI PULO"            
[4] "KAMPUNG TENGAH"        "KERENDANG"             "KRAMAT JATI"          
[7] "PAL MERIAM"            "PINANG RANTI"          "RAWA JATI"            </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Unique Geospatial Sub_District:</span><span class="sc">\n</span><span class="st">__________________________________________________________</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Unique Geospatial Sub_District:
__________________________________________________________</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(bd_subdistrict[<span class="sc">!</span>(bd_subdistrict <span class="sc">%in%</span> count_subdistrict)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "KRENDANG"             "RAWAJATI"             "TENGAH"              
[4] "BALEKAMBANG"          "PINANGRANTI"          "JATIPULO"            
[7] "PALMERIAM"            "KRAMATJATI"           "HALIM PERDANA KUSUMA"</code></pre>
</div>
</div>
<p>The table below compiles the mismatched records of the subdistricts between the two dataframes.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># initialise a dataframe of our cases vs bd subdistrict spelling</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>spelling <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Aspatial_Count=</span><span class="fu">c</span>(<span class="st">"BALE KAMBANG"</span>, <span class="st">"HALIM PERDANA KUSUMAH"</span>, <span class="st">"JATI PULO"</span>, <span class="st">"KALI BARU"</span>, <span class="st">"KAMPUNG TENGAH"</span>, <span class="st">"KRAMAT JATI"</span>, <span class="st">"KERENDANG"</span>, <span class="st">"PAL MERIAM"</span>, <span class="st">"PINANG RANTI"</span>, <span class="st">"RAWA JATI"</span>),</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Geospatial_BD=</span><span class="fu">c</span>(<span class="st">"BALEKAMBAG"</span>, <span class="st">"HALIM PERDANA KUSUMA"</span>, <span class="st">"JATIPULO"</span>, <span class="st">"KALIBARU"</span>, <span class="st">"TENGAH"</span>, <span class="st">"KRAMATJATI"</span>, <span class="st">"KRENDANG"</span>, <span class="st">"PALMERIAM"</span>, <span class="st">"PINANGRANTI"</span>, <span class="st">"RAWAJATI"</span>)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>spelling</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>          Aspatial_Count        Geospatial_BD
1           BALE KAMBANG           BALEKAMBAG
2  HALIM PERDANA KUSUMAH HALIM PERDANA KUSUMA
3              JATI PULO             JATIPULO
4              KALI BARU             KALIBARU
5         KAMPUNG TENGAH               TENGAH
6            KRAMAT JATI           KRAMATJATI
7              KERENDANG             KRENDANG
8             PAL MERIAM            PALMERIAM
9           PINANG RANTI          PINANGRANTI
10             RAWA JATI             RAWAJATI</code></pre>
</div>
</div>
<p>Next, we need to rectify the mismatched subdistricts names.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># where jkt2019 is a mismatched value, replace with the correct value</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'BALEKAMBANG'</span>] <span class="ot">&lt;-</span> <span class="st">'BALE KAMBANG'</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'HALIM PERDANA KUSUMA'</span>] <span class="ot">&lt;-</span> <span class="st">'HALIM PERDANA KUSUMAH'</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'JATIPULO'</span>] <span class="ot">&lt;-</span> <span class="st">'JATI PULO'</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'KALI BARU'</span>] <span class="ot">&lt;-</span> <span class="st">'KALIBARU'</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'TENGAH'</span>] <span class="ot">&lt;-</span> <span class="st">'KAMPUNG TENGAH'</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'KRAMATJATI'</span>] <span class="ot">&lt;-</span> <span class="st">'KRAMAT JATI'</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'KRENDANG'</span>] <span class="ot">&lt;-</span> <span class="st">'KERENDANG'</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'PALMERIAM'</span>] <span class="ot">&lt;-</span> <span class="st">'PAL MERIAM'</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'PINANGRANTI'</span>] <span class="ot">&lt;-</span> <span class="st">'PINANG RANTI'</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'RAWAJATI'</span>] <span class="ot">&lt;-</span> <span class="st">'RAWA JATI'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Rejoining the two dataframes</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>combined_jakarta <span class="ot">&lt;-</span> <span class="fu">left_join</span>(jkt2019, combined_df,</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">by=</span><span class="fu">c</span>(<span class="st">"Sub_District"</span><span class="ot">=</span><span class="st">"SUBDISTRICT"</span>)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>                              )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># double check of any missing values</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(combined_jakarta))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>Once again, let’s visualise it!<br>
</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>updated_target_count <span class="ot">=</span> <span class="fu">tm_shape</span>(combined_jakarta)<span class="sc">+</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"TARGET"</span>) <span class="sc">+</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Updated Target Vacinated Count"</span>)</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>updated_yet_to_be_count <span class="ot">=</span> <span class="fu">tm_shape</span>(combined_jakarta)<span class="sc">+</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"YET_TO_BE_VACINATED"</span>) <span class="sc">+</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Updated TO Be Vaccinated Count"</span>)</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(updated_target_count, updated_yet_to_be_count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Assgn2_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="choropleth-mapping-and-analysis" class="level1">
<h1>5. Choropleth Mapping and Analysis</h1>
<section id="calculation-of-monthly-vaccination-rates" class="level2">
<h2 class="anchored" data-anchor-id="calculation-of-monthly-vaccination-rates">5.1 Calculation of Monthly Vaccination Rates</h2>
<p>To calculate the monthly vaccination rates, I will be using this formula:</p>
<p><span class="math inline">\(Vaccination Rate (\%) =\frac{Target - Yet To Be Vaccinated}{Target} * 100\)</span></p>
<p>where Target refers to target population to get vaccinated and YetToBeVacinated refers to population who have not been vaccinated yet. Essentially, the vaccination rate is derived from taking count of people who are vaccinated over count of people who are supposed to be vaccinated.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grouping based on the sub-district and time_period</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>vr <span class="ot">&lt;-</span> combined_df <span class="sc">%&gt;%</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(jkt2019, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"SUBDISTRICT"</span> <span class="ot">=</span> <span class="st">"Sub_District"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SUBDISTRICT, TIME_PERIOD) <span class="sc">%&gt;%</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="st">`</span><span class="at">vaccination_rates</span><span class="st">`</span> <span class="ot">=</span> ((<span class="fu">sum</span>(TARGET<span class="sc">-</span>YET_TO_BE_VACINATED)<span class="sc">/</span><span class="fu">sum</span>(TARGET))<span class="sc">*</span><span class="dv">100</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#afterwards, pivots the table based on the Dates, showing the cumulative death rate</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> TIME_PERIOD,</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> vaccination_rates)</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>vr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 261 × 13
   SUBDISTRICT   2021-…¹ 2021-…² 2021-…³ 2021-…⁴ 2021-…⁵ 2021-…⁶ 2022-…⁷ 2022-…⁸
   &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 ANCOL            34.9    49.2    61.8    72.2    75.1    77.0    78.9    80.6
 2 ANGKE            36.1    53.3    64.8    74.3    77.7    79.7    80.9    81.7
 3 BALE KAMBANG     25.1    37.3    57.2    70.2    74.0    76.7    78.3    79.5
 4 BALI MESTER      33.9    48.9    62.2    74.4    78.3    80.4    81.7    82.8
 5 BAMBU APUS       32.3    47.8    64.4    77.0    81.0    82.5    83.4    84.5
 6 BANGKA           34.0    52.6    61.3    73.4    78.1    79.9    80.7    81.5
 7 BARU             44.4    58.1    67.9    79.6    82.9    84.2    85.0    85.8
 8 BATU AMPAR       26.7    40.7    58.6    70.7    74.6    77.1    78.8    80.2
 9 BENDUNGAN HI…    39.5    54.0    62.7    75.8    79.1    80.6    81.4    82.3
10 BIDARA CINA      27.6    40.9    57.9    71.2    75.3    77.1    78.2    79.2
# … with 251 more rows, 4 more variables: `2022-03-02` &lt;dbl&gt;,
#   `2022-04-01` &lt;dbl&gt;, `2022-05-01` &lt;dbl&gt;, `2022-06-01` &lt;dbl&gt;, and abbreviated
#   variable names ¹​`2021-07-01`, ²​`2021-08-01`, ³​`2021-09-01`, ⁴​`2021-10-01`,
#   ⁵​`2021-11-01`, ⁶​`2021-12-01`, ⁷​`2022-01-01`, ⁸​`2022-02-01`</code></pre>
</div>
</div>
<p>The output of the code chunk below shows monthly vaccination rates across each sub-district from a study period of July 2021 to June 2022.</p>
<p><strong>Convert our dataframes into sf objects</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>combined_jakarta <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(combined_jakarta)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>vr <span class="ot">&lt;-</span> vr<span class="sc">%&gt;%</span> <span class="fu">left_join</span>(jkt2019, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"SUBDISTRICT"</span><span class="ot">=</span><span class="st">"Sub_District"</span>))</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>vr <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(vr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="mapping-of-monthly-vaccination-rates" class="level2">
<h2 class="anchored" data-anchor-id="mapping-of-monthly-vaccination-rates">5.2 Mapping of Monthly Vaccination Rates</h2>
<p>There are different <a href="https://storymaps.arcgis.com/stories/bcb8e509f319436786a2481c722bc218">methods</a> to classify the vaccination rates in choropleth maps. Initially, I considered Jenks classification method as it can minimize variation in each group which allows map readers to easily witness the trends presented by the map. However, this method is not very suitable for our data as it has low variance.</p>
<p>The code chunk below shows the decreasing variance as time passes through the period of July 2021 to June 2022.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(vr<span class="sc">$</span><span class="st">`</span><span class="at">2021-07-01</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 36.34884</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(vr<span class="sc">$</span><span class="st">`</span><span class="at">2021-10-01</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6.146801</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(vr<span class="sc">$</span><span class="st">`</span><span class="at">2022-02-01</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.971211</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(vr<span class="sc">$</span><span class="st">`</span><span class="at">2022-06-01</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.652066</code></pre>
</div>
</div>
<p>To get a clearer visualization of a specific month, I decided to use the classification method, cont as it creates a smooth, linear gradient in which the change in values is proportionally related to the change in colors. For the color palette, i decided to go with a sequential scheme from yellow to green as it more suited for ordered data that progress from low to high.</p>
<p>The code chunk below is a map of vaccination rates in July 2021. By clicking on a certain location, it will show us the district name and respective vaccination rates. The darker the green, the higher the vaccination rates.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(vr)<span class="sc">+</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(<span class="st">"2021-07-01"</span>, </span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">n=</span> <span class="dv">6</span>,</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">style =</span> <span class="st">"cont"</span>,</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">title =</span> <span class="st">"Vaccination Rate(%)"</span>,</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">palette =</span> <span class="st">"YlGn"</span>,</span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#tm_text("SUBDISTRICT")+</span></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Vaccination Rates in July 2021"</span>,</span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">main.title.size =</span> <span class="dv">1</span>,</span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.height =</span> <span class="fl">0.5</span>, </span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.width =</span> <span class="fl">0.4</span>,</span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a>              ) <span class="sc">+</span></span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Assgn2_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>    <span class="co">#+ tm_view(set.zoom.limits = c(10, 14),</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>            <span class="co">#view.legend.position = c("right","bottom"))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Insights:</p>
<ol type="1">
<li><p>The sub-district with the lowest vaccination rate is CIPINANG BESAR UTARA (23.15%).</p></li>
<li><p>The sub-district with the highest vaccination rate is HALIM PERDANA KUSUMAH (55.24%).</p></li>
<li><p>Sub-districts with lower vaccination rates can try to learn/adopt strategies from sub districts with higher vaccination rates’ to increase their own vaccination rates.</p></li>
</ol>
<p>The code chunk below is a map of vaccination rates in June 2022.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(vr)<span class="sc">+</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(<span class="st">"2022-06-01"</span>, </span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">n=</span> <span class="dv">6</span>,</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">style =</span> <span class="st">"cont"</span>,</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">title =</span> <span class="st">"Vaccination Rate(%)"</span>,</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">palette =</span> <span class="st">"YlGn"</span>,</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#tm_text("SUBDISTRICT")+</span></span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Vaccination Rates in June 2022"</span>,</span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">main.title.size =</span> <span class="dv">1</span>,</span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.height =</span> <span class="fl">0.5</span>, </span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.width =</span> <span class="fl">0.4</span>,</span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb76-16"><a href="#cb76-16" aria-hidden="true" tabindex="-1"></a>              ) <span class="sc">+</span></span>
<span id="cb76-17"><a href="#cb76-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Assgn2_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>    <span class="co">#+ tm_view(set.zoom.limits = c(10, 14),</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>            <span class="co">#view.legend.position = c("right","bottom"))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Insights (as compared to July 2021):</p>
<ol type="1">
<li><p>The sub-district with the lowest vaccination rate is no longer CIPINANG BESAR UTARA(81.79%) but KEBON MELATI (78.13%). However, the lowest vaccination rate in June 2022 is still much higher than the the highest vaccination rate in July 2021 (55.24%).</p></li>
<li><p>The sub-district with highest vaccination rate is the same, HALIM PERDANA KUSUMAH (89.76%).</p></li>
<li><p>The bottom half sub-districts tend to have a higher vaccination rate than the top half sub-districts.</p></li>
<li><p>Thus, we can infer that within a span of 1 year, the vaccination rates across the sub-districts in Jakarta have increased.</p></li>
</ol>
<p>The code chunk below plots the vaccination rate across the our study period of July 2021 to June 2022. The data is classified using manually. The breakpoints are 20, 40, 60, 80, 100.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>rate_cols <span class="ot">&lt;-</span> <span class="fu">colnames</span>(<span class="fu">st_set_geometry</span>(vr[<span class="dv">2</span><span class="sc">:</span><span class="dv">13</span>], <span class="cn">NULL</span>))</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>map_list <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">"list"</span>, <span class="at">length =</span> <span class="fu">length</span>(rate_cols))</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(rate_cols)) {</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>  cmap <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(vr)<span class="sc">+</span></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(rate_cols[[i]], </span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">n=</span> <span class="dv">6</span>,</span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">100</span>),</span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a>            <span class="co">#style = "cont",</span></span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">title =</span> <span class="st">"Vaccination Rate(%)"</span>,</span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">palette =</span> <span class="st">"YlGn"</span>,</span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">#tm_text("SUBDISTRICT")+</span></span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(</span>
<span id="cb78-16"><a href="#cb78-16" aria-hidden="true" tabindex="-1"></a>              <span class="at">panel.show =</span> <span class="cn">TRUE</span>,</span>
<span id="cb78-17"><a href="#cb78-17" aria-hidden="true" tabindex="-1"></a>              <span class="at">panel.labels =</span> rate_cols[[i]],</span>
<span id="cb78-18"><a href="#cb78-18" aria-hidden="true" tabindex="-1"></a>              <span class="at">panel.label.color =</span> <span class="st">'gray12'</span>,</span>
<span id="cb78-19"><a href="#cb78-19" aria-hidden="true" tabindex="-1"></a>              <span class="at">panel.label.size =</span> <span class="fl">0.8</span>,</span>
<span id="cb78-20"><a href="#cb78-20" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.show =</span> <span class="cn">FALSE</span></span>
<span id="cb78-21"><a href="#cb78-21" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb78-22"><a href="#cb78-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb78-23"><a href="#cb78-23" aria-hidden="true" tabindex="-1"></a>  map_list[[i]] <span class="ot">&lt;-</span> cmap</span>
<span id="cb78-24"><a href="#cb78-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb78-25"><a href="#cb78-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-26"><a href="#cb78-26" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(map_list, <span class="at">ncol =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Assgn2_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Insights:</p>
<ol type="1">
<li><p>We can actually see Jakarta’s vaccination rate increase steadily across the period of July 2021 to February 2022 as more sub-districts shift from a lighter shade of green to a darker one.</p></li>
<li><p>However, from February 2022 to June 2022, there is not much difference in the vaccination rates across all sub-districts.</p></li>
</ol>
</section>
</section>
<section id="local-gi-analysis" class="level1">
<h1>6. Local Gi* Analysis</h1>
<p>To detect hot spot areas with high vaccination rates, and cold spot areas with high vaccination rates in Jakarta, we will be using Getis-Ord Gi* statistics.</p>
<p>For Interpretation of Gi* values:</p>
<p><span class="math inline">\(Gi∗&gt;0\)</span> : indicates grouping of areas with values higher than average</p>
<p><span class="math inline">\(Gi∗&lt;0\)</span> : indicates grouping of areas with values lower than average</p>
<p>A larger magnitude represents a greater intensity of grouping.</p>
<p>For significant Gi* statistic values, two spatial associations can be inferred:</p>
<ul>
<li><p><strong>Hot spot areas:</strong> where <span class="math inline">\(Gi∗&gt;0\)</span>, significant and positive, if location is associated with relatively high values of the surrounding locations.</p></li>
<li><p><strong>Cold spot areas:</strong> where <span class="math inline">\(Gi∗&lt;0\)</span>, significant and negative, if location is associated with relatively low values in surrounding locations</p></li>
</ul>
<section id="computing-local-gi-values-of-monthly-vaccination-rates" class="level2">
<h2 class="anchored" data-anchor-id="computing-local-gi-values-of-monthly-vaccination-rates">6.1 Computing local Gi* Values of Monthly Vaccination Rates</h2>
<p>Before we compute our local Gi*, I would like to rearange our data for better clarity. The data will be organised in the following format: Date, Sub_District and Vaccination_Rate.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Extract relevant columns</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>copy_cjkt_df <span class="ot">&lt;-</span> combined_jakarta[<span class="dv">8</span><span class="sc">:</span><span class="dv">14</span>]</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate vaccination rates</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>copy_cjkt_df <span class="ot">&lt;-</span> copy_cjkt_df <span class="sc">%&gt;%</span> </span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">VACCINATION_RATES =</span> (TARGET <span class="sc">-</span> YET_TO_BE_VACINATED)<span class="sc">/</span>TARGET <span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a><span class="co">#drop not impt col</span></span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>copy_cjkt_df <span class="ot">=</span> <span class="fu">subset</span>(copy_cjkt_df, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(Total_Population,CITY_AREA,DISTRICT,TARGET,YET_TO_BE_VACINATED) )</span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a><span class="co">#for clarity, reorder the columns to data, subdistrict, vaccination rate</span></span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>copy_cjkt_df<span class="ot">&lt;-</span> copy_cjkt_df <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(VACCINATION_RATES, <span class="at">.after=</span>Sub_District)</span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>copy_cjkt_df<span class="ot">&lt;-</span> copy_cjkt_df <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(TIME_PERIOD)</span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(copy_cjkt_df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Date"</span>, <span class="st">"Sub_District"</span>,<span class="st">"Vaccination_Rate"</span>,<span class="st">"geometry"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(copy_cjkt_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 3,132
Columns: 4
$ Date             &lt;date&gt; 2022-04-01, 2021-12-01, 2022-02-01, 2022-01-01, 2021…
$ Sub_District     &lt;chr&gt; "KEAGUNGAN", "KEAGUNGAN", "KEAGUNGAN", "KEAGUNGAN", "…
$ Vaccination_Rate &lt;dbl&gt; 84.62069, 82.22810, 84.01104, 83.22310, 32.67593, 85.…
$ geometry         &lt;MULTIPOLYGON [m]&gt; MULTIPOLYGON (((-3626874 69..., MULTIPOL…</code></pre>
</div>
</div>
<p>The code chunk below creates a time series cube using <a href="https://cran.r-project.org/web/packages/spacetime/index.html">spacetime()</a> of sfdep package:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>vr_st<span class="ot">&lt;-</span> <span class="fu">as_spacetime</span>(copy_cjkt_df,</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>                                <span class="at">.loc_col =</span> <span class="st">"Sub_District"</span>,</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>                                <span class="at">.time_col =</span> <span class="st">"Date"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>By using <a href="https://gisgeography.com/space-time-cubes/#:~:text=Space%2Dtime%20cubes%20show%20how,bottom%20cubes%20have%20older%20timestamps.">is_spacetime_cube()</a> of sfdep package, we can check if vacc_rate_st is indeed a space-time cube object. If it returns TRUE, vacc_rate_st is a space-time cube object.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is_spacetime_cube</span>(vr_st)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>To compute the local Gi* statistics, we need to derive the spatial weights first:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>vr_nb <span class="ot">&lt;-</span> vr_st <span class="sc">%&gt;%</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">activate</span>(<span class="st">"geometry"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nb =</span> <span class="fu">include_self</span>(<span class="fu">st_contiguity</span>(geometry)),</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">wt =</span> <span class="fu">st_inverse_distance</span>(nb, geometry,</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">scale=</span><span class="dv">1</span>,</span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">alpha=</span><span class="dv">1</span>),</span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">.before=</span><span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_wts</span>(<span class="st">"wt"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_nbs</span>(<span class="st">"nb"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Our df now has neigbours (nb) and weights(wt) for each date.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vr_nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>         Date  Sub_District Vaccination_Rate
5  2021-07-01     KEAGUNGAN         32.67593
17 2021-07-01        GLODOK         50.48665
29 2021-07-01 HARAPAN MULIA         31.84070
41 2021-07-01  CEMPAKA BARU         32.61251
53 2021-07-01    PASAR BARU         47.94955
65 2021-07-01  KARANG ANYAR         34.76752
                                                                                                                             wt
5                                                  0.000000000, 0.001071983, 0.001039284, 0.001417870, 0.001110612, 0.001297268
17                             0.0010719832, 0.0000000000, 0.0015104128, 0.0009296520, 0.0017907632, 0.0007307585, 0.0008494813
29                                           0.0000000000, 0.0008142118, 0.0009393129, 0.0013989989, 0.0012870298, 0.0006120168
41                             0.0008142118, 0.0000000000, 0.0007692215, 0.0007293181, 0.0007540881, 0.0009920877, 0.0006784241
53 0.0000000000, 0.0005532172, 0.0007069914, 0.0010234291, 0.0007360076, 0.0005753173, 0.0004691258, 0.0006728587, 0.0004157941
65                             0.0005532172, 0.0000000000, 0.0006268231, 0.0018409190, 0.0014996188, 0.0008237842, 0.0007788561
                                      nb
5                1, 2, 39, 152, 158, 166
17          1, 2, 39, 162, 163, 166, 171
29               3, 4, 10, 110, 140, 141
41          3, 4, 11, 110, 116, 118, 130
53 5, 6, 9, 117, 119, 121, 122, 123, 158
65           5, 6, 7, 121, 151, 158, 159</code></pre>
</div>
</div>
<p>Before computing Gi*, we need to set the seed value so that the results of the simulations will be reproducible and constant. I willbe using seed 123.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The code chunk below computes Gi* for each location, grouping by Date and using <a href="https://sfdep.josiahparry.com/reference/local_gstar.html">local_gstar_perm()</a> of sfdep package:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>gi_stars <span class="ot">&lt;-</span> vr_nb <span class="sc">%&gt;%</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Date) <span class="sc">%&gt;%</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gi_star =</span> <span class="fu">local_gstar_perm</span>(</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>    Vaccination_Rate, nb, wt, <span class="at">nsim=</span><span class="dv">99</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>      tidyr<span class="sc">::</span><span class="fu">unnest</span>(gi_star)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>After running 100 simulations, the code chunk below shows our newly created df.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>gi_stars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,132 × 13
# Groups:   Date [12]
   Date       Sub_Di…¹ Vacci…² wt    nb    gi_star    e_gi  var_gi p_value p_sim
   &lt;date&gt;     &lt;chr&gt;      &lt;dbl&gt; &lt;lis&gt; &lt;lis&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
 1 2021-07-01 KEAGUNG…    32.7 &lt;dbl&gt; &lt;int&gt;   1.33  0.00385 6.66e-8 1.83e-1  0.26
 2 2021-07-01 GLODOK      50.5 &lt;dbl&gt; &lt;int&gt;   3.81  0.00380 4.47e-8 1.38e-4  0.02
 3 2021-07-01 HARAPAN…    31.8 &lt;dbl&gt; &lt;int&gt;  -0.846 0.00386 5.54e-8 3.97e-1  0.38
 4 2021-07-01 CEMPAKA…    32.6 &lt;dbl&gt; &lt;int&gt;  -1.15  0.00386 6.01e-8 2.50e-1  0.2 
 5 2021-07-01 PASAR B…    47.9 &lt;dbl&gt; &lt;int&gt;   2.72  0.00382 4.15e-8 6.43e-3  0.02
 6 2021-07-01 KARANG …    34.8 &lt;dbl&gt; &lt;int&gt;   0.926 0.00387 4.84e-8 3.55e-1  0.34
 7 2021-07-01 MANGGA …    35.1 &lt;dbl&gt; &lt;int&gt;   0.831 0.00383 4.12e-8 4.06e-1  0.44
 8 2021-07-01 PETOJO …    34.7 &lt;dbl&gt; &lt;int&gt;  -0.105 0.00385 6.23e-8 9.16e-1  0.88
 9 2021-07-01 SENEN       39.6 &lt;dbl&gt; &lt;int&gt;   0.862 0.00386 3.45e-8 3.89e-1  0.48
10 2021-07-01 BUNGUR      37.4 &lt;dbl&gt; &lt;int&gt;  -0.150 0.00383 4.53e-8 8.81e-1  0.92
# … with 3,122 more rows, 3 more variables: p_folded_sim &lt;dbl&gt;, skewness &lt;dbl&gt;,
#   kurtosis &lt;dbl&gt;, and abbreviated variable names ¹​Sub_District,
#   ²​Vaccination_Rate</code></pre>
</div>
</div>
</section>
<section id="mapping-of-gi-and-monthly-vaccination-rates" class="level2">
<h2 class="anchored" data-anchor-id="mapping-of-gi-and-monthly-vaccination-rates">6.2 Mapping of Gi* and Monthly Vaccination Rates</h2>
<p>To map our local gi*, we first need to include the geometry values by joining copy_cjkt_df with gi_stars.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>combined_cjkt_gi_stars <span class="ot">&lt;-</span> copy_cjkt_df <span class="sc">%&gt;%</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(gi_stars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="mapping-for-july-2021" class="level3">
<h3 class="anchored" data-anchor-id="mapping-for-july-2021">6.2.1 Mapping for July 2021</h3>
<p>Taking a look at the Gi* values and its p-value of the vaccination rates of July 2021:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>gi_star_map <span class="ot">=</span> <span class="fu">tm_shape</span>(<span class="fu">filter</span>(combined_cjkt_gi_stars, Date <span class="sc">==</span> <span class="st">'2021-07-01'</span>)) <span class="sc">+</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"gi_star"</span>) <span class="sc">+</span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Gi* values for vaccination rates in July 2021"</span>, <span class="at">main.title.size=</span><span class="fl">0.8</span>)</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>p_sim_map <span class="ot">=</span> <span class="fu">tm_shape</span>(<span class="fu">filter</span>(combined_cjkt_gi_stars, Date <span class="sc">==</span> <span class="st">'2021-07-01'</span>)) <span class="sc">+</span></span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"p_sim"</span>, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.05</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"p-values of Gi* for vaccination rates in July 2021"</span>, <span class="at">main.title.size=</span><span class="fl">0.8</span>)</span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-12"><a href="#cb93-12" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(gi_star_map, p_sim_map)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Assgn2_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>psig_july2021 <span class="ot">&lt;-</span> combined_cjkt_gi_stars  <span class="sc">%&gt;%</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(p_sim <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">&amp;</span> Date <span class="sc">==</span> <span class="st">'2021-07-01'</span>)</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(combined_cjkt_gi_stars) <span class="sc">+</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(psig_july2021) <span class="sc">+</span></span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"gi_star"</span>) <span class="sc">+</span> </span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Hot and Cold Spot Areas of Vaccination Rates in July 2021"</span>, <span class="at">main.title.size =</span> <span class="fl">0.8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Assgn2_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="mapping-for-4-time-periods" class="level3">
<h3 class="anchored" data-anchor-id="mapping-for-4-time-periods">6.2.1 Mapping for 4 Time Periods</h3>
<p>To compare the hot and cold spot over our study period, I will break the period into 4 quarters which are July 2021, October 2021, February 2022, June 2022.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># july 2021</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>psig_july <span class="ot">&lt;-</span> combined_cjkt_gi_stars  <span class="sc">%&gt;%</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter significant values(&lt;0.05) and the according date</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(p_sim <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">&amp;</span> Date <span class="sc">==</span> <span class="st">'2021-07-01'</span>)</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a><span class="co">#tmap_mode("plot")</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>hcs_july2021<span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(combined_cjkt_gi_stars) <span class="sc">+</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(psig_july) <span class="sc">+</span></span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"gi_star"</span>) <span class="sc">+</span> </span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb95-13"><a href="#cb95-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_layout</span>(</span>
<span id="cb95-14"><a href="#cb95-14" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title=</span><span class="st">"Hot and Cold Spot Areas of Vaccination Rates in July 2021"</span>,</span>
<span id="cb95-15"><a href="#cb95-15" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title.size =</span> <span class="fl">0.5</span>)</span>
<span id="cb95-16"><a href="#cb95-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-17"><a href="#cb95-17" aria-hidden="true" tabindex="-1"></a><span class="co"># october 2021</span></span>
<span id="cb95-18"><a href="#cb95-18" aria-hidden="true" tabindex="-1"></a>psig_oct <span class="ot">&lt;-</span> combined_cjkt_gi_stars  <span class="sc">%&gt;%</span></span>
<span id="cb95-19"><a href="#cb95-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter significant values(&lt;0.05) and the according date</span></span>
<span id="cb95-20"><a href="#cb95-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(p_sim <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">&amp;</span> Date <span class="sc">==</span> <span class="st">'2021-10-01'</span>)</span>
<span id="cb95-21"><a href="#cb95-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-22"><a href="#cb95-22" aria-hidden="true" tabindex="-1"></a>hcs_oct2021 <span class="ot">&lt;-</span><span class="fu">tm_shape</span>(combined_cjkt_gi_stars) <span class="sc">+</span></span>
<span id="cb95-23"><a href="#cb95-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb95-24"><a href="#cb95-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb95-25"><a href="#cb95-25" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(psig_oct) <span class="sc">+</span></span>
<span id="cb95-26"><a href="#cb95-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"gi_star"</span>) <span class="sc">+</span> </span>
<span id="cb95-27"><a href="#cb95-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb95-28"><a href="#cb95-28" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_layout</span>(</span>
<span id="cb95-29"><a href="#cb95-29" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title=</span><span class="st">"Hot and Cold Spot Areas of Vaccination Rates in October 2021"</span>,</span>
<span id="cb95-30"><a href="#cb95-30" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title.size =</span> <span class="fl">0.5</span>)</span>
<span id="cb95-31"><a href="#cb95-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-32"><a href="#cb95-32" aria-hidden="true" tabindex="-1"></a><span class="co">#february 2022</span></span>
<span id="cb95-33"><a href="#cb95-33" aria-hidden="true" tabindex="-1"></a>psig_feb <span class="ot">&lt;-</span> combined_cjkt_gi_stars  <span class="sc">%&gt;%</span></span>
<span id="cb95-34"><a href="#cb95-34" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter significant values(&lt;0.05) and the according date</span></span>
<span id="cb95-35"><a href="#cb95-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(p_sim <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">&amp;</span> Date <span class="sc">==</span> <span class="st">'2022-02-01'</span>)</span>
<span id="cb95-36"><a href="#cb95-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-37"><a href="#cb95-37" aria-hidden="true" tabindex="-1"></a>hcs_feb2022<span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(combined_cjkt_gi_stars) <span class="sc">+</span></span>
<span id="cb95-38"><a href="#cb95-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb95-39"><a href="#cb95-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb95-40"><a href="#cb95-40" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(psig_feb) <span class="sc">+</span></span>
<span id="cb95-41"><a href="#cb95-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"gi_star"</span>) <span class="sc">+</span> </span>
<span id="cb95-42"><a href="#cb95-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb95-43"><a href="#cb95-43" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_layout</span>(</span>
<span id="cb95-44"><a href="#cb95-44" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title=</span><span class="st">"Hot and Cold Spot Areas of Vaccination Rates in February 2022"</span>,</span>
<span id="cb95-45"><a href="#cb95-45" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title.size =</span> <span class="fl">0.5</span>)</span>
<span id="cb95-46"><a href="#cb95-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-47"><a href="#cb95-47" aria-hidden="true" tabindex="-1"></a><span class="co"># june 2022</span></span>
<span id="cb95-48"><a href="#cb95-48" aria-hidden="true" tabindex="-1"></a>psig_june <span class="ot">&lt;-</span> combined_cjkt_gi_stars  <span class="sc">%&gt;%</span></span>
<span id="cb95-49"><a href="#cb95-49" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter significant values(&lt;0.05) and the according date</span></span>
<span id="cb95-50"><a href="#cb95-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(p_sim <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">&amp;</span> Date <span class="sc">==</span> <span class="st">'2022-06-01'</span>)</span>
<span id="cb95-51"><a href="#cb95-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-52"><a href="#cb95-52" aria-hidden="true" tabindex="-1"></a>hcs_june2022 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(combined_cjkt_gi_stars) <span class="sc">+</span></span>
<span id="cb95-53"><a href="#cb95-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb95-54"><a href="#cb95-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb95-55"><a href="#cb95-55" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(psig_june) <span class="sc">+</span></span>
<span id="cb95-56"><a href="#cb95-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"gi_star"</span>) <span class="sc">+</span> </span>
<span id="cb95-57"><a href="#cb95-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb95-58"><a href="#cb95-58" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_layout</span>(</span>
<span id="cb95-59"><a href="#cb95-59" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title=</span><span class="st">"Hot and Cold Spot Areas of Vaccination Rates in June 2022"</span>,</span>
<span id="cb95-60"><a href="#cb95-60" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title.size =</span> <span class="fl">0.5</span>)</span>
<span id="cb95-61"><a href="#cb95-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-62"><a href="#cb95-62" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(hcs_july2021,hcs_oct2021,hcs_feb2022,hcs_june2022)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Assgn2_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The code chunk below creates a function to check the sub-district with the highest and lowest siginificant gi* value for July 2021, October 2021, February 2022, June 2022.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>get_significant_locations <span class="ot">&lt;-</span> <span class="cf">function</span>(date) {</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#print(paste("Sub-Districts with p-value of Gi* &lt; 0.05 in", month))</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#sub district name</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>  sub_d<span class="ot">&lt;-</span> <span class="fu">filter</span>(combined_cjkt_gi_stars, Date <span class="sc">==</span> date <span class="sc">&amp;</span> p_sim<span class="sc">&lt;</span><span class="fl">0.05</span>)<span class="sc">$</span>Sub_District</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">#gi star value</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>  gi_star_value <span class="ot">&lt;-</span> <span class="fu">filter</span>(combined_cjkt_gi_stars, Date <span class="sc">==</span> date <span class="sc">&amp;</span> p_sim<span class="sc">&lt;</span><span class="fl">0.05</span>)<span class="sc">$</span>gi_star</span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>  temp <span class="ot">&lt;-</span><span class="fu">data.frame</span>(sub_d,gi_star_value)</span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#print(temp)</span></span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>  max_gi_sd<span class="ot">&lt;-</span> temp<span class="sc">$</span>sub_d[temp<span class="sc">$</span>gi_star_value <span class="sc">==</span><span class="fu">max</span>(temp<span class="sc">$</span>gi_star_value)]</span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a>  min_gi_sd<span class="ot">&lt;-</span> temp<span class="sc">$</span>sub_d[temp<span class="sc">$</span>gi_star_value <span class="sc">==</span><span class="fu">min</span>(temp<span class="sc">$</span>gi_star_value)]</span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb96-16"><a href="#cb96-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Date: "</span>, date))</span>
<span id="cb96-17"><a href="#cb96-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"For siginificant sub-district with the"</span>)</span>
<span id="cb96-18"><a href="#cb96-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"highest gi* value: "</span>,max_gi_sd))</span>
<span id="cb96-19"><a href="#cb96-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"lowest gi* value: "</span>,min_gi_sd))</span>
<span id="cb96-20"><a href="#cb96-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb96-21"><a href="#cb96-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-22"><a href="#cb96-22" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2021-07-01"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date:  2021-07-01"
[1] "For siginificant sub-district with the"
[1] "highest gi* value:  MELAWAI"
[1] "lowest gi* value:  CIPINANG BESAR UTARA"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2021-10-01"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date:  2021-10-01"
[1] "For siginificant sub-district with the"
[1] "highest gi* value:  KELAPA GADING TIMUR"
[1] "lowest gi* value:  BATU AMPAR"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2022-02-01"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date:  2022-02-01"
[1] "For siginificant sub-district with the"
[1] "highest gi* value:  SRENGSENG SAWAH"
[1] "lowest gi* value:  KEBON KACANG"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2022-06-01"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date:  2022-06-01"
[1] "For siginificant sub-district with the"
[1] "highest gi* value:  SRENGSENG SAWAH"
[1] "lowest gi* value:  KEBON KACANG"</code></pre>
</div>
</div>
</section>
<section id="statistical-conclusion" class="level3">
<h3 class="anchored" data-anchor-id="statistical-conclusion">6.2.3 Statistical Conclusion</h3>
<ol type="1">
<li><p>Based on our maps, areas colored “red” are significant hot spots, while areas colored “green” are significant cold spots.</p></li>
<li><p>Overall, we can observe that there is spatial clustering in our data. From July 2021 to June 2022, the no. of hot and cold spot areas have changed and that the intensity of Gi* value has changed. The lowest range of Gi* value decreased from -4 to -2 to -8 to -6.</p></li>
<li><p>In October 2021, there is an unusual large number of hot and cold spots which signifies 5 grouping of hot spot areas with values higher than average and 7 significant groupings of cold spot areas with values lower than average.</p></li>
<li><p>Hot Spots Analysis: The distribution of the hots pots started from 6 clusters (most of it was around the eastern side of Jakarta) to only 1 cluster in the middle of Jakarta from July 2021 to June 2022.</p></li>
<li><p>Cold Spots Analysis: The distribution of the cold spots appeared randomly and shifted towards the southern area of Jakarta from July 2021 to June 2022.</p></li>
</ol>
</section>
</section>
</section>
<section id="emerging-hot-spot-analysisehsa" class="level1">
<h1>7. Emerging Hot Spot Analysis(EHSA)</h1>
<section id="mann-kendall-test" class="level2">
<h2 class="anchored" data-anchor-id="mann-kendall-test">7.1 Mann-Kendall Test</h2>
<p>We will be conducting the Mann-Kendall Test using the spatio-temporal local Gi* values on 3 Sub-Districts which are:</p>
<ol type="1">
<li><p>KEBON KACANG</p></li>
<li><p>SRENGSENG SAWAH</p></li>
<li><p>HALIM PERDANA KUSUMAH</p></li>
</ol>
<p><strong>What is the Mann-Kendall test?</strong></p>
<p>In a <a href="https://www.statology.org/mann-kendall-trend-test-r/#:~:text=A%20Mann%2DKendall%20Trend%20Test%20is%20used%20to%20determine%20whether,trend%20present%20in%20the%20data.">Mann-Kendall Test</a>, it is used to determine whether or not a trend exists in time series data. It is a non-parametric test, meaning there is no underlying assumption made about the normality of the data.</p>
<p>The hypotheses for the test are as follows:</p>
<ul>
<li><p>H0 (null hypothesis): There is no trend present in the data.</p></li>
<li><p>HA (alternative hypothesis): A trend is present in the data. (This could be a positive or negative trend)</p></li>
</ul>
<p>If the p-value of the test is lower than the significance level of 0.05, then there is statistically significant evidence that a trend is present in the time series data.</p>
<p>This method mainly gives 3 type of <a href="https://acp.copernicus.org/preprints/acp-2019-109/acp-2019-109-AC2-supplement.pdf">information:</a></p>
<ul>
<li><p>Tau: varies between -1 and 1; it is positive when the trend increases and negative when the trend decreases</p></li>
<li><p>The Sen slope: which estimates the overall slope of the time series. This slope corresponds to the median of all the slopes calculated between each pair of points in the series.</p></li>
<li><p>The significance, which represents the threshold for which the hypothesis that there is no trend is accepted. The trend is statistically significant when the p-value is less than 0.05.</p></li>
</ul>
<section id="for-kebon-kacang" class="level3">
<h3 class="anchored" data-anchor-id="for-kebon-kacang">7.1.1 For KEBON KACANG</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>KEBON_KACANG <span class="ot">&lt;-</span> gi_stars <span class="sc">%&gt;%</span> </span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sub_District <span class="sc">==</span> <span class="st">"KEBON KACANG"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sub_District, Date, gi_star)</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>KEBON_KACANG_plot<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> KEBON_KACANG, </span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Date, </span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> gi_star)) <span class="sc">+</span></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a>  plot<span class="ot">&lt;-</span> KEBON_KACANG_plot<span class="sc">+</span><span class="fu">ggtitle</span>(<span class="st">"Local Gi* values of KEBON KACANG"</span>)</span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplotly</span>(plot)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-e8e95e6217de978457e8" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-e8e95e6217de978457e8">{"x":{"data":[{"x":[18809,18840,18871,18901,18932,18962,18993,19024,19053,19083,19113,19144],"y":[-2.9602605895432,-4.22740431837469,-4.88544766754892,-3.73223712610144,-4.62162654295892,-5.13925951393377,-5.67206002130288,-5.46305021545026,-6.09236675298521,-5.72133410944026,-5.4929518500331,-6.21749233661369],"text":["Date: 2021-07-01<br />gi_star: -2.960261","Date: 2021-08-01<br />gi_star: -4.227404","Date: 2021-09-01<br />gi_star: -4.885448","Date: 2021-10-01<br />gi_star: -3.732237","Date: 2021-11-01<br />gi_star: -4.621627","Date: 2021-12-01<br />gi_star: -5.139260","Date: 2022-01-01<br />gi_star: -5.672060","Date: 2022-02-01<br />gi_star: -5.463050","Date: 2022-03-02<br />gi_star: -6.092367","Date: 2022-04-01<br />gi_star: -5.721334","Date: 2022-05-01<br />gi_star: -5.492952","Date: 2022-06-01<br />gi_star: -6.217492"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Local Gi* values of KEBON KACANG","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[18792.25,19160.75],"tickmode":"array","ticktext":["Jul 2021","Oct 2021","Jan 2022","Apr 2022"],"tickvals":[18809,18901,18993,19083],"categoryorder":"array","categoryarray":["Jul 2021","Oct 2021","Jan 2022","Apr 2022"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"y","title":{"text":"Date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-6.38035392396721,-2.79739900218968],"tickmode":"array","ticktext":["-6","-5","-4","-3"],"tickvals":[-6,-5,-4,-3],"categoryorder":"array","categoryarray":["-6","-5","-4","-3"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"x","title":{"text":"gi_star","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(179,179,179,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"500c5caf18c5":{"x":{},"y":{},"type":"scatter"}},"cur_data":"500c5caf18c5","visdat":{"500c5caf18c5":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>KEBON_KACANG <span class="sc">%&gt;%</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mk =</span> <span class="fu">list</span>(</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unclass</span>(</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>      Kendall<span class="sc">::</span><span class="fu">MannKendall</span>(gi_star)))) <span class="sc">%&gt;%</span> </span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">unnest_wider</span>(mk)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 5
     tau       sl     S     D  varS
   &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 -0.758 0.000779   -50  66.0  213.</code></pre>
</div>
</div>
<p>Based on the output above, we can observe that the tau is highly negative suggesting that the trend is decreasing. The sl, which represents the p-value, is smaller than our level of significance, 0.05. Hence, we reject the null hypothesis as there is significant evidence that a decreasing trend is present in the time series data.</p>
</section>
<section id="for-srengseng-sawah" class="level3">
<h3 class="anchored" data-anchor-id="for-srengseng-sawah">7.1.2 For SRENGSENG SAWAH</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>SRENGSENG_SAWAH <span class="ot">&lt;-</span> gi_stars <span class="sc">%&gt;%</span> </span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sub_District <span class="sc">==</span> <span class="st">"SRENGSENG SAWAH"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sub_District, Date, gi_star)</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>SRENGSENG_SAWAH_plot<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> SRENGSENG_SAWAH, </span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Date, </span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> gi_star)) <span class="sc">+</span></span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span>
<span id="cb107-11"><a href="#cb107-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb107-12"><a href="#cb107-12" aria-hidden="true" tabindex="-1"></a>  plot<span class="ot">&lt;-</span> SRENGSENG_SAWAH_plot<span class="sc">+</span><span class="fu">ggtitle</span>(<span class="st">"Local Gi* values of SRENGSENG SAWAH"</span>)</span>
<span id="cb107-13"><a href="#cb107-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-14"><a href="#cb107-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplotly</span>(plot)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-b9886e5f9db6bb0cce95" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-b9886e5f9db6bb0cce95">{"x":{"data":[{"x":[18809,18840,18871,18901,18932,18962,18993,19024,19053,19083,19113,19144],"y":[0.37898666509604,1.16677750793989,1.03811956598347,2.43617152919421,3.75910682391181,3.98914731286194,4.30393244277769,4.93336923463196,4.84039684566441,4.34121005184597,4.29014413063458,4.59263171763013],"text":["Date: 2021-07-01<br />gi_star: 0.3789867","Date: 2021-08-01<br />gi_star: 1.1667775","Date: 2021-09-01<br />gi_star: 1.0381196","Date: 2021-10-01<br />gi_star: 2.4361715","Date: 2021-11-01<br />gi_star: 3.7591068","Date: 2021-12-01<br />gi_star: 3.9891473","Date: 2022-01-01<br />gi_star: 4.3039324","Date: 2022-02-01<br />gi_star: 4.9333692","Date: 2022-03-02<br />gi_star: 4.8403968","Date: 2022-04-01<br />gi_star: 4.3412101","Date: 2022-05-01<br />gi_star: 4.2901441","Date: 2022-06-01<br />gi_star: 4.5926317"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":31.4155251141553},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Local Gi* values of SRENGSENG SAWAH","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[18792.25,19160.75],"tickmode":"array","ticktext":["Jul 2021","Oct 2021","Jan 2022","Apr 2022"],"tickvals":[18809,18901,18993,19083],"categoryorder":"array","categoryarray":["Jul 2021","Oct 2021","Jan 2022","Apr 2022"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"y","title":{"text":"Date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.151267536619244,5.16108836310875],"tickmode":"array","ticktext":["1","2","3","4","5"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["1","2","3","4","5"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"x","title":{"text":"gi_star","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(179,179,179,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"500c17b698e":{"x":{},"y":{},"type":"scatter"}},"cur_data":"500c17b698e","visdat":{"500c17b698e":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>SRENGSENG_SAWAH <span class="sc">%&gt;%</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mk =</span> <span class="fu">list</span>(</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unclass</span>(</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>      Kendall<span class="sc">::</span><span class="fu">MannKendall</span>(gi_star)))) <span class="sc">%&gt;%</span> </span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">unnest_wider</span>(mk)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 5
    tau      sl     S     D  varS
  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 0.697 0.00203    46  66.0  213.</code></pre>
</div>
</div>
<p>Based on the output above, we can observe that the tau is positive suggesting that the trend is increasing. The sl, which represents the p-value, is smaller than our level of significance, 0.05. Hence, we reject the null hypothesis as there is significant evidence that an increasing trend is present in the time series data.</p>
</section>
<section id="for-koja" class="level3">
<h3 class="anchored" data-anchor-id="for-koja">7.1.3 For KOJA</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>KOJA <span class="ot">&lt;-</span> gi_stars <span class="sc">%&gt;%</span> </span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sub_District <span class="sc">==</span> <span class="st">"KOJA"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sub_District, Date, gi_star)</span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>KOJA_plot<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> KOJA, </span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Date, </span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> gi_star)) <span class="sc">+</span></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a>  plot<span class="ot">&lt;-</span> KOJA_plot<span class="sc">+</span><span class="fu">ggtitle</span>(<span class="st">"Local Gi* values of KOJA"</span>)</span>
<span id="cb110-13"><a href="#cb110-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-14"><a href="#cb110-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplotly</span>(plot)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-310408fd0114c2087b27" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-310408fd0114c2087b27">{"x":{"data":[{"x":[18809,18840,18871,18901,18932,18962,18993,19024,19053,19083,19113,19144],"y":[-0.945271248670026,0.251039921553832,-0.950732648072989,-2.06886418839142,-2.17159135220334,-2.27184105064241,-1.56068512051962,-1.4553798110785,-1.16871457544379,-1.43400252395099,-1.10139290499805,-1.24918481713528],"text":["Date: 2021-07-01<br />gi_star: -0.9452712","Date: 2021-08-01<br />gi_star:  0.2510399","Date: 2021-09-01<br />gi_star: -0.9507326","Date: 2021-10-01<br />gi_star: -2.0688642","Date: 2021-11-01<br />gi_star: -2.1715914","Date: 2021-12-01<br />gi_star: -2.2718411","Date: 2022-01-01<br />gi_star: -1.5606851","Date: 2022-02-01<br />gi_star: -1.4553798","Date: 2022-03-02<br />gi_star: -1.1687146","Date: 2022-04-01<br />gi_star: -1.4340025","Date: 2022-05-01<br />gi_star: -1.1013929","Date: 2022-06-01<br />gi_star: -1.2491848"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":48.9497716894977},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Local Gi* values of KOJA","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[18792.25,19160.75],"tickmode":"array","ticktext":["Jul 2021","Oct 2021","Jan 2022","Apr 2022"],"tickvals":[18809,18901,18993,19083],"categoryorder":"array","categoryarray":["Jul 2021","Oct 2021","Jan 2022","Apr 2022"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"y","title":{"text":"Date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2.39798509925222,0.377183970163644],"tickmode":"array","ticktext":["-2.0","-1.5","-1.0","-0.5","0.0"],"tickvals":[-2,-1.5,-1,-0.5,0],"categoryorder":"array","categoryarray":["-2.0","-1.5","-1.0","-0.5","0.0"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"x","title":{"text":"gi_star","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(179,179,179,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"500c769e5823":{"x":{},"y":{},"type":"scatter"}},"cur_data":"500c769e5823","visdat":{"500c769e5823":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>KOJA <span class="sc">%&gt;%</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mk =</span> <span class="fu">list</span>(</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unclass</span>(</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>      Kendall<span class="sc">::</span><span class="fu">MannKendall</span>(gi_star)))) <span class="sc">%&gt;%</span> </span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">unnest_wider</span>(mk)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 5
      tau    sl     S     D  varS
    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 -0.0606 0.837    -4  66.0  213.</code></pre>
</div>
</div>
<p>Based on the output above, we can observe that the tau is slightly positive, suggesting that the trend is increasing. The sl, which represents the p-value, is larger than our level of significance, 0.05. Hence, we do reject the null hypothesis as there is insufficient evidence that a trend is present in the time series data.</p>
</section>
</section>
</section>
<section id="performing-emerging-hotspot-analysis" class="level1">
<h1>7.2 Performing Emerging Hotspot Analysis</h1>
<p>Before we perform our emerging hotspot anlaysis, we will be using the new columns created earlier on to manually calculate the local Gi* for each location. We can do this by grouping by Date and using <a href="https://sfdep.josiahparry.com/reference/local_gstar.html">local_gstar_perm()</a> of sfdep package. After which, we use <a href="https://tidyr.tidyverse.org/reference/nest.html">unnest()</a> to unnest gi_star column of the newly created gi_start data.frame.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>ehsa <span class="ot">&lt;-</span> gi_stars <span class="sc">%&gt;%</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Sub_District) <span class="sc">%&gt;%</span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mk =</span> <span class="fu">list</span>(</span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unclass</span>(</span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>      Kendall<span class="sc">::</span><span class="fu">MannKendall</span>(gi_star)))) <span class="sc">%&gt;%</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">unnest_wider</span>(mk)</span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>emerging <span class="ot">&lt;-</span> ehsa <span class="sc">%&gt;%</span> </span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(sl, <span class="fu">abs</span>(tau)) <span class="sc">%&gt;%</span> </span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We will then perform EHSA analysis by using <a href="https://pro.arcgis.com/en/pro-app/latest/tool-reference/space-time-pattern-mining/learnmoreemerging.htm">emerging_hotspot_analysis()</a> of sfdep package. It takes a spacetime object x (i.e.&nbsp;vr_st), and the quoted name of the variable of interest (i.e.&nbsp;Vaccination_Rate) for .var argument. The k argument is used to specify the number of time lags which is set to 1 by default. Lastly, nsim map numbers of simulation to be performed(we will be performing 100).</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>ehsa <span class="ot">&lt;-</span> <span class="fu">emerging_hotspot_analysis</span>(</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> vr_st, </span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">.var =</span> <span class="st">"Vaccination_Rate"</span>, </span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">k =</span> <span class="dv">1</span>, </span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">nsim =</span> <span class="dv">99</span></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="visualising-the-distribution-of-ehsa-classes" class="level3">
<h3 class="anchored" data-anchor-id="visualising-the-distribution-of-ehsa-classes">7.2.1 Visualising the distribution of EHSA classes</h3>
<p>In the code chunk below, <a href="https://ggplot2.tidyverse.org/">ggplot2</a> functions is used to reveal the distribution of EHSA classes as a bar chart.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ehsa,</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> classification)) <span class="sc">+</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Assgn2_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Below is a table explaining what each class means.</p>
<table class="table">
<colgroup>
<col style="width: 30%">
<col style="width: 69%">
</colgroup>
<thead>
<tr class="header">
<th>EHSA Class Name</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Oscillating coldspot</td>
<td>A statistically significant cold spot for the final time-step interval that has a history of also being a statistically significant hot spot during a prior time step. Less than 90 percent of the time-step intervals have been statistically significant cold spots.</td>
</tr>
<tr class="even">
<td>Oscillating hotspot</td>
<td>A statistically significant hot spot for the final time-step interval that has a history of also being a statistically significant cold spot during a prior time step. Less than 90 percent of the time-step intervals have been statistically significant hot spots.</td>
</tr>
<tr class="odd">
<td>Sporadic cold spot</td>
<td>A statistically significant cold spot for the final time-step interval with a history of also being an on-again and off-again cold spot. Less than 90 percent of the time-step intervals have been statistically significant cold spots and none of the time-step intervals have been statistically significant hot spots.</td>
</tr>
</tbody>
</table>
<p>source: <a href="https://pro.arcgis.com/en/pro-app/latest/tool-reference/space-time-pattern-mining/learnmoreemerging.htm#:~:text=Oscillating%20Hot%20Spot,been%20statistically%20significant%20hot%20spots.">esri</a></p>
</section>
<section id="visualising-ehsa" class="level3">
<h3 class="anchored" data-anchor-id="visualising-ehsa">7.2.2 Visualising EHSA</h3>
<p>Before we can visualise EHSA, we need to join both copy_cjkt_df and ehsa together by using the code chunk below.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>cjkt_ehsa <span class="ot">&lt;-</span> copy_cjkt_df <span class="sc">%&gt;%</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(ehsa,</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Sub_District"</span> <span class="ot">=</span> <span class="st">"location"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The code chunk below plots a categorical choropleth map for the significant(p-value&lt;0.05) locations using tmap functions.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>ehsa_sig <span class="ot">&lt;-</span> cjkt_ehsa  <span class="sc">%&gt;%</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(p_value <span class="sc">&lt;</span> <span class="fl">0.05</span>)</span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(cjkt_ehsa) <span class="sc">+</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(ehsa_sig) <span class="sc">+</span></span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"classification"</span>) <span class="sc">+</span> </span>
<span id="cb117-10"><a href="#cb117-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span> </span>
<span id="cb117-11"><a href="#cb117-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb117-12"><a href="#cb117-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title=</span><span class="st">"Significant Classifications of EHSA"</span>,</span>
<span id="cb117-13"><a href="#cb117-13" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title.size =</span> <span class="fl">0.7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Assgn2_files/figure-html/unnamed-chunk-68-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="statistical-conclusion-1" class="level3">
<h3 class="anchored" data-anchor-id="statistical-conclusion-1">7.2.3 Statistical Conclusion</h3>
<p>Based on the graph visualising <strong>the distribution of EHSA classes</strong>, we can observe:</p>
<ol type="1">
<li><p>Oscillating hot spots has the highest numbers of sub-districts in Jakarta.</p></li>
<li><p>As there is more oscillating hot spots than oscillating cold spots, it suggests that the data has an overall positive trend. This can be explained by the increasing vaccination rates across our study time period.</p></li>
</ol>
<p>Based on the <strong>Significant Classifications of EHSA map</strong>, we can observe that</p>
<ol type="1">
<li><p>Majority of the Oscillating hot spots tend to be spread around the central area of Jakarta.</p></li>
<li><p>Sporadic cold spots are more clustered around the central area of Jakarta.</p></li>
<li><p>Oscillating cold spots are quite spread out and tend to represent only 1 sub district</p></li>
<li><p>There seem to only be 1 sub-district in the central area where no patterns are detected.</p></li>
</ol>
</section>
</section>
<section id="acknowledgment" class="level1">
<h1>8. Acknowledgment</h1>
<p>To conclude, I would like to thank Prof.&nbsp;Kam for our IS415 Geospatial Analytics and Applications course materials &amp; resources. I would also like to thank my seniors, <a href="https://rpubs.com/xiaorongw/IS415_Take-home_Ex02">Xiao Rong Wong</a> and <a href="https://is415-msty.netlify.app/posts/2021-09-10-take-home-exercise-1/#joining-eda">Megan Sim</a> as I have referenced their codes.</p>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb118" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Take-home Assignment 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta"</span></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner:</span><span class="co"> true</span></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "20 february 2023"</span></span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a><span class="an">date-modified:</span><span class="co"> last-modified</span></span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Rhonda Ho Kah Yee"</span></span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb118-12"><a href="#cb118-12" aria-hidden="true" tabindex="-1"></a><span class="co">      code-fold: true</span></span>
<span id="cb118-13"><a href="#cb118-13" aria-hidden="true" tabindex="-1"></a><span class="co">      code-tools: true</span></span>
<span id="cb118-14"><a href="#cb118-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-15"><a href="#cb118-15" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span><span class="co"> </span></span>
<span id="cb118-16"><a href="#cb118-16" aria-hidden="true" tabindex="-1"></a><span class="co">  message: false</span></span>
<span id="cb118-17"><a href="#cb118-17" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb118-18"><a href="#cb118-18" aria-hidden="true" tabindex="-1"></a><span class="co">  #eval: false</span></span>
<span id="cb118-19"><a href="#cb118-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-20"><a href="#cb118-20" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb118-21"><a href="#cb118-21" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb118-22"><a href="#cb118-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-23"><a href="#cb118-23" aria-hidden="true" tabindex="-1"></a><span class="fu"># 1. Overview</span></span>
<span id="cb118-24"><a href="#cb118-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-25"><a href="#cb118-25" aria-hidden="true" tabindex="-1"></a>Hello! This is Rhonda Ho's take-home Assignment 2 for IS415 module.</span>
<span id="cb118-26"><a href="#cb118-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-27"><a href="#cb118-27" aria-hidden="true" tabindex="-1"></a>To view/hide all the code at once, please click on the "<span class="sc">\&lt;</span>/<span class="sc">\&gt;</span> code" tab beside the title of this html document and select the option to view/hide the code.</span>
<span id="cb118-28"><a href="#cb118-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-29"><a href="#cb118-29" aria-hidden="true" tabindex="-1"></a>The full details of this assignment can be found <span class="co">[</span><span class="ot">here</span><span class="co">](https://is415-ay2022-23t2.netlify.app/th_ex2.html)</span>.</span>
<span id="cb118-30"><a href="#cb118-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-31"><a href="#cb118-31" aria-hidden="true" tabindex="-1"></a><span class="fu">## 1.1 Objectives</span></span>
<span id="cb118-32"><a href="#cb118-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-33"><a href="#cb118-33" aria-hidden="true" tabindex="-1"></a>Exploratory Spatial Data Analysis (ESDA) hold tremendous potential to address complex problems facing society. In this study, you are tasked to apply appropriate Local Indicators of Spatial Association (LISA) and Emerging Hot Spot Analysis (EHSA) to undercover the spatio-temporal trends of COVID-19 vaccination in DKI Jakarta.</span>
<span id="cb118-34"><a href="#cb118-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-35"><a href="#cb118-35" aria-hidden="true" tabindex="-1"></a><span class="fu">## 1.2 The Data</span></span>
<span id="cb118-36"><a href="#cb118-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-37"><a href="#cb118-37" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Aspatial data**</span>
<span id="cb118-38"><a href="#cb118-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-39"><a href="#cb118-39" aria-hidden="true" tabindex="-1"></a>For the purpose of this assignment, data from <span class="co">[</span><span class="ot">Riwayat File Vaksinasi DKI Jakarta</span><span class="co">](https://riwayat-file-vaksinasi-dki-jakarta-jakartagis.hub.arcgis.com/)</span> will be used. Daily vaccination data are provided. We are only required to download either the first day of the month or last day of the month of the study period.</span>
<span id="cb118-40"><a href="#cb118-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-41"><a href="#cb118-41" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Geospatial data**</span>
<span id="cb118-42"><a href="#cb118-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-43"><a href="#cb118-43" aria-hidden="true" tabindex="-1"></a>For the purpose of this study, DKI Jakarta administration boundary 2019 will be used. The data set can be downloaded at Indonesia Geospatial portal, specifically at <span class="co">[</span><span class="ot">this page</span><span class="co">](https://www.indonesia-geospasial.com/2020/04/download-shapefile-shp-batas-desa.html)</span>.</span>
<span id="cb118-44"><a href="#cb118-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-45"><a href="#cb118-45" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb118-46"><a href="#cb118-46" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The national Projected Coordinates Systems of Indonesia is DGN95 / Indonesia TM-3 zone 54.1.</span>
<span id="cb118-47"><a href="#cb118-47" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Exclude all the outer islands from the DKI Jakarta sf data frame, and</span>
<span id="cb118-48"><a href="#cb118-48" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Retain the first nine fields in the DKI Jakarta sf data frame. The ninth field JUMLAH_PEN = Total Population.</span>
<span id="cb118-49"><a href="#cb118-49" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb118-50"><a href="#cb118-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-51"><a href="#cb118-51" aria-hidden="true" tabindex="-1"></a><span class="fu">## 1.3 Tasks</span></span>
<span id="cb118-52"><a href="#cb118-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-53"><a href="#cb118-53" aria-hidden="true" tabindex="-1"></a>The specific tasks of this take-home exercise are as follows:</span>
<span id="cb118-54"><a href="#cb118-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-55"><a href="#cb118-55" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Choropleth Mapping and Analysis**</span>
<span id="cb118-56"><a href="#cb118-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-57"><a href="#cb118-57" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Compute the monthly vaccination rate from July 2021 to June 2022 at sub-district (also known as kelurahan in Bahasa Indonesia) level,</span>
<span id="cb118-58"><a href="#cb118-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-59"><a href="#cb118-59" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Prepare the monthly vaccination rate maps by using appropriate tmap functions,</span>
<span id="cb118-60"><a href="#cb118-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-61"><a href="#cb118-61" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Describe the spatial patterns revealed by the choropleth maps (not more than 200 words).</span>
<span id="cb118-62"><a href="#cb118-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-63"><a href="#cb118-63" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Local Gi\* Analysis**</span>
<span id="cb118-64"><a href="#cb118-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-65"><a href="#cb118-65" aria-hidden="true" tabindex="-1"></a>    With reference to the vaccination rate maps prepared in ESDA:</span>
<span id="cb118-66"><a href="#cb118-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-67"><a href="#cb118-67" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Compute local Gi<span class="sc">\*</span> values of the monthly vaccination rate,</span>
<span id="cb118-68"><a href="#cb118-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-69"><a href="#cb118-69" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Display the Gi<span class="sc">\*</span> maps of the monthly vaccination rate. The maps should only display the significant (i.e.&nbsp;p-value <span class="sc">\&lt;</span> 0.05)</span>
<span id="cb118-70"><a href="#cb118-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-71"><a href="#cb118-71" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>With reference to the analysis results, draw statistical conclusions (not more than 250 words).</span>
<span id="cb118-72"><a href="#cb118-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-73"><a href="#cb118-73" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Emerging Hot Spot Analysis(EHSA)**</span>
<span id="cb118-74"><a href="#cb118-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-75"><a href="#cb118-75" aria-hidden="true" tabindex="-1"></a>    With reference to the local Gi<span class="sc">\*</span> values of the vaccination rate maps prepared in the previous section:</span>
<span id="cb118-76"><a href="#cb118-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-77"><a href="#cb118-77" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Perform Mann-Kendall Test by using the spatio-temporal local Gi<span class="sc">\*</span> values,</span>
<span id="cb118-78"><a href="#cb118-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-79"><a href="#cb118-79" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Select three sub-districts and describe the temporal trends revealed (not more than 250 words), and</span>
<span id="cb118-80"><a href="#cb118-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-81"><a href="#cb118-81" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Prepared a EHSA map of the Gi<span class="sc">\*</span> values of vaccination rate. The maps should only display the significant (i.e.&nbsp;p-value <span class="sc">\&lt;</span> 0.05).\</span>
<span id="cb118-82"><a href="#cb118-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-83"><a href="#cb118-83" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>With reference to the EHSA map prepared, describe the spatial patterns revealed. (not more than 250 words).</span>
<span id="cb118-84"><a href="#cb118-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-85"><a href="#cb118-85" aria-hidden="true" tabindex="-1"></a><span class="fu"># 2. Getting Started</span></span>
<span id="cb118-86"><a href="#cb118-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-87"><a href="#cb118-87" aria-hidden="true" tabindex="-1"></a>The following packages will be used:</span>
<span id="cb118-88"><a href="#cb118-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-89"><a href="#cb118-89" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">sf</span><span class="co">](https://r-spatial.github.io/sf/)</span>: to import, manage, and process geospatial data</span>
<span id="cb118-90"><a href="#cb118-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-91"><a href="#cb118-91" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">tmap</span><span class="co">](https://cran.r-project.org/web/packages/tmap/)</span>: provides functions for plotting cartographic quality static point patterns maps or interactive maps</span>
<span id="cb118-92"><a href="#cb118-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-93"><a href="#cb118-93" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">plotly</span><span class="co">](https://cran.r-project.org/package=plotly)</span>: for creating interactive web-based graphs</span>
<span id="cb118-94"><a href="#cb118-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-95"><a href="#cb118-95" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">sfdep</span><span class="co">](https://cran.r-project.org/web/packages/sfdep/)</span>: for spatial dependence of simple features</span>
<span id="cb118-96"><a href="#cb118-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-97"><a href="#cb118-97" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">readxl</span><span class="co">](https://readxl.tidyverse.org/reference/read_excel.html)</span>: to import Excel worksheets(.xlsx)</span>
<span id="cb118-98"><a href="#cb118-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-99"><a href="#cb118-99" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Kendall</span><span class="co">](https://cran.r-project.org/package=Kendall)</span>: for Mann-Kendall Test</span>
<span id="cb118-100"><a href="#cb118-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-101"><a href="#cb118-101" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">tidyverse</span><span class="co">](https://www.tidyverse.org/)</span>: a collection of packages for data science tasks</span>
<span id="cb118-102"><a href="#cb118-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-105"><a href="#cb118-105" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-106"><a href="#cb118-106" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(sf, tmap, plotly, sfdep, readxl, kendall, tidyverse)</span>
<span id="cb118-107"><a href="#cb118-107" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-108"><a href="#cb118-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-109"><a href="#cb118-109" aria-hidden="true" tabindex="-1"></a><span class="fu"># 3. Data Wrangling</span></span>
<span id="cb118-110"><a href="#cb118-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-111"><a href="#cb118-111" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3.1 Geospatial Data</span></span>
<span id="cb118-112"><a href="#cb118-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-113"><a href="#cb118-113" aria-hidden="true" tabindex="-1"></a><span class="fu">### 3.1.1 Import shapefile into r environment</span></span>
<span id="cb118-114"><a href="#cb118-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-117"><a href="#cb118-117" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-118"><a href="#cb118-118" aria-hidden="true" tabindex="-1"></a>jkt2019 <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="at">dsn =</span> <span class="st">"data/geospatial"</span>, </span>
<span id="cb118-119"><a href="#cb118-119" aria-hidden="true" tabindex="-1"></a>                 <span class="at">layer =</span> <span class="st">"BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA"</span>) </span>
<span id="cb118-120"><a href="#cb118-120" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-121"><a href="#cb118-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-122"><a href="#cb118-122" aria-hidden="true" tabindex="-1"></a>From the output, we can observe that:</span>
<span id="cb118-123"><a href="#cb118-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-124"><a href="#cb118-124" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Geometry type is MULTIPOLYGON</span>
<span id="cb118-125"><a href="#cb118-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-126"><a href="#cb118-126" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>CRS information is <span class="co">[</span><span class="ot">WGS 84</span><span class="co">](https://epsg.io/4326)</span> instead of the CRS for Indonesia, Jakarta.</span>
<span id="cb118-127"><a href="#cb118-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-128"><a href="#cb118-128" aria-hidden="true" tabindex="-1"></a><span class="fu">### 3.1.2 Identifying Relevant Columns</span></span>
<span id="cb118-129"><a href="#cb118-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-132"><a href="#cb118-132" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-133"><a href="#cb118-133" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(jkt2019)</span>
<span id="cb118-134"><a href="#cb118-134" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-135"><a href="#cb118-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-136"><a href="#cb118-136" aria-hidden="true" tabindex="-1"></a>Having a glimpse at our data, some of relevant column(s) that we need for our task is:</span>
<span id="cb118-137"><a href="#cb118-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-138"><a href="#cb118-138" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`KAB_KOTA`</span> : represents the cities in Jakarta</span>
<span id="cb118-139"><a href="#cb118-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-140"><a href="#cb118-140" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`KECAMATAN`</span> : represents the district in Jakarta</span>
<span id="cb118-141"><a href="#cb118-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-142"><a href="#cb118-142" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`DESA_KELUR`</span> : represents the sub-districts in Jakarta.</span>
<span id="cb118-143"><a href="#cb118-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-144"><a href="#cb118-144" aria-hidden="true" tabindex="-1"></a><span class="fu">### 3.1.3 Data Pre-Processing</span></span>
<span id="cb118-145"><a href="#cb118-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-146"><a href="#cb118-146" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 3.1.3.1 Check for Invalid Geometries</span></span>
<span id="cb118-147"><a href="#cb118-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-150"><a href="#cb118-150" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-151"><a href="#cb118-151" aria-hidden="true" tabindex="-1"></a><span class="co">#check for invalid geometries</span></span>
<span id="cb118-152"><a href="#cb118-152" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">which</span>(<span class="fu">st_is_valid</span>(jkt2019) <span class="sc">==</span> <span class="cn">FALSE</span>))</span>
<span id="cb118-153"><a href="#cb118-153" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-154"><a href="#cb118-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-155"><a href="#cb118-155" aria-hidden="true" tabindex="-1"></a>There is no invalid geometries!</span>
<span id="cb118-156"><a href="#cb118-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-157"><a href="#cb118-157" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 3.1.3.2 Check for Missing Values</span></span>
<span id="cb118-158"><a href="#cb118-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-161"><a href="#cb118-161" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-162"><a href="#cb118-162" aria-hidden="true" tabindex="-1"></a><span class="co">#check for missing values</span></span>
<span id="cb118-163"><a href="#cb118-163" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(jkt2019))</span>
<span id="cb118-164"><a href="#cb118-164" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-165"><a href="#cb118-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-166"><a href="#cb118-166" aria-hidden="true" tabindex="-1"></a>Based on the output, we have discovered that there are 14 missing values in our dataset which may affect our analysis. Thus, I removed all missing values in the sub-districts(a part of our main study focus), using the code chunk below.</span>
<span id="cb118-167"><a href="#cb118-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-170"><a href="#cb118-170" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-171"><a href="#cb118-171" aria-hidden="true" tabindex="-1"></a>jkt2019 <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(jkt2019,<span class="fu">c</span>(<span class="st">"DESA_KELUR"</span>))</span>
<span id="cb118-172"><a href="#cb118-172" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-173"><a href="#cb118-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-174"><a href="#cb118-174" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 3.1.3.3 Transformation of Coordinates Information</span></span>
<span id="cb118-175"><a href="#cb118-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-176"><a href="#cb118-176" aria-hidden="true" tabindex="-1"></a>Earlier on, we discovered that the assigned coordinates system of our data is WGS 84 which is not appropriate for an Indonesian-specific geospatial dataset. Another way of checking it is using the function, <span class="co">[</span><span class="ot">st_crs()</span><span class="co">](https://www.rdocumentation.org/packages/sf/versions/1.0-9/topics/st_crs)</span>.</span>
<span id="cb118-177"><a href="#cb118-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-180"><a href="#cb118-180" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-181"><a href="#cb118-181" aria-hidden="true" tabindex="-1"></a><span class="co">#check whether need to transform</span></span>
<span id="cb118-182"><a href="#cb118-182" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(jkt2019)</span>
<span id="cb118-183"><a href="#cb118-183" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-184"><a href="#cb118-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-185"><a href="#cb118-185" aria-hidden="true" tabindex="-1"></a>As this is an Indonesian-specific geospatial dataset, I will be using <span class="co">[</span><span class="ot">EPSG:23845.</span><span class="co">](https://epsg.io/23845)</span></span>
<span id="cb118-186"><a href="#cb118-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-189"><a href="#cb118-189" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-190"><a href="#cb118-190" aria-hidden="true" tabindex="-1"></a><span class="co"># transforms the CRS to DGN95, ESPG code 23845</span></span>
<span id="cb118-191"><a href="#cb118-191" aria-hidden="true" tabindex="-1"></a>jkt2019 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(jkt2019, <span class="dv">23845</span>)</span>
<span id="cb118-192"><a href="#cb118-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-193"><a href="#cb118-193" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(jkt2019)</span>
<span id="cb118-194"><a href="#cb118-194" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-195"><a href="#cb118-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-196"><a href="#cb118-196" aria-hidden="true" tabindex="-1"></a>We have successfully managed to transform our dataset to the appropriate coordinates system!</span>
<span id="cb118-197"><a href="#cb118-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-198"><a href="#cb118-198" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 3.1.3.4 Removal of Outer Islands</span></span>
<span id="cb118-199"><a href="#cb118-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-200"><a href="#cb118-200" aria-hidden="true" tabindex="-1"></a>To start off, let visualise our data!</span>
<span id="cb118-201"><a href="#cb118-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-204"><a href="#cb118-204" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-205"><a href="#cb118-205" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(jkt2019))</span>
<span id="cb118-206"><a href="#cb118-206" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-207"><a href="#cb118-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-208"><a href="#cb118-208" aria-hidden="true" tabindex="-1"></a>The visualisation above shows that our data consist of outer islands beyond Jakarta. As this is not important for our analysis, we should remove it.</span>
<span id="cb118-209"><a href="#cb118-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-210"><a href="#cb118-210" aria-hidden="true" tabindex="-1"></a>Previously, we have identified 3 important attributes which represents the divisions of Jakarta. They are <span class="in">`KAB_KOTA`</span> (City), <span class="in">`KECAMATAN`</span> (District) and <span class="in">`DESA_KELUR`</span> (Village). Removing the outer islands by the City would help us to remove all the districts and villages within it, so I proceeded to check the unique values of it.</span>
<span id="cb118-211"><a href="#cb118-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-214"><a href="#cb118-214" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-215"><a href="#cb118-215" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(jkt2019<span class="sc">$</span><span class="st">"KAB_KOTA"</span>)</span>
<span id="cb118-216"><a href="#cb118-216" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-217"><a href="#cb118-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-218"><a href="#cb118-218" aria-hidden="true" tabindex="-1"></a>From this, we can observe that all the values has "JAKARTA" in it except "KEPULAUAN SERIBU"(Thousand Island). The code chunk below visualises the different cities in Jakarta.</span>
<span id="cb118-219"><a href="#cb118-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-222"><a href="#cb118-222" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-223"><a href="#cb118-223" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(jkt2019) <span class="sc">+</span> </span>
<span id="cb118-224"><a href="#cb118-224" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">"KAB_KOTA"</span>)</span>
<span id="cb118-225"><a href="#cb118-225" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-226"><a href="#cb118-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-227"><a href="#cb118-227" aria-hidden="true" tabindex="-1"></a>Next, we will need to remove the outer islands by using the <span class="co">[</span><span class="ot">filter()</span><span class="co">](https://www.educative.io/answers/what-is-the-filter-method-in-r)</span> function to filter out the outer islands.</span>
<span id="cb118-228"><a href="#cb118-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-231"><a href="#cb118-231" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-232"><a href="#cb118-232" aria-hidden="true" tabindex="-1"></a><span class="co"># accepts only if the value of KAB_KOTA is NOT KEPULAUAN SERIBU</span></span>
<span id="cb118-233"><a href="#cb118-233" aria-hidden="true" tabindex="-1"></a>jkt2019 <span class="ot">&lt;-</span> <span class="fu">filter</span>(jkt2019, KAB_KOTA <span class="sc">!=</span> <span class="st">"KEPULAUAN SERIBU"</span>)</span>
<span id="cb118-234"><a href="#cb118-234" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-235"><a href="#cb118-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-236"><a href="#cb118-236" aria-hidden="true" tabindex="-1"></a>For this assignment, we are required to only retain the first 9 fields.</span>
<span id="cb118-237"><a href="#cb118-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-240"><a href="#cb118-240" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-241"><a href="#cb118-241" aria-hidden="true" tabindex="-1"></a><span class="co"># filters out other fields by accepting only the first 9 fields</span></span>
<span id="cb118-242"><a href="#cb118-242" aria-hidden="true" tabindex="-1"></a>jkt2019 <span class="ot">&lt;-</span> jkt2019[, <span class="dv">0</span><span class="sc">:</span><span class="dv">9</span>]</span>
<span id="cb118-243"><a href="#cb118-243" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-244"><a href="#cb118-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-245"><a href="#cb118-245" aria-hidden="true" tabindex="-1"></a>For easier comprehension of our data, I have decided to translate the column headers to English.</span>
<span id="cb118-246"><a href="#cb118-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-249"><a href="#cb118-249" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-250"><a href="#cb118-250" aria-hidden="true" tabindex="-1"></a>jkt2019 <span class="ot">&lt;-</span> jkt2019 <span class="sc">%&gt;%</span> </span>
<span id="cb118-251"><a href="#cb118-251" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb118-252"><a href="#cb118-252" aria-hidden="true" tabindex="-1"></a>    <span class="at">Object_ID=</span>OBJECT_ID,</span>
<span id="cb118-253"><a href="#cb118-253" aria-hidden="true" tabindex="-1"></a>    <span class="at">Province=</span>PROVINSI, </span>
<span id="cb118-254"><a href="#cb118-254" aria-hidden="true" tabindex="-1"></a>    <span class="at">City=</span>KAB_KOTA, </span>
<span id="cb118-255"><a href="#cb118-255" aria-hidden="true" tabindex="-1"></a>    <span class="at">District=</span>KECAMATAN, </span>
<span id="cb118-256"><a href="#cb118-256" aria-hidden="true" tabindex="-1"></a>    <span class="at">Village_Code=</span>KODE_DESA, </span>
<span id="cb118-257"><a href="#cb118-257" aria-hidden="true" tabindex="-1"></a>    <span class="at">Village=</span>DESA, </span>
<span id="cb118-258"><a href="#cb118-258" aria-hidden="true" tabindex="-1"></a>    <span class="at">Sub_District=</span>DESA_KELUR,</span>
<span id="cb118-259"><a href="#cb118-259" aria-hidden="true" tabindex="-1"></a>    <span class="at">Code=</span>KODE, </span>
<span id="cb118-260"><a href="#cb118-260" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Population=</span>JUMLAH_PEN</span>
<span id="cb118-261"><a href="#cb118-261" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb118-262"><a href="#cb118-262" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-263"><a href="#cb118-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-264"><a href="#cb118-264" aria-hidden="true" tabindex="-1"></a>With that, we are done for our geospatial data!</span>
<span id="cb118-265"><a href="#cb118-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-266"><a href="#cb118-266" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3.2 Aspatial Data</span></span>
<span id="cb118-267"><a href="#cb118-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-268"><a href="#cb118-268" aria-hidden="true" tabindex="-1"></a><span class="fu">### 3.2.1 Observations of Data Website</span></span>
<span id="cb118-269"><a href="#cb118-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-270"><a href="#cb118-270" aria-hidden="true" tabindex="-1"></a>Examining DKI Jakarta Vaccination File History <span class="co">[</span><span class="ot">website</span><span class="co">](https://riwayat-file-vaksinasi-dki-jakarta-jakartagis.hub.arcgis.com/)</span>, some of my observations were:</span>
<span id="cb118-271"><a href="#cb118-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-272"><a href="#cb118-272" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Entire page is in Indonesian</span>
<span id="cb118-273"><a href="#cb118-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-274"><a href="#cb118-274" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>To translate to English, simply right click anywhere on the webpage and click "Translate to English" button</span>
<span id="cb118-275"><a href="#cb118-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-276"><a href="#cb118-276" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>There were two columns for DKI Jakarta Vaccination File History, one for "*Vaccination Data Based on Village and District*", another for "*RT-Based Vaccination Data*"</span>
<span id="cb118-277"><a href="#cb118-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-278"><a href="#cb118-278" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>We will be focusing on the "V*accination Data Based on Village and District*"column as our task require us to analyse on a sub-district level.</span>
<span id="cb118-279"><a href="#cb118-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-280"><a href="#cb118-280" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Many instances of missing data!</span>
<span id="cb118-281"><a href="#cb118-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-282"><a href="#cb118-282" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>E.g 1) The hyperlink to March 1 2022 will direct you to March 2 2022 data and March 1 2022 cannot be found</span>
<span id="cb118-283"><a href="#cb118-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-284"><a href="#cb118-284" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>E.g 2) Certain months such as July 2021, August 2021, February 2022 were missing the record of the date written in the table and its respective data</span>
<span id="cb118-285"><a href="#cb118-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-286"><a href="#cb118-286" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>A few examples of missing records are 19 July 2021, 28 August 2022, 11 September, 28 February 2022, 17 March 2022</span>
<span id="cb118-287"><a href="#cb118-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-288"><a href="#cb118-288" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>Upon further research and some of my assumptions, missing data can be due to:</span>
<span id="cb118-289"><a href="#cb118-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-290"><a href="#cb118-290" aria-hidden="true" tabindex="-1"></a><span class="ss">            -   </span>A glitch in the system, which prevents the data from being uploaded</span>
<span id="cb118-291"><a href="#cb118-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-292"><a href="#cb118-292" aria-hidden="true" tabindex="-1"></a><span class="ss">            -   </span>An update of the system which may prevent records from being uploaded on that day</span>
<span id="cb118-293"><a href="#cb118-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-294"><a href="#cb118-294" aria-hidden="true" tabindex="-1"></a>Under our task we are required to compute monthly vaccination rate from <span class="co">[</span><span class="ot">July 2021 to June 2022</span><span class="co">]</span>{.underline} and we are only required to download the <span class="co">[</span><span class="ot">first or last day of the month of study period</span><span class="co">]</span>{.underline}.</span>
<span id="cb118-295"><a href="#cb118-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-296"><a href="#cb118-296" aria-hidden="true" tabindex="-1"></a>For this assignment, I will be using data of the <span class="co">[</span><span class="ot">first day of each month</span><span class="co">]</span>{.underline} of the study period with the exception of March 2021, I will be using March 2 instead of March 1 as March 1's data is missing.</span>
<span id="cb118-297"><a href="#cb118-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-298"><a href="#cb118-298" aria-hidden="true" tabindex="-1"></a><span class="fu">### 3.2.2 Importing Aspatial Data</span></span>
<span id="cb118-299"><a href="#cb118-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-300"><a href="#cb118-300" aria-hidden="true" tabindex="-1"></a>In our 'data/aspatial' folder, we have downloaded multiple .xlsx files ranging from 1 July 2021 to 1 June 2022. But before we compile it together, we need to understand each dataset and check for any discrepancies.</span>
<span id="cb118-301"><a href="#cb118-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-302"><a href="#cb118-302" aria-hidden="true" tabindex="-1"></a>The purpose of the code chunk below is to reach each excel file under the folder 'data/aspatial' , create its dataframe(df) and assign it to a variable name which is in the format of "month_year". E.g April_2022 . The following functions are used:</span>
<span id="cb118-303"><a href="#cb118-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-304"><a href="#cb118-304" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">list.files():</span><span class="co">](https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/list.files)</span> creates a list of the files in a directory/folder</span>
<span id="cb118-305"><a href="#cb118-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-306"><a href="#cb118-306" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">substr():</span><span class="co">](https://www.digitalocean.com/community/tutorials/substring-function-in-r)</span> extract the characters present in the data</span>
<span id="cb118-307"><a href="#cb118-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-308"><a href="#cb118-308" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">str_trim():</span><span class="co">](https://stringr.tidyverse.org/reference/str_trim.html)</span> remove whitespace</span>
<span id="cb118-309"><a href="#cb118-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-310"><a href="#cb118-310" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">paste():</span><span class="co">](https://www.digitalocean.com/community/tutorials/paste-in-r)</span> concatenate strings and values into a single element</span>
<span id="cb118-311"><a href="#cb118-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-312"><a href="#cb118-312" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">read_excel()</span><span class="co">]</span>(https://readxl.tidyverse.org/reference/read_excel.html#:~:text=read_excel()%20calls%20excel_format(),file%20itself%2C%20in%20that%20order.): to read the data in xlsx format</span>
<span id="cb118-313"><a href="#cb118-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-314"><a href="#cb118-314" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">nchar():</span><span class="co">]</span>(https://www.geeksforgeeks.org/finding-the-length-of-string-in-r-programming-nchar-method/#:~:text=nchar()%20method%20in%20R,character%20in%20a%20string%20object.&amp;text=Where%3A%20String%20is%20object.,the%20length%20of%20a%20string.) gets the length of string</span>
<span id="cb118-315"><a href="#cb118-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-318"><a href="#cb118-318" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-319"><a href="#cb118-319" aria-hidden="true" tabindex="-1"></a><span class="co">#gets all files under the folder 'data/aspatial' which is in '.xlsx' format</span></span>
<span id="cb118-320"><a href="#cb118-320" aria-hidden="true" tabindex="-1"></a>study_period_data <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">'data/aspatial'</span>,<span class="at">pattern =</span> <span class="st">"*.xlsx"</span>)</span>
<span id="cb118-321"><a href="#cb118-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-322"><a href="#cb118-322" aria-hidden="true" tabindex="-1"></a><span class="co">#instantiate an empty list which will be used later to contain all the df names</span></span>
<span id="cb118-323"><a href="#cb118-323" aria-hidden="true" tabindex="-1"></a>df_list <span class="ot">&lt;-</span><span class="fu">list</span>()</span>
<span id="cb118-324"><a href="#cb118-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-325"><a href="#cb118-325" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (x <span class="cf">in</span> study_period_data){</span>
<span id="cb118-326"><a href="#cb118-326" aria-hidden="true" tabindex="-1"></a> <span class="co"># eg of x: Data Vaksinasi Berbasis Kelurahan (01 April 2022).xlsx</span></span>
<span id="cb118-327"><a href="#cb118-327" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb118-328"><a href="#cb118-328" aria-hidden="true" tabindex="-1"></a> <span class="co"># extract the year and month from the data file name</span></span>
<span id="cb118-329"><a href="#cb118-329" aria-hidden="true" tabindex="-1"></a> month_yr <span class="ot">&lt;-</span> <span class="fu">str_trim</span>(<span class="fu">substr</span>(x, <span class="dv">38</span>, <span class="fu">nchar</span>(x)<span class="sc">-</span><span class="dv">6</span>)) <span class="co">#e.g output: April 2022</span></span>
<span id="cb118-330"><a href="#cb118-330" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb118-331"><a href="#cb118-331" aria-hidden="true" tabindex="-1"></a> <span class="co">#split the month and year by the empty space inbetween</span></span>
<span id="cb118-332"><a href="#cb118-332" aria-hidden="true" tabindex="-1"></a> split_month_yr <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(month_yr,<span class="st">" "</span>) <span class="co">#e.g output: [[1]][1]'April' '2022'</span></span>
<span id="cb118-333"><a href="#cb118-333" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb118-334"><a href="#cb118-334" aria-hidden="true" tabindex="-1"></a> <span class="co">#split_month_yr[[1]][1] shows the month, split_month_yr[[1]][2] shows the year </span></span>
<span id="cb118-335"><a href="#cb118-335" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb118-336"><a href="#cb118-336" aria-hidden="true" tabindex="-1"></a> <span class="co">#join the month and year with "_"</span></span>
<span id="cb118-337"><a href="#cb118-337" aria-hidden="true" tabindex="-1"></a> join_month_yr <span class="ot">&lt;-</span> <span class="fu">paste</span>(split_month_yr[[<span class="dv">1</span>]][<span class="dv">1</span>],split_month_yr[[<span class="dv">1</span>]][<span class="dv">2</span>],<span class="at">sep=</span><span class="st">"_"</span>) </span>
<span id="cb118-338"><a href="#cb118-338" aria-hidden="true" tabindex="-1"></a> <span class="co">#e.g output: April_2022</span></span>
<span id="cb118-339"><a href="#cb118-339" aria-hidden="true" tabindex="-1"></a> <span class="co">#join_month_yr will be used as the variable name to store the df</span></span>
<span id="cb118-340"><a href="#cb118-340" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb118-341"><a href="#cb118-341" aria-hidden="true" tabindex="-1"></a> <span class="co">#add each month name to list</span></span>
<span id="cb118-342"><a href="#cb118-342" aria-hidden="true" tabindex="-1"></a> df_list<span class="ot">&lt;-</span><span class="fu">append</span>(df_list,join_month_yr)</span>
<span id="cb118-343"><a href="#cb118-343" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb118-344"><a href="#cb118-344" aria-hidden="true" tabindex="-1"></a> <span class="co"># get filepath that we need to read each month's excel file</span></span>
<span id="cb118-345"><a href="#cb118-345" aria-hidden="true" tabindex="-1"></a> filepath <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"data/aspatial/"</span>,x,<span class="at">sep=</span><span class="st">""</span>)</span>
<span id="cb118-346"><a href="#cb118-346" aria-hidden="true" tabindex="-1"></a> <span class="co"># eg output: "data/aspatial/Data Vaksinasi Berbasis Kelurahan (01 April 2022).xlsx"</span></span>
<span id="cb118-347"><a href="#cb118-347" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb118-348"><a href="#cb118-348" aria-hidden="true" tabindex="-1"></a> <span class="co">#reach each excel file and assign it to its variable name </span></span>
<span id="cb118-349"><a href="#cb118-349" aria-hidden="true" tabindex="-1"></a> <span class="fu">assign</span>(join_month_yr,<span class="fu">read_excel</span>(filepath))</span>
<span id="cb118-350"><a href="#cb118-350" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb118-351"><a href="#cb118-351" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb118-352"><a href="#cb118-352" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb118-353"><a href="#cb118-353" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb118-354"><a href="#cb118-354" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-355"><a href="#cb118-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-356"><a href="#cb118-356" aria-hidden="true" tabindex="-1"></a><span class="fu">### 3.2.3 Data Pre-processing</span></span>
<span id="cb118-357"><a href="#cb118-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-358"><a href="#cb118-358" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 3.2.3.1 Check for Duplicated Values</span></span>
<span id="cb118-359"><a href="#cb118-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-360"><a href="#cb118-360" aria-hidden="true" tabindex="-1"></a>To check for any duplicate columns for each dataset, I created a function called duplication_check() which takes in the df filename as a variable.</span>
<span id="cb118-361"><a href="#cb118-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-364"><a href="#cb118-364" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-365"><a href="#cb118-365" aria-hidden="true" tabindex="-1"></a>duplication_check <span class="ot">&lt;-</span> <span class="cf">function</span>(file_name) {</span>
<span id="cb118-366"><a href="#cb118-366" aria-hidden="true" tabindex="-1"></a>  duplicated_columns <span class="ot">&lt;-</span> <span class="fu">duplicated</span>(<span class="fu">as.list</span>(file_name))</span>
<span id="cb118-367"><a href="#cb118-367" aria-hidden="true" tabindex="-1"></a>  duplicated_chara <span class="ot">&lt;-</span> <span class="fu">colnames</span>(file_name[duplicated_columns])</span>
<span id="cb118-368"><a href="#cb118-368" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(duplicated_chara)</span>
<span id="cb118-369"><a href="#cb118-369" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb118-370"><a href="#cb118-370" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-371"><a href="#cb118-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-372"><a href="#cb118-372" aria-hidden="true" tabindex="-1"></a>I then made use of df_list which I populated earlier on to contain all of our df names and looped through it. This allows me to check for each time period df, which df has duplicated columns using the function I created.</span>
<span id="cb118-373"><a href="#cb118-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-376"><a href="#cb118-376" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-377"><a href="#cb118-377" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (df <span class="cf">in</span> df_list) {</span>
<span id="cb118-378"><a href="#cb118-378" aria-hidden="true" tabindex="-1"></a>  duplicated_col <span class="ot">&lt;-</span> <span class="fu">duplication_check</span>(<span class="fu">get</span>(df))</span>
<span id="cb118-379"><a href="#cb118-379" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">identical</span>(duplicated_col, <span class="fu">character</span>(<span class="dv">0</span>))){</span>
<span id="cb118-380"><a href="#cb118-380" aria-hidden="true" tabindex="-1"></a>    duplicated_col<span class="ot">=</span><span class="st">"none"</span></span>
<span id="cb118-381"><a href="#cb118-381" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb118-382"><a href="#cb118-382" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb118-383"><a href="#cb118-383" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Under df"</span>, df, <span class="st">"| duplicated col:"</span>, <span class="fu">toString</span>(duplicated_col)))</span>
<span id="cb118-384"><a href="#cb118-384" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb118-385"><a href="#cb118-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-386"><a href="#cb118-386" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-387"><a href="#cb118-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-388"><a href="#cb118-388" aria-hidden="true" tabindex="-1"></a>Based on the output, we can observe that for df April_2022, Juni_2022 and Mei_2022. There is a duplicated column called <span class="in">`LANSIA\r\nDOSIS 3`</span>.</span>
<span id="cb118-389"><a href="#cb118-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-390"><a href="#cb118-390" aria-hidden="true" tabindex="-1"></a>Diving deeper into each dataset with a duplicated column with the use of glimpse(), we can observe that column <span class="in">`LANSIA\r\nDOSIS 3`</span> and column <span class="in">`LANSIA\r\nDOSIS 2`</span> are exactly the same.</span>
<span id="cb118-391"><a href="#cb118-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-394"><a href="#cb118-394" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-395"><a href="#cb118-395" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(April_2022)</span>
<span id="cb118-396"><a href="#cb118-396" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-397"><a href="#cb118-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-398"><a href="#cb118-398" aria-hidden="true" tabindex="-1"></a>**But how does this affect our dataset?**</span>
<span id="cb118-399"><a href="#cb118-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-400"><a href="#cb118-400" aria-hidden="true" tabindex="-1"></a>Upon translation, i discovered that <span class="in">`LANSIA\r\nDOSIS`</span> refers to elderly dosage.</span>
<span id="cb118-401"><a href="#cb118-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-402"><a href="#cb118-402" aria-hidden="true" tabindex="-1"></a>This means that in our datasets with duplicated columns, there is 4 related columns - Elderly Dosage 1, Elderly Dosage 2, Elderly Dosage 3, Total Elderly Dosage where Dosage 3 values are a repeat of Dosage 2 values.</span>
<span id="cb118-403"><a href="#cb118-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-404"><a href="#cb118-404" aria-hidden="true" tabindex="-1"></a>I suspected that the Total elderly vaccine delivered should be the sum of Elderly Dosage 1, 2 and 3. However, according to April_2022 df, total elderly vaccine delivered is 1536442 which is neither the sum of elderly dosage 1, 2 and 3 nor the sum of elderly dosage 1 and 2. This suggests that either the total sum is wrongly added or the values for elderly dosage 3 was input wrongly. Regardless, this reduces the reliability of those data columns.</span>
<span id="cb118-405"><a href="#cb118-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-406"><a href="#cb118-406" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 3.2.3.2 Check for Missing Values</span></span>
<span id="cb118-407"><a href="#cb118-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-408"><a href="#cb118-408" aria-hidden="true" tabindex="-1"></a>To check for missing values, I created a function, check_missing_value() and used it to check for each df.</span>
<span id="cb118-409"><a href="#cb118-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-412"><a href="#cb118-412" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-413"><a href="#cb118-413" aria-hidden="true" tabindex="-1"></a>check_missing_value <span class="ot">&lt;-</span> <span class="cf">function</span>(filename){</span>
<span id="cb118-414"><a href="#cb118-414" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>(<span class="fu">is.na</span>(filename))</span>
<span id="cb118-415"><a href="#cb118-415" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb118-416"><a href="#cb118-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-417"><a href="#cb118-417" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (df <span class="cf">in</span> df_list) {</span>
<span id="cb118-418"><a href="#cb118-418" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">check_missing_value</span>(<span class="fu">get</span>(df)))</span>
<span id="cb118-419"><a href="#cb118-419" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb118-420"><a href="#cb118-420" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-421"><a href="#cb118-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-422"><a href="#cb118-422" aria-hidden="true" tabindex="-1"></a>Based on the output, I realised that all the df were missing 3 fields. Looking deeper, I realised it was the same 3 fields (1st row, first 3 columns) for all the df that were blank. The reason why it is empty is due to the fact that is was merged with the top column in the excel and the 1st row of each excel file was meant to represent the total dosages across all districts. Thus, we will be removing it later.</span>
<span id="cb118-423"><a href="#cb118-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-424"><a href="#cb118-424" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 3.2.3.3 Combination of every .xlsx Files</span></span>
<span id="cb118-425"><a href="#cb118-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-426"><a href="#cb118-426" aria-hidden="true" tabindex="-1"></a>Now, we need to combine the data files for every time period of our study period.</span>
<span id="cb118-427"><a href="#cb118-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-428"><a href="#cb118-428" aria-hidden="true" tabindex="-1"></a>First, I would need to add the date in a new column called <span class="in">`Time_Period`</span> .</span>
<span id="cb118-429"><a href="#cb118-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-432"><a href="#cb118-432" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-433"><a href="#cb118-433" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (df_str <span class="cf">in</span> df_list) {</span>
<span id="cb118-434"><a href="#cb118-434" aria-hidden="true" tabindex="-1"></a>  df<span class="ot">&lt;-</span><span class="fu">get</span>(df_str)</span>
<span id="cb118-435"><a href="#cb118-435" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb118-436"><a href="#cb118-436" aria-hidden="true" tabindex="-1"></a>  new_df<span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb118-437"><a href="#cb118-437" aria-hidden="true" tabindex="-1"></a>    <span class="co">#extract relevant columns</span></span>
<span id="cb118-438"><a href="#cb118-438" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">'WILAYAH KOTA'</span>, <span class="co"># CITY AREA</span></span>
<span id="cb118-439"><a href="#cb118-439" aria-hidden="true" tabindex="-1"></a>             <span class="st">'KECAMATAN'</span>, <span class="co"># DISTRICT</span></span>
<span id="cb118-440"><a href="#cb118-440" aria-hidden="true" tabindex="-1"></a>             <span class="st">'KELURAHAN'</span>, <span class="co"># SUBDISTRICT</span></span>
<span id="cb118-441"><a href="#cb118-441" aria-hidden="true" tabindex="-1"></a>             <span class="st">'SASARAN'</span>, <span class="co"># TARGET population to be vacinated</span></span>
<span id="cb118-442"><a href="#cb118-442" aria-hidden="true" tabindex="-1"></a>             <span class="st">'BELUM VAKSIN'</span> <span class="co">#Yet to be vacinnated</span></span>
<span id="cb118-443"><a href="#cb118-443" aria-hidden="true" tabindex="-1"></a>             )) <span class="sc">%&gt;%</span></span>
<span id="cb118-444"><a href="#cb118-444" aria-hidden="true" tabindex="-1"></a>    <span class="co">#add the month_year</span></span>
<span id="cb118-445"><a href="#cb118-445" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_column</span>(<span class="at">Time_Period =</span> df_str)</span>
<span id="cb118-446"><a href="#cb118-446" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb118-447"><a href="#cb118-447" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assign</span>(df_str,new_df)</span>
<span id="cb118-448"><a href="#cb118-448" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb118-449"><a href="#cb118-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-450"><a href="#cb118-450" aria-hidden="true" tabindex="-1"></a>combined_df <span class="ot">&lt;-</span> <span class="fu">setNames</span>(<span class="fu">data.frame</span>(<span class="fu">matrix</span>(<span class="at">ncol =</span> <span class="dv">6</span>, <span class="at">nrow =</span> <span class="dv">0</span>)), </span>
<span id="cb118-451"><a href="#cb118-451" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">c</span>(<span class="st">'WILAYAH KOTA'</span>,</span>
<span id="cb118-452"><a href="#cb118-452" aria-hidden="true" tabindex="-1"></a>                          <span class="st">'KECAMATAN'</span>,</span>
<span id="cb118-453"><a href="#cb118-453" aria-hidden="true" tabindex="-1"></a>                          <span class="st">'KELURAHAN'</span>,</span>
<span id="cb118-454"><a href="#cb118-454" aria-hidden="true" tabindex="-1"></a>                          <span class="st">'SASARAN'</span>,</span>
<span id="cb118-455"><a href="#cb118-455" aria-hidden="true" tabindex="-1"></a>                          <span class="st">'BELUM VAKSIN'</span>,</span>
<span id="cb118-456"><a href="#cb118-456" aria-hidden="true" tabindex="-1"></a>                          <span class="st">'Time_Period'</span>))</span>
<span id="cb118-457"><a href="#cb118-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-458"><a href="#cb118-458" aria-hidden="true" tabindex="-1"></a><span class="co">#combining all tgt</span></span>
<span id="cb118-459"><a href="#cb118-459" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (df_str <span class="cf">in</span> df_list) {</span>
<span id="cb118-460"><a href="#cb118-460" aria-hidden="true" tabindex="-1"></a>  combined_df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(combined_df,<span class="fu">get</span>(df_str))</span>
<span id="cb118-461"><a href="#cb118-461" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb118-462"><a href="#cb118-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-463"><a href="#cb118-463" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-464"><a href="#cb118-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-465"><a href="#cb118-465" aria-hidden="true" tabindex="-1"></a>Next, I translated the Indonesian column headers into English so we can understand it better.</span>
<span id="cb118-466"><a href="#cb118-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-469"><a href="#cb118-469" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-470"><a href="#cb118-470" aria-hidden="true" tabindex="-1"></a><span class="co">#translate  colnames into eng</span></span>
<span id="cb118-471"><a href="#cb118-471" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(combined_df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"CITY_AREA"</span>, <span class="st">"DISTRICT"</span>,<span class="st">"SUBDISTRICT"</span>, <span class="st">"TARGET"</span>, <span class="st">"YET_TO_BE_VACINATED"</span>, <span class="st">"TIME_PERIOD"</span>)</span>
<span id="cb118-472"><a href="#cb118-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-473"><a href="#cb118-473" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-474"><a href="#cb118-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-475"><a href="#cb118-475" aria-hidden="true" tabindex="-1"></a>Afterwards, I wanted to convert our time period into the date format yyyy-mm-dd.</span>
<span id="cb118-476"><a href="#cb118-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-479"><a href="#cb118-479" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-480"><a href="#cb118-480" aria-hidden="true" tabindex="-1"></a><span class="co">#convert into date format yyyy-mm-dd</span></span>
<span id="cb118-481"><a href="#cb118-481" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Desember_2021'</span>] <span class="ot">&lt;-</span> <span class="st">'2021-12-01'</span></span>
<span id="cb118-482"><a href="#cb118-482" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Februari_2022'</span>] <span class="ot">&lt;-</span> <span class="st">'2022-02-01'</span></span>
<span id="cb118-483"><a href="#cb118-483" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Januari_2022'</span>] <span class="ot">&lt;-</span> <span class="st">'2022-01-01'</span></span>
<span id="cb118-484"><a href="#cb118-484" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Juli_2021'</span>] <span class="ot">&lt;-</span> <span class="st">'2021-07-01'</span></span>
<span id="cb118-485"><a href="#cb118-485" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Juni_2022'</span>] <span class="ot">&lt;-</span> <span class="st">'2022-06-01'</span></span>
<span id="cb118-486"><a href="#cb118-486" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Mei_2022'</span>] <span class="ot">&lt;-</span> <span class="st">'2022-05-01'</span></span>
<span id="cb118-487"><a href="#cb118-487" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Oktober_2021'</span>] <span class="ot">&lt;-</span> <span class="st">'2021-10-01'</span></span>
<span id="cb118-488"><a href="#cb118-488" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Maret_2022'</span>] <span class="ot">&lt;-</span> <span class="st">'2022-03-02'</span></span>
<span id="cb118-489"><a href="#cb118-489" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'Agustus_2021'</span>] <span class="ot">&lt;-</span> <span class="st">'2021-08-01'</span></span>
<span id="cb118-490"><a href="#cb118-490" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'September_2021'</span>] <span class="ot">&lt;-</span> <span class="st">'2021-09-01'</span></span>
<span id="cb118-491"><a href="#cb118-491" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'November_2021'</span>] <span class="ot">&lt;-</span> <span class="st">'2021-11-01'</span></span>
<span id="cb118-492"><a href="#cb118-492" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD[combined_df<span class="sc">$</span>TIME_PERIOD <span class="sc">==</span> <span class="st">'April_2022'</span>] <span class="ot">&lt;-</span> <span class="st">'2022-04-01'</span></span>
<span id="cb118-493"><a href="#cb118-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-494"><a href="#cb118-494" aria-hidden="true" tabindex="-1"></a><span class="co">#convert to date format</span></span>
<span id="cb118-495"><a href="#cb118-495" aria-hidden="true" tabindex="-1"></a>combined_df<span class="sc">$</span>TIME_PERIOD <span class="ot">&lt;-</span><span class="fu">as.Date</span>(combined_df<span class="sc">$</span>TIME_PERIOD, <span class="at">format=</span><span class="st">"%Y-%m-%d"</span>)</span>
<span id="cb118-496"><a href="#cb118-496" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(combined_df<span class="sc">$</span>TIME_PERIOD)</span>
<span id="cb118-497"><a href="#cb118-497" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-498"><a href="#cb118-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-501"><a href="#cb118-501" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-502"><a href="#cb118-502" aria-hidden="true" tabindex="-1"></a><span class="co">#check missing values</span></span>
<span id="cb118-503"><a href="#cb118-503" aria-hidden="true" tabindex="-1"></a>combined_df[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(combined_df))<span class="sc">!=</span><span class="dv">0</span>,]</span>
<span id="cb118-504"><a href="#cb118-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-505"><a href="#cb118-505" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-506"><a href="#cb118-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-507"><a href="#cb118-507" aria-hidden="true" tabindex="-1"></a>As identified earlier, there are missing values under <span class="in">`CITY AREA`</span> and <span class="in">`DISTRICT`</span> where the <span class="in">`SUBDISTRICT`</span> is "TOTAL". As our analysis focuses on the Subdistricts of Jakarta, knowing the "Total" is not important. Hence, I decided to remove it.</span>
<span id="cb118-508"><a href="#cb118-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-511"><a href="#cb118-511" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-512"><a href="#cb118-512" aria-hidden="true" tabindex="-1"></a>combined_df <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(combined_df)</span>
<span id="cb118-513"><a href="#cb118-513" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-514"><a href="#cb118-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-517"><a href="#cb118-517" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-518"><a href="#cb118-518" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(combined_df))</span>
<span id="cb118-519"><a href="#cb118-519" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-520"><a href="#cb118-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-521"><a href="#cb118-521" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 3.2.3.4 Removal of Outer Islands</span></span>
<span id="cb118-522"><a href="#cb118-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-523"><a href="#cb118-523" aria-hidden="true" tabindex="-1"></a>Next, we need to check whether this data consist of any outer islands and remove it accordingly. The code chunk below follow the steps earlier shown in the removal of outer islands.</span>
<span id="cb118-524"><a href="#cb118-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-527"><a href="#cb118-527" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-528"><a href="#cb118-528" aria-hidden="true" tabindex="-1"></a><span class="co">#identify unique values of city areas in Jakarta</span></span>
<span id="cb118-529"><a href="#cb118-529" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(combined_df<span class="sc">$</span><span class="st">"CITY_AREA"</span>)</span>
<span id="cb118-530"><a href="#cb118-530" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-531"><a href="#cb118-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-534"><a href="#cb118-534" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-535"><a href="#cb118-535" aria-hidden="true" tabindex="-1"></a><span class="co">#remove the outer island i.e KAB.ADM.KEP.SERIBU</span></span>
<span id="cb118-536"><a href="#cb118-536" aria-hidden="true" tabindex="-1"></a>combined_df <span class="ot">&lt;-</span> <span class="fu">filter</span>(combined_df, CITY_AREA <span class="sc">!=</span> <span class="st">"KAB.ADM.KEP.SERIBU"</span>)</span>
<span id="cb118-537"><a href="#cb118-537" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-538"><a href="#cb118-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-539"><a href="#cb118-539" aria-hidden="true" tabindex="-1"></a><span class="fu"># 4. Geospatial Data Integration</span></span>
<span id="cb118-540"><a href="#cb118-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-541"><a href="#cb118-541" aria-hidden="true" tabindex="-1"></a>Now that we have prepared our geospatial and aspatial data frames, we'll need to join them. A quick look at their headers tell us what their common fields are:</span>
<span id="cb118-542"><a href="#cb118-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-545"><a href="#cb118-545" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-546"><a href="#cb118-546" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(jkt2019)</span>
<span id="cb118-547"><a href="#cb118-547" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-548"><a href="#cb118-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-551"><a href="#cb118-551" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-552"><a href="#cb118-552" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(combined_df)</span>
<span id="cb118-553"><a href="#cb118-553" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-554"><a href="#cb118-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-555"><a href="#cb118-555" aria-hidden="true" tabindex="-1"></a>Analyzing the columns headers, columns related to the city, district and subdistrictshould match.</span>
<span id="cb118-556"><a href="#cb118-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-559"><a href="#cb118-559" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-560"><a href="#cb118-560" aria-hidden="true" tabindex="-1"></a><span class="co"># joins based on district, Sub_District and City</span></span>
<span id="cb118-561"><a href="#cb118-561" aria-hidden="true" tabindex="-1"></a>combined_jakarta <span class="ot">&lt;-</span> <span class="fu">left_join</span>(jkt2019, combined_df,</span>
<span id="cb118-562"><a href="#cb118-562" aria-hidden="true" tabindex="-1"></a>                              <span class="at">by=</span><span class="fu">c</span>(</span>
<span id="cb118-563"><a href="#cb118-563" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"City"</span><span class="ot">=</span><span class="st">"CITY_AREA"</span>, </span>
<span id="cb118-564"><a href="#cb118-564" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"District"</span><span class="ot">=</span><span class="st">"DISTRICT"</span>,</span>
<span id="cb118-565"><a href="#cb118-565" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Sub_District"</span><span class="ot">=</span><span class="st">"SUBDISTRICT"</span>)</span>
<span id="cb118-566"><a href="#cb118-566" aria-hidden="true" tabindex="-1"></a>                              )</span>
<span id="cb118-567"><a href="#cb118-567" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-568"><a href="#cb118-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-569"><a href="#cb118-569" aria-hidden="true" tabindex="-1"></a>Now, let's visualise our combined_jakarta and with its target and to be vaccinated values count.</span>
<span id="cb118-570"><a href="#cb118-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-573"><a href="#cb118-573" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-574"><a href="#cb118-574" aria-hidden="true" tabindex="-1"></a>target_vaccines <span class="ot">=</span> <span class="fu">tm_shape</span>(combined_jakarta)<span class="sc">+</span></span>
<span id="cb118-575"><a href="#cb118-575" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"TARGET"</span>) <span class="sc">+</span></span>
<span id="cb118-576"><a href="#cb118-576" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb118-577"><a href="#cb118-577" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Target Vaccinated Count"</span>)</span>
<span id="cb118-578"><a href="#cb118-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-579"><a href="#cb118-579" aria-hidden="true" tabindex="-1"></a>yet_to_be_vaccines <span class="ot">=</span> <span class="fu">tm_shape</span>(combined_jakarta)<span class="sc">+</span></span>
<span id="cb118-580"><a href="#cb118-580" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"YET_TO_BE_VACINATED"</span>) <span class="sc">+</span></span>
<span id="cb118-581"><a href="#cb118-581" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb118-582"><a href="#cb118-582" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Yet To Be Vaccinated Count"</span>)</span>
<span id="cb118-583"><a href="#cb118-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-584"><a href="#cb118-584" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(target_vaccines, yet_to_be_vaccines)</span>
<span id="cb118-585"><a href="#cb118-585" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-586"><a href="#cb118-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-587"><a href="#cb118-587" aria-hidden="true" tabindex="-1"></a>Both our maps show that there are missing values even though both dataframes missing values were removed earlier.</span>
<span id="cb118-588"><a href="#cb118-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-589"><a href="#cb118-589" aria-hidden="true" tabindex="-1"></a>Thus, we need to look deeper into our values. Some of my observations looking at the <span class="in">`SUBDISTRICT`</span> and <span class="in">`Sub_District`</span> values directly were that there were alternate ways of calling the same sub district. For example, "KRAMAT JATI" in combined_df, but "KRAMAT ATI" in jkt2019.</span>
<span id="cb118-590"><a href="#cb118-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-591"><a href="#cb118-591" aria-hidden="true" tabindex="-1"></a>The code chunk below further explores the unique values of sub districts found in count_subdistrict but not in bd_subdistrict and vice versa.</span>
<span id="cb118-592"><a href="#cb118-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-595"><a href="#cb118-595" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-596"><a href="#cb118-596" aria-hidden="true" tabindex="-1"></a>count_subdistrict <span class="ot">&lt;-</span> <span class="fu">c</span>(combined_df<span class="sc">$</span>SUBDISTRICT)</span>
<span id="cb118-597"><a href="#cb118-597" aria-hidden="true" tabindex="-1"></a>bd_subdistrict <span class="ot">&lt;-</span> <span class="fu">c</span>(jkt2019<span class="sc">$</span>Sub_District)</span>
<span id="cb118-598"><a href="#cb118-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-599"><a href="#cb118-599" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Unique Aspatial SUBDISTRICT:</span><span class="sc">\n</span><span class="st">__________________________________________________________</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb118-600"><a href="#cb118-600" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(count_subdistrict[<span class="sc">!</span>(count_subdistrict <span class="sc">%in%</span> bd_subdistrict)])</span>
<span id="cb118-601"><a href="#cb118-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-602"><a href="#cb118-602" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Unique Geospatial Sub_District:</span><span class="sc">\n</span><span class="st">__________________________________________________________</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb118-603"><a href="#cb118-603" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(bd_subdistrict[<span class="sc">!</span>(bd_subdistrict <span class="sc">%in%</span> count_subdistrict)])</span>
<span id="cb118-604"><a href="#cb118-604" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-605"><a href="#cb118-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-606"><a href="#cb118-606" aria-hidden="true" tabindex="-1"></a>The table below compiles the mismatched records of the subdistricts between the two dataframes.</span>
<span id="cb118-607"><a href="#cb118-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-610"><a href="#cb118-610" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-611"><a href="#cb118-611" aria-hidden="true" tabindex="-1"></a><span class="co"># initialise a dataframe of our cases vs bd subdistrict spelling</span></span>
<span id="cb118-612"><a href="#cb118-612" aria-hidden="true" tabindex="-1"></a>spelling <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb118-613"><a href="#cb118-613" aria-hidden="true" tabindex="-1"></a>  <span class="at">Aspatial_Count=</span><span class="fu">c</span>(<span class="st">"BALE KAMBANG"</span>, <span class="st">"HALIM PERDANA KUSUMAH"</span>, <span class="st">"JATI PULO"</span>, <span class="st">"KALI BARU"</span>, <span class="st">"KAMPUNG TENGAH"</span>, <span class="st">"KRAMAT JATI"</span>, <span class="st">"KERENDANG"</span>, <span class="st">"PAL MERIAM"</span>, <span class="st">"PINANG RANTI"</span>, <span class="st">"RAWA JATI"</span>),</span>
<span id="cb118-614"><a href="#cb118-614" aria-hidden="true" tabindex="-1"></a>  <span class="at">Geospatial_BD=</span><span class="fu">c</span>(<span class="st">"BALEKAMBAG"</span>, <span class="st">"HALIM PERDANA KUSUMA"</span>, <span class="st">"JATIPULO"</span>, <span class="st">"KALIBARU"</span>, <span class="st">"TENGAH"</span>, <span class="st">"KRAMATJATI"</span>, <span class="st">"KRENDANG"</span>, <span class="st">"PALMERIAM"</span>, <span class="st">"PINANGRANTI"</span>, <span class="st">"RAWAJATI"</span>)</span>
<span id="cb118-615"><a href="#cb118-615" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb118-616"><a href="#cb118-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-617"><a href="#cb118-617" aria-hidden="true" tabindex="-1"></a>spelling</span>
<span id="cb118-618"><a href="#cb118-618" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-619"><a href="#cb118-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-620"><a href="#cb118-620" aria-hidden="true" tabindex="-1"></a>Next, we need to rectify the mismatched subdistricts names.</span>
<span id="cb118-621"><a href="#cb118-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-624"><a href="#cb118-624" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-625"><a href="#cb118-625" aria-hidden="true" tabindex="-1"></a><span class="co"># where jkt2019 is a mismatched value, replace with the correct value</span></span>
<span id="cb118-626"><a href="#cb118-626" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'BALEKAMBANG'</span>] <span class="ot">&lt;-</span> <span class="st">'BALE KAMBANG'</span></span>
<span id="cb118-627"><a href="#cb118-627" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'HALIM PERDANA KUSUMA'</span>] <span class="ot">&lt;-</span> <span class="st">'HALIM PERDANA KUSUMAH'</span></span>
<span id="cb118-628"><a href="#cb118-628" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'JATIPULO'</span>] <span class="ot">&lt;-</span> <span class="st">'JATI PULO'</span></span>
<span id="cb118-629"><a href="#cb118-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-630"><a href="#cb118-630" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'KALI BARU'</span>] <span class="ot">&lt;-</span> <span class="st">'KALIBARU'</span></span>
<span id="cb118-631"><a href="#cb118-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-632"><a href="#cb118-632" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'TENGAH'</span>] <span class="ot">&lt;-</span> <span class="st">'KAMPUNG TENGAH'</span></span>
<span id="cb118-633"><a href="#cb118-633" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'KRAMATJATI'</span>] <span class="ot">&lt;-</span> <span class="st">'KRAMAT JATI'</span></span>
<span id="cb118-634"><a href="#cb118-634" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'KRENDANG'</span>] <span class="ot">&lt;-</span> <span class="st">'KERENDANG'</span></span>
<span id="cb118-635"><a href="#cb118-635" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'PALMERIAM'</span>] <span class="ot">&lt;-</span> <span class="st">'PAL MERIAM'</span></span>
<span id="cb118-636"><a href="#cb118-636" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'PINANGRANTI'</span>] <span class="ot">&lt;-</span> <span class="st">'PINANG RANTI'</span></span>
<span id="cb118-637"><a href="#cb118-637" aria-hidden="true" tabindex="-1"></a>jkt2019<span class="sc">$</span>Sub_District[jkt2019<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'RAWAJATI'</span>] <span class="ot">&lt;-</span> <span class="st">'RAWA JATI'</span></span>
<span id="cb118-638"><a href="#cb118-638" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-639"><a href="#cb118-639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-640"><a href="#cb118-640" aria-hidden="true" tabindex="-1"></a>Rejoining the two dataframes</span>
<span id="cb118-641"><a href="#cb118-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-644"><a href="#cb118-644" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-645"><a href="#cb118-645" aria-hidden="true" tabindex="-1"></a>combined_jakarta <span class="ot">&lt;-</span> <span class="fu">left_join</span>(jkt2019, combined_df,</span>
<span id="cb118-646"><a href="#cb118-646" aria-hidden="true" tabindex="-1"></a>                              <span class="at">by=</span><span class="fu">c</span>(<span class="st">"Sub_District"</span><span class="ot">=</span><span class="st">"SUBDISTRICT"</span>)</span>
<span id="cb118-647"><a href="#cb118-647" aria-hidden="true" tabindex="-1"></a>                              )</span>
<span id="cb118-648"><a href="#cb118-648" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-649"><a href="#cb118-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-652"><a href="#cb118-652" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-653"><a href="#cb118-653" aria-hidden="true" tabindex="-1"></a><span class="co"># double check of any missing values</span></span>
<span id="cb118-654"><a href="#cb118-654" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(combined_jakarta))</span>
<span id="cb118-655"><a href="#cb118-655" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-656"><a href="#cb118-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-657"><a href="#cb118-657" aria-hidden="true" tabindex="-1"></a>Once again, let's visualise it!\</span>
<span id="cb118-658"><a href="#cb118-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-661"><a href="#cb118-661" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-662"><a href="#cb118-662" aria-hidden="true" tabindex="-1"></a>updated_target_count <span class="ot">=</span> <span class="fu">tm_shape</span>(combined_jakarta)<span class="sc">+</span></span>
<span id="cb118-663"><a href="#cb118-663" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"TARGET"</span>) <span class="sc">+</span></span>
<span id="cb118-664"><a href="#cb118-664" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb118-665"><a href="#cb118-665" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Updated Target Vacinated Count"</span>)</span>
<span id="cb118-666"><a href="#cb118-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-667"><a href="#cb118-667" aria-hidden="true" tabindex="-1"></a>updated_yet_to_be_count <span class="ot">=</span> <span class="fu">tm_shape</span>(combined_jakarta)<span class="sc">+</span></span>
<span id="cb118-668"><a href="#cb118-668" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"YET_TO_BE_VACINATED"</span>) <span class="sc">+</span></span>
<span id="cb118-669"><a href="#cb118-669" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb118-670"><a href="#cb118-670" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Updated TO Be Vaccinated Count"</span>)</span>
<span id="cb118-671"><a href="#cb118-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-672"><a href="#cb118-672" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(updated_target_count, updated_yet_to_be_count)</span>
<span id="cb118-673"><a href="#cb118-673" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-674"><a href="#cb118-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-675"><a href="#cb118-675" aria-hidden="true" tabindex="-1"></a><span class="fu"># 5. Choropleth Mapping and Analysis</span></span>
<span id="cb118-676"><a href="#cb118-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-677"><a href="#cb118-677" aria-hidden="true" tabindex="-1"></a><span class="fu">## 5.1 Calculation of Monthly Vaccination Rates</span></span>
<span id="cb118-678"><a href="#cb118-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-679"><a href="#cb118-679" aria-hidden="true" tabindex="-1"></a>To calculate the monthly vaccination rates, I will be using this formula:</span>
<span id="cb118-680"><a href="#cb118-680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-681"><a href="#cb118-681" aria-hidden="true" tabindex="-1"></a>$Vaccination Rate (\%) =\frac{Target - Yet To Be Vaccinated}{Target} * 100$</span>
<span id="cb118-682"><a href="#cb118-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-683"><a href="#cb118-683" aria-hidden="true" tabindex="-1"></a>where Target refers to target population to get vaccinated and YetToBeVacinated refers to population who have not been vaccinated yet. Essentially, the vaccination rate is derived from taking count of people who are vaccinated over count of people who are supposed to be vaccinated.</span>
<span id="cb118-684"><a href="#cb118-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-687"><a href="#cb118-687" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-688"><a href="#cb118-688" aria-hidden="true" tabindex="-1"></a><span class="co"># grouping based on the sub-district and time_period</span></span>
<span id="cb118-689"><a href="#cb118-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-690"><a href="#cb118-690" aria-hidden="true" tabindex="-1"></a>vr <span class="ot">&lt;-</span> combined_df <span class="sc">%&gt;%</span></span>
<span id="cb118-691"><a href="#cb118-691" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(jkt2019, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"SUBDISTRICT"</span> <span class="ot">=</span> <span class="st">"Sub_District"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb118-692"><a href="#cb118-692" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SUBDISTRICT, TIME_PERIOD) <span class="sc">%&gt;%</span></span>
<span id="cb118-693"><a href="#cb118-693" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="st">`</span><span class="at">vaccination_rates</span><span class="st">`</span> <span class="ot">=</span> ((<span class="fu">sum</span>(TARGET<span class="sc">-</span>YET_TO_BE_VACINATED)<span class="sc">/</span><span class="fu">sum</span>(TARGET))<span class="sc">*</span><span class="dv">100</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb118-694"><a href="#cb118-694" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb118-695"><a href="#cb118-695" aria-hidden="true" tabindex="-1"></a>  <span class="co">#afterwards, pivots the table based on the Dates, showing the cumulative death rate</span></span>
<span id="cb118-696"><a href="#cb118-696" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> TIME_PERIOD,</span>
<span id="cb118-697"><a href="#cb118-697" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> vaccination_rates)</span>
<span id="cb118-698"><a href="#cb118-698" aria-hidden="true" tabindex="-1"></a>vr</span>
<span id="cb118-699"><a href="#cb118-699" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-700"><a href="#cb118-700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-701"><a href="#cb118-701" aria-hidden="true" tabindex="-1"></a>The output of the code chunk below shows monthly vaccination rates across each sub-district from a study period of July 2021 to June 2022.</span>
<span id="cb118-702"><a href="#cb118-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-703"><a href="#cb118-703" aria-hidden="true" tabindex="-1"></a>**Convert our dataframes into sf objects**</span>
<span id="cb118-704"><a href="#cb118-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-707"><a href="#cb118-707" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-708"><a href="#cb118-708" aria-hidden="true" tabindex="-1"></a>combined_jakarta <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(combined_jakarta)</span>
<span id="cb118-709"><a href="#cb118-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-710"><a href="#cb118-710" aria-hidden="true" tabindex="-1"></a>vr <span class="ot">&lt;-</span> vr<span class="sc">%&gt;%</span> <span class="fu">left_join</span>(jkt2019, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"SUBDISTRICT"</span><span class="ot">=</span><span class="st">"Sub_District"</span>))</span>
<span id="cb118-711"><a href="#cb118-711" aria-hidden="true" tabindex="-1"></a>vr <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(vr)</span>
<span id="cb118-712"><a href="#cb118-712" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-713"><a href="#cb118-713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-714"><a href="#cb118-714" aria-hidden="true" tabindex="-1"></a><span class="fu">## 5.2 Mapping of Monthly Vaccination Rates</span></span>
<span id="cb118-715"><a href="#cb118-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-716"><a href="#cb118-716" aria-hidden="true" tabindex="-1"></a>There are different <span class="co">[</span><span class="ot">methods</span><span class="co">](https://storymaps.arcgis.com/stories/bcb8e509f319436786a2481c722bc218)</span> to classify the vaccination rates in choropleth maps. Initially, I considered Jenks classification method as it can minimize variation in each group which allows map readers to easily witness the trends presented by the map. However, this method is not very suitable for our data as it has low variance.</span>
<span id="cb118-717"><a href="#cb118-717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-718"><a href="#cb118-718" aria-hidden="true" tabindex="-1"></a>The code chunk below shows the decreasing variance as time passes through the period of July 2021 to June 2022.</span>
<span id="cb118-719"><a href="#cb118-719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-722"><a href="#cb118-722" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-723"><a href="#cb118-723" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(vr<span class="sc">$</span><span class="st">`</span><span class="at">2021-07-01</span><span class="st">`</span>)</span>
<span id="cb118-724"><a href="#cb118-724" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(vr<span class="sc">$</span><span class="st">`</span><span class="at">2021-10-01</span><span class="st">`</span>)</span>
<span id="cb118-725"><a href="#cb118-725" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(vr<span class="sc">$</span><span class="st">`</span><span class="at">2022-02-01</span><span class="st">`</span>)</span>
<span id="cb118-726"><a href="#cb118-726" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(vr<span class="sc">$</span><span class="st">`</span><span class="at">2022-06-01</span><span class="st">`</span>)</span>
<span id="cb118-727"><a href="#cb118-727" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-728"><a href="#cb118-728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-729"><a href="#cb118-729" aria-hidden="true" tabindex="-1"></a>To get a clearer visualization of a specific month, I decided to use the classification method, cont as it creates a smooth, linear gradient in which the change in values is proportionally related to the change in colors. For the color palette, i decided to go with a sequential scheme from yellow to green as it more suited for ordered data that progress from low to high.</span>
<span id="cb118-730"><a href="#cb118-730" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-731"><a href="#cb118-731" aria-hidden="true" tabindex="-1"></a>The code chunk below is a map of vaccination rates in July 2021. By clicking on a certain location, it will show us the district name and respective vaccination rates. The darker the green, the higher the vaccination rates.</span>
<span id="cb118-732"><a href="#cb118-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-735"><a href="#cb118-735" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-736"><a href="#cb118-736" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb118-737"><a href="#cb118-737" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(vr)<span class="sc">+</span></span>
<span id="cb118-738"><a href="#cb118-738" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(<span class="st">"2021-07-01"</span>, </span>
<span id="cb118-739"><a href="#cb118-739" aria-hidden="true" tabindex="-1"></a>            <span class="at">n=</span> <span class="dv">6</span>,</span>
<span id="cb118-740"><a href="#cb118-740" aria-hidden="true" tabindex="-1"></a>            <span class="at">style =</span> <span class="st">"cont"</span>,</span>
<span id="cb118-741"><a href="#cb118-741" aria-hidden="true" tabindex="-1"></a>            <span class="at">title =</span> <span class="st">"Vaccination Rate(%)"</span>,</span>
<span id="cb118-742"><a href="#cb118-742" aria-hidden="true" tabindex="-1"></a>            <span class="at">palette =</span> <span class="st">"YlGn"</span>,</span>
<span id="cb118-743"><a href="#cb118-743" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb118-744"><a href="#cb118-744" aria-hidden="true" tabindex="-1"></a>    <span class="co">#tm_text("SUBDISTRICT")+</span></span>
<span id="cb118-745"><a href="#cb118-745" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Vaccination Rates in July 2021"</span>,</span>
<span id="cb118-746"><a href="#cb118-746" aria-hidden="true" tabindex="-1"></a>              <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb118-747"><a href="#cb118-747" aria-hidden="true" tabindex="-1"></a>              <span class="at">main.title.size =</span> <span class="dv">1</span>,</span>
<span id="cb118-748"><a href="#cb118-748" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.height =</span> <span class="fl">0.5</span>, </span>
<span id="cb118-749"><a href="#cb118-749" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.width =</span> <span class="fl">0.4</span>,</span>
<span id="cb118-750"><a href="#cb118-750" aria-hidden="true" tabindex="-1"></a>              <span class="at">frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb118-751"><a href="#cb118-751" aria-hidden="true" tabindex="-1"></a>              ) <span class="sc">+</span></span>
<span id="cb118-752"><a href="#cb118-752" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) </span>
<span id="cb118-753"><a href="#cb118-753" aria-hidden="true" tabindex="-1"></a>    <span class="co">#+ tm_view(set.zoom.limits = c(10, 14),</span></span>
<span id="cb118-754"><a href="#cb118-754" aria-hidden="true" tabindex="-1"></a>            <span class="co">#view.legend.position = c("right","bottom"))</span></span>
<span id="cb118-755"><a href="#cb118-755" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-756"><a href="#cb118-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-757"><a href="#cb118-757" aria-hidden="true" tabindex="-1"></a>Insights:</span>
<span id="cb118-758"><a href="#cb118-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-759"><a href="#cb118-759" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>The sub-district with the lowest vaccination rate is CIPINANG BESAR UTARA (23.15%).</span>
<span id="cb118-760"><a href="#cb118-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-761"><a href="#cb118-761" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>The sub-district with the highest vaccination rate is HALIM PERDANA KUSUMAH (55.24%).</span>
<span id="cb118-762"><a href="#cb118-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-763"><a href="#cb118-763" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Sub-districts with lower vaccination rates can try to learn/adopt strategies from sub districts with higher vaccination rates' to increase their own vaccination rates.</span>
<span id="cb118-764"><a href="#cb118-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-765"><a href="#cb118-765" aria-hidden="true" tabindex="-1"></a>The code chunk below is a map of vaccination rates in June 2022.</span>
<span id="cb118-766"><a href="#cb118-766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-769"><a href="#cb118-769" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-770"><a href="#cb118-770" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb118-771"><a href="#cb118-771" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(vr)<span class="sc">+</span></span>
<span id="cb118-772"><a href="#cb118-772" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(<span class="st">"2022-06-01"</span>, </span>
<span id="cb118-773"><a href="#cb118-773" aria-hidden="true" tabindex="-1"></a>            <span class="at">n=</span> <span class="dv">6</span>,</span>
<span id="cb118-774"><a href="#cb118-774" aria-hidden="true" tabindex="-1"></a>            <span class="at">style =</span> <span class="st">"cont"</span>,</span>
<span id="cb118-775"><a href="#cb118-775" aria-hidden="true" tabindex="-1"></a>            <span class="at">title =</span> <span class="st">"Vaccination Rate(%)"</span>,</span>
<span id="cb118-776"><a href="#cb118-776" aria-hidden="true" tabindex="-1"></a>            <span class="at">palette =</span> <span class="st">"YlGn"</span>,</span>
<span id="cb118-777"><a href="#cb118-777" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb118-778"><a href="#cb118-778" aria-hidden="true" tabindex="-1"></a>    <span class="co">#tm_text("SUBDISTRICT")+</span></span>
<span id="cb118-779"><a href="#cb118-779" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Vaccination Rates in June 2022"</span>,</span>
<span id="cb118-780"><a href="#cb118-780" aria-hidden="true" tabindex="-1"></a>              <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb118-781"><a href="#cb118-781" aria-hidden="true" tabindex="-1"></a>              <span class="at">main.title.size =</span> <span class="dv">1</span>,</span>
<span id="cb118-782"><a href="#cb118-782" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.height =</span> <span class="fl">0.5</span>, </span>
<span id="cb118-783"><a href="#cb118-783" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.width =</span> <span class="fl">0.4</span>,</span>
<span id="cb118-784"><a href="#cb118-784" aria-hidden="true" tabindex="-1"></a>              <span class="at">frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb118-785"><a href="#cb118-785" aria-hidden="true" tabindex="-1"></a>              ) <span class="sc">+</span></span>
<span id="cb118-786"><a href="#cb118-786" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb118-787"><a href="#cb118-787" aria-hidden="true" tabindex="-1"></a>    <span class="co">#+ tm_view(set.zoom.limits = c(10, 14),</span></span>
<span id="cb118-788"><a href="#cb118-788" aria-hidden="true" tabindex="-1"></a>            <span class="co">#view.legend.position = c("right","bottom"))</span></span>
<span id="cb118-789"><a href="#cb118-789" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-790"><a href="#cb118-790" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-791"><a href="#cb118-791" aria-hidden="true" tabindex="-1"></a>Insights (as compared to July 2021):</span>
<span id="cb118-792"><a href="#cb118-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-793"><a href="#cb118-793" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>The sub-district with the lowest vaccination rate is no longer CIPINANG BESAR UTARA(81.79%) but KEBON MELATI (78.13%). However, the lowest vaccination rate in June 2022 is still much higher than the the highest vaccination rate in July 2021 (55.24%).</span>
<span id="cb118-794"><a href="#cb118-794" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-795"><a href="#cb118-795" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>The sub-district with highest vaccination rate is the same, HALIM PERDANA KUSUMAH (89.76%).</span>
<span id="cb118-796"><a href="#cb118-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-797"><a href="#cb118-797" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>The bottom half sub-districts tend to have a higher vaccination rate than the top half sub-districts.</span>
<span id="cb118-798"><a href="#cb118-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-799"><a href="#cb118-799" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>Thus, we can infer that within a span of 1 year, the vaccination rates across the sub-districts in Jakarta have increased.</span>
<span id="cb118-800"><a href="#cb118-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-801"><a href="#cb118-801" aria-hidden="true" tabindex="-1"></a>The code chunk below plots the vaccination rate across the our study period of July 2021 to June 2022. The data is classified using manually. The breakpoints are 20, 40, 60, 80, 100.</span>
<span id="cb118-802"><a href="#cb118-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-805"><a href="#cb118-805" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-806"><a href="#cb118-806" aria-hidden="true" tabindex="-1"></a>rate_cols <span class="ot">&lt;-</span> <span class="fu">colnames</span>(<span class="fu">st_set_geometry</span>(vr[<span class="dv">2</span><span class="sc">:</span><span class="dv">13</span>], <span class="cn">NULL</span>))</span>
<span id="cb118-807"><a href="#cb118-807" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-808"><a href="#cb118-808" aria-hidden="true" tabindex="-1"></a>map_list <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">"list"</span>, <span class="at">length =</span> <span class="fu">length</span>(rate_cols))</span>
<span id="cb118-809"><a href="#cb118-809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-810"><a href="#cb118-810" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(rate_cols)) {</span>
<span id="cb118-811"><a href="#cb118-811" aria-hidden="true" tabindex="-1"></a>  cmap <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(vr)<span class="sc">+</span></span>
<span id="cb118-812"><a href="#cb118-812" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(rate_cols[[i]], </span>
<span id="cb118-813"><a href="#cb118-813" aria-hidden="true" tabindex="-1"></a>            <span class="at">n=</span> <span class="dv">6</span>,</span>
<span id="cb118-814"><a href="#cb118-814" aria-hidden="true" tabindex="-1"></a>            <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">100</span>),</span>
<span id="cb118-815"><a href="#cb118-815" aria-hidden="true" tabindex="-1"></a>            <span class="co">#style = "cont",</span></span>
<span id="cb118-816"><a href="#cb118-816" aria-hidden="true" tabindex="-1"></a>            <span class="at">title =</span> <span class="st">"Vaccination Rate(%)"</span>,</span>
<span id="cb118-817"><a href="#cb118-817" aria-hidden="true" tabindex="-1"></a>            <span class="at">palette =</span> <span class="st">"YlGn"</span>,</span>
<span id="cb118-818"><a href="#cb118-818" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb118-819"><a href="#cb118-819" aria-hidden="true" tabindex="-1"></a>    <span class="co">#tm_text("SUBDISTRICT")+</span></span>
<span id="cb118-820"><a href="#cb118-820" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(</span>
<span id="cb118-821"><a href="#cb118-821" aria-hidden="true" tabindex="-1"></a>              <span class="at">panel.show =</span> <span class="cn">TRUE</span>,</span>
<span id="cb118-822"><a href="#cb118-822" aria-hidden="true" tabindex="-1"></a>              <span class="at">panel.labels =</span> rate_cols[[i]],</span>
<span id="cb118-823"><a href="#cb118-823" aria-hidden="true" tabindex="-1"></a>              <span class="at">panel.label.color =</span> <span class="st">'gray12'</span>,</span>
<span id="cb118-824"><a href="#cb118-824" aria-hidden="true" tabindex="-1"></a>              <span class="at">panel.label.size =</span> <span class="fl">0.8</span>,</span>
<span id="cb118-825"><a href="#cb118-825" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.show =</span> <span class="cn">FALSE</span></span>
<span id="cb118-826"><a href="#cb118-826" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb118-827"><a href="#cb118-827" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb118-828"><a href="#cb118-828" aria-hidden="true" tabindex="-1"></a>  map_list[[i]] <span class="ot">&lt;-</span> cmap</span>
<span id="cb118-829"><a href="#cb118-829" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb118-830"><a href="#cb118-830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-831"><a href="#cb118-831" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(map_list, <span class="at">ncol =</span> <span class="dv">4</span>)</span>
<span id="cb118-832"><a href="#cb118-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-833"><a href="#cb118-833" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-834"><a href="#cb118-834" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-835"><a href="#cb118-835" aria-hidden="true" tabindex="-1"></a>Insights:</span>
<span id="cb118-836"><a href="#cb118-836" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-837"><a href="#cb118-837" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>We can actually see Jakarta's vaccination rate increase steadily across the period of July 2021 to February 2022 as more sub-districts shift from a lighter shade of green to a darker one.</span>
<span id="cb118-838"><a href="#cb118-838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-839"><a href="#cb118-839" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>However, from February 2022 to June 2022, there is not much difference in the vaccination rates across all sub-districts.</span>
<span id="cb118-840"><a href="#cb118-840" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-841"><a href="#cb118-841" aria-hidden="true" tabindex="-1"></a><span class="fu"># 6. Local Gi\* Analysis</span></span>
<span id="cb118-842"><a href="#cb118-842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-843"><a href="#cb118-843" aria-hidden="true" tabindex="-1"></a>To detect hot spot areas with high vaccination rates, and cold spot areas with high vaccination rates in Jakarta, we will be using Getis-Ord Gi<span class="sc">\*</span> statistics.</span>
<span id="cb118-844"><a href="#cb118-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-845"><a href="#cb118-845" aria-hidden="true" tabindex="-1"></a>For Interpretation of Gi<span class="sc">\*</span> values:</span>
<span id="cb118-846"><a href="#cb118-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-847"><a href="#cb118-847" aria-hidden="true" tabindex="-1"></a>$Gi∗&gt;0$ : indicates grouping of areas with values higher than average</span>
<span id="cb118-848"><a href="#cb118-848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-849"><a href="#cb118-849" aria-hidden="true" tabindex="-1"></a>$Gi∗&lt;0$ : indicates grouping of areas with values lower than average</span>
<span id="cb118-850"><a href="#cb118-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-851"><a href="#cb118-851" aria-hidden="true" tabindex="-1"></a>A larger magnitude represents a greater intensity of grouping.</span>
<span id="cb118-852"><a href="#cb118-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-853"><a href="#cb118-853" aria-hidden="true" tabindex="-1"></a>For significant Gi<span class="sc">\*</span> statistic values, two spatial associations can be inferred:</span>
<span id="cb118-854"><a href="#cb118-854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-855"><a href="#cb118-855" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Hot spot areas:** where $Gi∗&gt;0$, significant and positive, if location is associated with relatively high values of the surrounding locations.</span>
<span id="cb118-856"><a href="#cb118-856" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-857"><a href="#cb118-857" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Cold spot areas:** where $Gi∗&lt;0$, significant and negative, if location is associated with relatively low values in surrounding locations</span>
<span id="cb118-858"><a href="#cb118-858" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-859"><a href="#cb118-859" aria-hidden="true" tabindex="-1"></a><span class="fu">## 6.1 Computing local Gi\* Values of Monthly Vaccination Rates</span></span>
<span id="cb118-860"><a href="#cb118-860" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-861"><a href="#cb118-861" aria-hidden="true" tabindex="-1"></a>Before we compute our local Gi<span class="sc">\*</span>, I would like to rearange our data for better clarity. The data will be organised in the following format: Date, Sub_District and Vaccination_Rate.</span>
<span id="cb118-862"><a href="#cb118-862" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-865"><a href="#cb118-865" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-866"><a href="#cb118-866" aria-hidden="true" tabindex="-1"></a><span class="co">#Extract relevant columns</span></span>
<span id="cb118-867"><a href="#cb118-867" aria-hidden="true" tabindex="-1"></a>copy_cjkt_df <span class="ot">&lt;-</span> combined_jakarta[<span class="dv">8</span><span class="sc">:</span><span class="dv">14</span>]</span>
<span id="cb118-868"><a href="#cb118-868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-869"><a href="#cb118-869" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate vaccination rates</span></span>
<span id="cb118-870"><a href="#cb118-870" aria-hidden="true" tabindex="-1"></a>copy_cjkt_df <span class="ot">&lt;-</span> copy_cjkt_df <span class="sc">%&gt;%</span> </span>
<span id="cb118-871"><a href="#cb118-871" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb118-872"><a href="#cb118-872" aria-hidden="true" tabindex="-1"></a>    <span class="at">VACCINATION_RATES =</span> (TARGET <span class="sc">-</span> YET_TO_BE_VACINATED)<span class="sc">/</span>TARGET <span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb118-873"><a href="#cb118-873" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb118-874"><a href="#cb118-874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-875"><a href="#cb118-875" aria-hidden="true" tabindex="-1"></a><span class="co">#drop not impt col</span></span>
<span id="cb118-876"><a href="#cb118-876" aria-hidden="true" tabindex="-1"></a>copy_cjkt_df <span class="ot">=</span> <span class="fu">subset</span>(copy_cjkt_df, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(Total_Population,CITY_AREA,DISTRICT,TARGET,YET_TO_BE_VACINATED) )</span>
<span id="cb118-877"><a href="#cb118-877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-878"><a href="#cb118-878" aria-hidden="true" tabindex="-1"></a><span class="co">#for clarity, reorder the columns to data, subdistrict, vaccination rate</span></span>
<span id="cb118-879"><a href="#cb118-879" aria-hidden="true" tabindex="-1"></a>copy_cjkt_df<span class="ot">&lt;-</span> copy_cjkt_df <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(VACCINATION_RATES, <span class="at">.after=</span>Sub_District)</span>
<span id="cb118-880"><a href="#cb118-880" aria-hidden="true" tabindex="-1"></a>copy_cjkt_df<span class="ot">&lt;-</span> copy_cjkt_df <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(TIME_PERIOD)</span>
<span id="cb118-881"><a href="#cb118-881" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-882"><a href="#cb118-882" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(copy_cjkt_df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Date"</span>, <span class="st">"Sub_District"</span>,<span class="st">"Vaccination_Rate"</span>,<span class="st">"geometry"</span>)</span>
<span id="cb118-883"><a href="#cb118-883" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-884"><a href="#cb118-884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-887"><a href="#cb118-887" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-888"><a href="#cb118-888" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(copy_cjkt_df)</span>
<span id="cb118-889"><a href="#cb118-889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-890"><a href="#cb118-890" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-891"><a href="#cb118-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-892"><a href="#cb118-892" aria-hidden="true" tabindex="-1"></a>The code chunk below creates a time series cube using <span class="co">[</span><span class="ot">spacetime()</span><span class="co">](https://cran.r-project.org/web/packages/spacetime/index.html)</span> of sfdep package:</span>
<span id="cb118-893"><a href="#cb118-893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-896"><a href="#cb118-896" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-897"><a href="#cb118-897" aria-hidden="true" tabindex="-1"></a>vr_st<span class="ot">&lt;-</span> <span class="fu">as_spacetime</span>(copy_cjkt_df,</span>
<span id="cb118-898"><a href="#cb118-898" aria-hidden="true" tabindex="-1"></a>                                <span class="at">.loc_col =</span> <span class="st">"Sub_District"</span>,</span>
<span id="cb118-899"><a href="#cb118-899" aria-hidden="true" tabindex="-1"></a>                                <span class="at">.time_col =</span> <span class="st">"Date"</span>)</span>
<span id="cb118-900"><a href="#cb118-900" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-901"><a href="#cb118-901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-902"><a href="#cb118-902" aria-hidden="true" tabindex="-1"></a>By using <span class="co">[</span><span class="ot">is_spacetime_cube()</span><span class="co">](https://gisgeography.com/space-time-cubes/#:~:text=Space%2Dtime%20cubes%20show%20how,bottom%20cubes%20have%20older%20timestamps.)</span> of sfdep package, we can check if vacc_rate_st is indeed a space-time cube object. If it returns TRUE, vacc_rate_st is a space-time cube object.</span>
<span id="cb118-903"><a href="#cb118-903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-906"><a href="#cb118-906" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-907"><a href="#cb118-907" aria-hidden="true" tabindex="-1"></a><span class="fu">is_spacetime_cube</span>(vr_st)</span>
<span id="cb118-908"><a href="#cb118-908" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-909"><a href="#cb118-909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-910"><a href="#cb118-910" aria-hidden="true" tabindex="-1"></a>To compute the local Gi<span class="sc">\*</span> statistics, we need to derive the spatial weights first:</span>
<span id="cb118-911"><a href="#cb118-911" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-914"><a href="#cb118-914" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-915"><a href="#cb118-915" aria-hidden="true" tabindex="-1"></a>vr_nb <span class="ot">&lt;-</span> vr_st <span class="sc">%&gt;%</span></span>
<span id="cb118-916"><a href="#cb118-916" aria-hidden="true" tabindex="-1"></a>  <span class="fu">activate</span>(<span class="st">"geometry"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb118-917"><a href="#cb118-917" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nb =</span> <span class="fu">include_self</span>(<span class="fu">st_contiguity</span>(geometry)),</span>
<span id="cb118-918"><a href="#cb118-918" aria-hidden="true" tabindex="-1"></a>         <span class="at">wt =</span> <span class="fu">st_inverse_distance</span>(nb, geometry,</span>
<span id="cb118-919"><a href="#cb118-919" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">scale=</span><span class="dv">1</span>,</span>
<span id="cb118-920"><a href="#cb118-920" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">alpha=</span><span class="dv">1</span>),</span>
<span id="cb118-921"><a href="#cb118-921" aria-hidden="true" tabindex="-1"></a>         <span class="at">.before=</span><span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb118-922"><a href="#cb118-922" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_wts</span>(<span class="st">"wt"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb118-923"><a href="#cb118-923" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_nbs</span>(<span class="st">"nb"</span>)</span>
<span id="cb118-924"><a href="#cb118-924" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-925"><a href="#cb118-925" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-926"><a href="#cb118-926" aria-hidden="true" tabindex="-1"></a>Our df now has neigbours (nb) and weights(wt) for each date.</span>
<span id="cb118-927"><a href="#cb118-927" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-930"><a href="#cb118-930" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-931"><a href="#cb118-931" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vr_nb)</span>
<span id="cb118-932"><a href="#cb118-932" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-933"><a href="#cb118-933" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-934"><a href="#cb118-934" aria-hidden="true" tabindex="-1"></a>Before computing Gi<span class="sc">\*</span>, we need to set the seed value so that the results of the simulations will be reproducible and constant. I willbe using seed 123.</span>
<span id="cb118-935"><a href="#cb118-935" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-938"><a href="#cb118-938" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-939"><a href="#cb118-939" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb118-940"><a href="#cb118-940" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-941"><a href="#cb118-941" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-942"><a href="#cb118-942" aria-hidden="true" tabindex="-1"></a>The code chunk below computes Gi<span class="sc">\*</span> for each location, grouping by Date and using <span class="co">[</span><span class="ot">local_gstar_perm()</span><span class="co">](https://sfdep.josiahparry.com/reference/local_gstar.html)</span> of sfdep package:</span>
<span id="cb118-943"><a href="#cb118-943" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-946"><a href="#cb118-946" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-947"><a href="#cb118-947" aria-hidden="true" tabindex="-1"></a>gi_stars <span class="ot">&lt;-</span> vr_nb <span class="sc">%&gt;%</span></span>
<span id="cb118-948"><a href="#cb118-948" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Date) <span class="sc">%&gt;%</span></span>
<span id="cb118-949"><a href="#cb118-949" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gi_star =</span> <span class="fu">local_gstar_perm</span>(</span>
<span id="cb118-950"><a href="#cb118-950" aria-hidden="true" tabindex="-1"></a>    Vaccination_Rate, nb, wt, <span class="at">nsim=</span><span class="dv">99</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb118-951"><a href="#cb118-951" aria-hidden="true" tabindex="-1"></a>      tidyr<span class="sc">::</span><span class="fu">unnest</span>(gi_star)</span>
<span id="cb118-952"><a href="#cb118-952" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-953"><a href="#cb118-953" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-954"><a href="#cb118-954" aria-hidden="true" tabindex="-1"></a>After running 100 simulations, the code chunk below shows our newly created df.</span>
<span id="cb118-955"><a href="#cb118-955" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-958"><a href="#cb118-958" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-959"><a href="#cb118-959" aria-hidden="true" tabindex="-1"></a>gi_stars</span>
<span id="cb118-960"><a href="#cb118-960" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-961"><a href="#cb118-961" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-962"><a href="#cb118-962" aria-hidden="true" tabindex="-1"></a><span class="fu">## 6.2 Mapping of Gi\* and Monthly Vaccination Rates</span></span>
<span id="cb118-963"><a href="#cb118-963" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-964"><a href="#cb118-964" aria-hidden="true" tabindex="-1"></a>To map our local gi<span class="sc">\*</span>, we first need to include the geometry values by joining copy_cjkt_df with gi_stars.</span>
<span id="cb118-965"><a href="#cb118-965" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-968"><a href="#cb118-968" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-969"><a href="#cb118-969" aria-hidden="true" tabindex="-1"></a>combined_cjkt_gi_stars <span class="ot">&lt;-</span> copy_cjkt_df <span class="sc">%&gt;%</span></span>
<span id="cb118-970"><a href="#cb118-970" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(gi_stars)</span>
<span id="cb118-971"><a href="#cb118-971" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-972"><a href="#cb118-972" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-973"><a href="#cb118-973" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.2.1 Mapping for July 2021</span></span>
<span id="cb118-974"><a href="#cb118-974" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-975"><a href="#cb118-975" aria-hidden="true" tabindex="-1"></a>Taking a look at the Gi<span class="sc">\*</span> values and its p-value of the vaccination rates of July 2021:</span>
<span id="cb118-976"><a href="#cb118-976" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-979"><a href="#cb118-979" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-980"><a href="#cb118-980" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb118-981"><a href="#cb118-981" aria-hidden="true" tabindex="-1"></a>gi_star_map <span class="ot">=</span> <span class="fu">tm_shape</span>(<span class="fu">filter</span>(combined_cjkt_gi_stars, Date <span class="sc">==</span> <span class="st">'2021-07-01'</span>)) <span class="sc">+</span></span>
<span id="cb118-982"><a href="#cb118-982" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"gi_star"</span>) <span class="sc">+</span></span>
<span id="cb118-983"><a href="#cb118-983" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb118-984"><a href="#cb118-984" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Gi* values for vaccination rates in July 2021"</span>, <span class="at">main.title.size=</span><span class="fl">0.8</span>)</span>
<span id="cb118-985"><a href="#cb118-985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-986"><a href="#cb118-986" aria-hidden="true" tabindex="-1"></a>p_sim_map <span class="ot">=</span> <span class="fu">tm_shape</span>(<span class="fu">filter</span>(combined_cjkt_gi_stars, Date <span class="sc">==</span> <span class="st">'2021-07-01'</span>)) <span class="sc">+</span></span>
<span id="cb118-987"><a href="#cb118-987" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"p_sim"</span>, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.05</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb118-988"><a href="#cb118-988" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb118-989"><a href="#cb118-989" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"p-values of Gi* for vaccination rates in July 2021"</span>, <span class="at">main.title.size=</span><span class="fl">0.8</span>)</span>
<span id="cb118-990"><a href="#cb118-990" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-991"><a href="#cb118-991" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(gi_star_map, p_sim_map)</span>
<span id="cb118-992"><a href="#cb118-992" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-993"><a href="#cb118-993" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-996"><a href="#cb118-996" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-997"><a href="#cb118-997" aria-hidden="true" tabindex="-1"></a>psig_july2021 <span class="ot">&lt;-</span> combined_cjkt_gi_stars  <span class="sc">%&gt;%</span></span>
<span id="cb118-998"><a href="#cb118-998" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(p_sim <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">&amp;</span> Date <span class="sc">==</span> <span class="st">'2021-07-01'</span>)</span>
<span id="cb118-999"><a href="#cb118-999" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1000"><a href="#cb118-1000" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb118-1001"><a href="#cb118-1001" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(combined_cjkt_gi_stars) <span class="sc">+</span></span>
<span id="cb118-1002"><a href="#cb118-1002" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb118-1003"><a href="#cb118-1003" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb118-1004"><a href="#cb118-1004" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(psig_july2021) <span class="sc">+</span></span>
<span id="cb118-1005"><a href="#cb118-1005" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"gi_star"</span>) <span class="sc">+</span> </span>
<span id="cb118-1006"><a href="#cb118-1006" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb118-1007"><a href="#cb118-1007" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Hot and Cold Spot Areas of Vaccination Rates in July 2021"</span>, <span class="at">main.title.size =</span> <span class="fl">0.8</span>)</span>
<span id="cb118-1008"><a href="#cb118-1008" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1009"><a href="#cb118-1009" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1010"><a href="#cb118-1010" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-1011"><a href="#cb118-1011" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1012"><a href="#cb118-1012" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.2.1 Mapping for 4 Time Periods</span></span>
<span id="cb118-1013"><a href="#cb118-1013" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1014"><a href="#cb118-1014" aria-hidden="true" tabindex="-1"></a>To compare the hot and cold spot over our study period, I will break the period into 4 quarters which are July 2021, October 2021, February 2022, June 2022.</span>
<span id="cb118-1015"><a href="#cb118-1015" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1018"><a href="#cb118-1018" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-1019"><a href="#cb118-1019" aria-hidden="true" tabindex="-1"></a><span class="co"># july 2021</span></span>
<span id="cb118-1020"><a href="#cb118-1020" aria-hidden="true" tabindex="-1"></a>psig_july <span class="ot">&lt;-</span> combined_cjkt_gi_stars  <span class="sc">%&gt;%</span></span>
<span id="cb118-1021"><a href="#cb118-1021" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter significant values(&lt;0.05) and the according date</span></span>
<span id="cb118-1022"><a href="#cb118-1022" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(p_sim <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">&amp;</span> Date <span class="sc">==</span> <span class="st">'2021-07-01'</span>)</span>
<span id="cb118-1023"><a href="#cb118-1023" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1024"><a href="#cb118-1024" aria-hidden="true" tabindex="-1"></a><span class="co">#tmap_mode("plot")</span></span>
<span id="cb118-1025"><a href="#cb118-1025" aria-hidden="true" tabindex="-1"></a>hcs_july2021<span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(combined_cjkt_gi_stars) <span class="sc">+</span></span>
<span id="cb118-1026"><a href="#cb118-1026" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb118-1027"><a href="#cb118-1027" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb118-1028"><a href="#cb118-1028" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(psig_july) <span class="sc">+</span></span>
<span id="cb118-1029"><a href="#cb118-1029" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"gi_star"</span>) <span class="sc">+</span> </span>
<span id="cb118-1030"><a href="#cb118-1030" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb118-1031"><a href="#cb118-1031" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_layout</span>(</span>
<span id="cb118-1032"><a href="#cb118-1032" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title=</span><span class="st">"Hot and Cold Spot Areas of Vaccination Rates in July 2021"</span>,</span>
<span id="cb118-1033"><a href="#cb118-1033" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title.size =</span> <span class="fl">0.5</span>)</span>
<span id="cb118-1034"><a href="#cb118-1034" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1035"><a href="#cb118-1035" aria-hidden="true" tabindex="-1"></a><span class="co"># october 2021</span></span>
<span id="cb118-1036"><a href="#cb118-1036" aria-hidden="true" tabindex="-1"></a>psig_oct <span class="ot">&lt;-</span> combined_cjkt_gi_stars  <span class="sc">%&gt;%</span></span>
<span id="cb118-1037"><a href="#cb118-1037" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter significant values(&lt;0.05) and the according date</span></span>
<span id="cb118-1038"><a href="#cb118-1038" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(p_sim <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">&amp;</span> Date <span class="sc">==</span> <span class="st">'2021-10-01'</span>)</span>
<span id="cb118-1039"><a href="#cb118-1039" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1040"><a href="#cb118-1040" aria-hidden="true" tabindex="-1"></a>hcs_oct2021 <span class="ot">&lt;-</span><span class="fu">tm_shape</span>(combined_cjkt_gi_stars) <span class="sc">+</span></span>
<span id="cb118-1041"><a href="#cb118-1041" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb118-1042"><a href="#cb118-1042" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb118-1043"><a href="#cb118-1043" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(psig_oct) <span class="sc">+</span></span>
<span id="cb118-1044"><a href="#cb118-1044" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"gi_star"</span>) <span class="sc">+</span> </span>
<span id="cb118-1045"><a href="#cb118-1045" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb118-1046"><a href="#cb118-1046" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_layout</span>(</span>
<span id="cb118-1047"><a href="#cb118-1047" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title=</span><span class="st">"Hot and Cold Spot Areas of Vaccination Rates in October 2021"</span>,</span>
<span id="cb118-1048"><a href="#cb118-1048" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title.size =</span> <span class="fl">0.5</span>)</span>
<span id="cb118-1049"><a href="#cb118-1049" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1050"><a href="#cb118-1050" aria-hidden="true" tabindex="-1"></a><span class="co">#february 2022</span></span>
<span id="cb118-1051"><a href="#cb118-1051" aria-hidden="true" tabindex="-1"></a>psig_feb <span class="ot">&lt;-</span> combined_cjkt_gi_stars  <span class="sc">%&gt;%</span></span>
<span id="cb118-1052"><a href="#cb118-1052" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter significant values(&lt;0.05) and the according date</span></span>
<span id="cb118-1053"><a href="#cb118-1053" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(p_sim <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">&amp;</span> Date <span class="sc">==</span> <span class="st">'2022-02-01'</span>)</span>
<span id="cb118-1054"><a href="#cb118-1054" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1055"><a href="#cb118-1055" aria-hidden="true" tabindex="-1"></a>hcs_feb2022<span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(combined_cjkt_gi_stars) <span class="sc">+</span></span>
<span id="cb118-1056"><a href="#cb118-1056" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb118-1057"><a href="#cb118-1057" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb118-1058"><a href="#cb118-1058" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(psig_feb) <span class="sc">+</span></span>
<span id="cb118-1059"><a href="#cb118-1059" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"gi_star"</span>) <span class="sc">+</span> </span>
<span id="cb118-1060"><a href="#cb118-1060" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb118-1061"><a href="#cb118-1061" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_layout</span>(</span>
<span id="cb118-1062"><a href="#cb118-1062" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title=</span><span class="st">"Hot and Cold Spot Areas of Vaccination Rates in February 2022"</span>,</span>
<span id="cb118-1063"><a href="#cb118-1063" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title.size =</span> <span class="fl">0.5</span>)</span>
<span id="cb118-1064"><a href="#cb118-1064" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1065"><a href="#cb118-1065" aria-hidden="true" tabindex="-1"></a><span class="co"># june 2022</span></span>
<span id="cb118-1066"><a href="#cb118-1066" aria-hidden="true" tabindex="-1"></a>psig_june <span class="ot">&lt;-</span> combined_cjkt_gi_stars  <span class="sc">%&gt;%</span></span>
<span id="cb118-1067"><a href="#cb118-1067" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter significant values(&lt;0.05) and the according date</span></span>
<span id="cb118-1068"><a href="#cb118-1068" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(p_sim <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">&amp;</span> Date <span class="sc">==</span> <span class="st">'2022-06-01'</span>)</span>
<span id="cb118-1069"><a href="#cb118-1069" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1070"><a href="#cb118-1070" aria-hidden="true" tabindex="-1"></a>hcs_june2022 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(combined_cjkt_gi_stars) <span class="sc">+</span></span>
<span id="cb118-1071"><a href="#cb118-1071" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb118-1072"><a href="#cb118-1072" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb118-1073"><a href="#cb118-1073" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(psig_june) <span class="sc">+</span></span>
<span id="cb118-1074"><a href="#cb118-1074" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"gi_star"</span>) <span class="sc">+</span> </span>
<span id="cb118-1075"><a href="#cb118-1075" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb118-1076"><a href="#cb118-1076" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_layout</span>(</span>
<span id="cb118-1077"><a href="#cb118-1077" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title=</span><span class="st">"Hot and Cold Spot Areas of Vaccination Rates in June 2022"</span>,</span>
<span id="cb118-1078"><a href="#cb118-1078" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title.size =</span> <span class="fl">0.5</span>)</span>
<span id="cb118-1079"><a href="#cb118-1079" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1080"><a href="#cb118-1080" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(hcs_july2021,hcs_oct2021,hcs_feb2022,hcs_june2022)</span>
<span id="cb118-1081"><a href="#cb118-1081" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-1082"><a href="#cb118-1082" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1083"><a href="#cb118-1083" aria-hidden="true" tabindex="-1"></a>The code chunk below creates a function to check the sub-district with the highest and lowest siginificant gi<span class="sc">\*</span> value for July 2021, October 2021, February 2022, June 2022.</span>
<span id="cb118-1084"><a href="#cb118-1084" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1087"><a href="#cb118-1087" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-1088"><a href="#cb118-1088" aria-hidden="true" tabindex="-1"></a>get_significant_locations <span class="ot">&lt;-</span> <span class="cf">function</span>(date) {</span>
<span id="cb118-1089"><a href="#cb118-1089" aria-hidden="true" tabindex="-1"></a>  <span class="co">#print(paste("Sub-Districts with p-value of Gi* &lt; 0.05 in", month))</span></span>
<span id="cb118-1090"><a href="#cb118-1090" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb118-1091"><a href="#cb118-1091" aria-hidden="true" tabindex="-1"></a>  <span class="co">#sub district name</span></span>
<span id="cb118-1092"><a href="#cb118-1092" aria-hidden="true" tabindex="-1"></a>  sub_d<span class="ot">&lt;-</span> <span class="fu">filter</span>(combined_cjkt_gi_stars, Date <span class="sc">==</span> date <span class="sc">&amp;</span> p_sim<span class="sc">&lt;</span><span class="fl">0.05</span>)<span class="sc">$</span>Sub_District</span>
<span id="cb118-1093"><a href="#cb118-1093" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb118-1094"><a href="#cb118-1094" aria-hidden="true" tabindex="-1"></a>  <span class="co">#gi star value</span></span>
<span id="cb118-1095"><a href="#cb118-1095" aria-hidden="true" tabindex="-1"></a>  gi_star_value <span class="ot">&lt;-</span> <span class="fu">filter</span>(combined_cjkt_gi_stars, Date <span class="sc">==</span> date <span class="sc">&amp;</span> p_sim<span class="sc">&lt;</span><span class="fl">0.05</span>)<span class="sc">$</span>gi_star</span>
<span id="cb118-1096"><a href="#cb118-1096" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1097"><a href="#cb118-1097" aria-hidden="true" tabindex="-1"></a>  temp <span class="ot">&lt;-</span><span class="fu">data.frame</span>(sub_d,gi_star_value)</span>
<span id="cb118-1098"><a href="#cb118-1098" aria-hidden="true" tabindex="-1"></a>  <span class="co">#print(temp)</span></span>
<span id="cb118-1099"><a href="#cb118-1099" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb118-1100"><a href="#cb118-1100" aria-hidden="true" tabindex="-1"></a>  max_gi_sd<span class="ot">&lt;-</span> temp<span class="sc">$</span>sub_d[temp<span class="sc">$</span>gi_star_value <span class="sc">==</span><span class="fu">max</span>(temp<span class="sc">$</span>gi_star_value)]</span>
<span id="cb118-1101"><a href="#cb118-1101" aria-hidden="true" tabindex="-1"></a>  min_gi_sd<span class="ot">&lt;-</span> temp<span class="sc">$</span>sub_d[temp<span class="sc">$</span>gi_star_value <span class="sc">==</span><span class="fu">min</span>(temp<span class="sc">$</span>gi_star_value)]</span>
<span id="cb118-1102"><a href="#cb118-1102" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb118-1103"><a href="#cb118-1103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Date: "</span>, date))</span>
<span id="cb118-1104"><a href="#cb118-1104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"For siginificant sub-district with the"</span>)</span>
<span id="cb118-1105"><a href="#cb118-1105" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"highest gi* value: "</span>,max_gi_sd))</span>
<span id="cb118-1106"><a href="#cb118-1106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"lowest gi* value: "</span>,min_gi_sd))</span>
<span id="cb118-1107"><a href="#cb118-1107" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb118-1108"><a href="#cb118-1108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1109"><a href="#cb118-1109" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2021-07-01"</span>)</span>
<span id="cb118-1110"><a href="#cb118-1110" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2021-10-01"</span>)</span>
<span id="cb118-1111"><a href="#cb118-1111" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2022-02-01"</span>)</span>
<span id="cb118-1112"><a href="#cb118-1112" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2022-06-01"</span>)</span>
<span id="cb118-1113"><a href="#cb118-1113" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-1114"><a href="#cb118-1114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1115"><a href="#cb118-1115" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.2.3 Statistical Conclusion</span></span>
<span id="cb118-1116"><a href="#cb118-1116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1117"><a href="#cb118-1117" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Based on our maps, areas colored "red" are significant hot spots, while areas colored "green" are significant cold spots.</span>
<span id="cb118-1118"><a href="#cb118-1118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1119"><a href="#cb118-1119" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Overall, we can observe that there is spatial clustering in our data. From July 2021 to June 2022, the no. of hot and cold spot areas have changed and that the intensity of Gi<span class="sc">\*</span> value has changed. The lowest range of Gi<span class="sc">\*</span> value decreased from -4 to -2 to -8 to -6.</span>
<span id="cb118-1120"><a href="#cb118-1120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1121"><a href="#cb118-1121" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>In October 2021, there is an unusual large number of hot and cold spots which signifies 5 grouping of hot spot areas with values higher than average and 7 significant groupings of cold spot areas with values lower than average.</span>
<span id="cb118-1122"><a href="#cb118-1122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1123"><a href="#cb118-1123" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>Hot Spots Analysis: The distribution of the hots pots started from 6 clusters (most of it was around the eastern side of Jakarta) to only 1 cluster in the middle of Jakarta from July 2021 to June 2022.</span>
<span id="cb118-1124"><a href="#cb118-1124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1125"><a href="#cb118-1125" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>Cold Spots Analysis: The distribution of the cold spots appeared randomly and shifted towards the southern area of Jakarta from July 2021 to June 2022.</span>
<span id="cb118-1126"><a href="#cb118-1126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1127"><a href="#cb118-1127" aria-hidden="true" tabindex="-1"></a><span class="fu"># 7. Emerging Hot Spot Analysis(EHSA)</span></span>
<span id="cb118-1128"><a href="#cb118-1128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1129"><a href="#cb118-1129" aria-hidden="true" tabindex="-1"></a><span class="fu">## 7.1 Mann-Kendall Test</span></span>
<span id="cb118-1130"><a href="#cb118-1130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1131"><a href="#cb118-1131" aria-hidden="true" tabindex="-1"></a>We will be conducting the Mann-Kendall Test using the spatio-temporal local Gi<span class="sc">\*</span> values on 3 Sub-Districts which are:</span>
<span id="cb118-1132"><a href="#cb118-1132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1133"><a href="#cb118-1133" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>KEBON KACANG</span>
<span id="cb118-1134"><a href="#cb118-1134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1135"><a href="#cb118-1135" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>SRENGSENG SAWAH</span>
<span id="cb118-1136"><a href="#cb118-1136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1137"><a href="#cb118-1137" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>HALIM PERDANA KUSUMAH</span>
<span id="cb118-1138"><a href="#cb118-1138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1139"><a href="#cb118-1139" aria-hidden="true" tabindex="-1"></a>**What is the Mann-Kendall test?**</span>
<span id="cb118-1140"><a href="#cb118-1140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1141"><a href="#cb118-1141" aria-hidden="true" tabindex="-1"></a>In a <span class="co">[</span><span class="ot">Mann-Kendall Test</span><span class="co">](https://www.statology.org/mann-kendall-trend-test-r/#:~:text=A%20Mann%2DKendall%20Trend%20Test%20is%20used%20to%20determine%20whether,trend%20present%20in%20the%20data.)</span>, it is used to determine whether or not a trend exists in time series data. It is a non-parametric test, meaning there is no underlying assumption made about the normality of the data.</span>
<span id="cb118-1142"><a href="#cb118-1142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1143"><a href="#cb118-1143" aria-hidden="true" tabindex="-1"></a>The hypotheses for the test are as follows:</span>
<span id="cb118-1144"><a href="#cb118-1144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1145"><a href="#cb118-1145" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>H0 (null hypothesis): There is no trend present in the data.</span>
<span id="cb118-1146"><a href="#cb118-1146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1147"><a href="#cb118-1147" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>HA (alternative hypothesis): A trend is present in the data. (This could be a positive or negative trend)</span>
<span id="cb118-1148"><a href="#cb118-1148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1149"><a href="#cb118-1149" aria-hidden="true" tabindex="-1"></a>If the p-value of the test is lower than the significance level of 0.05, then there is statistically significant evidence that a trend is present in the time series data.</span>
<span id="cb118-1150"><a href="#cb118-1150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1151"><a href="#cb118-1151" aria-hidden="true" tabindex="-1"></a>This method mainly gives 3 type of <span class="co">[</span><span class="ot">information:</span><span class="co">](https://acp.copernicus.org/preprints/acp-2019-109/acp-2019-109-AC2-supplement.pdf)</span></span>
<span id="cb118-1152"><a href="#cb118-1152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1153"><a href="#cb118-1153" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Tau: varies between -1 and 1; it is positive when the trend increases and negative when the trend decreases</span>
<span id="cb118-1154"><a href="#cb118-1154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1155"><a href="#cb118-1155" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The Sen slope: which estimates the overall slope of the time series. This slope corresponds to the median of all the slopes calculated between each pair of points in the series.</span>
<span id="cb118-1156"><a href="#cb118-1156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1157"><a href="#cb118-1157" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The significance, which represents the threshold for which the hypothesis that there is no trend is accepted. The trend is statistically significant when the p-value is less than 0.05.</span>
<span id="cb118-1158"><a href="#cb118-1158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1159"><a href="#cb118-1159" aria-hidden="true" tabindex="-1"></a><span class="fu">### 7.1.1 For KEBON KACANG</span></span>
<span id="cb118-1160"><a href="#cb118-1160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1163"><a href="#cb118-1163" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-1164"><a href="#cb118-1164" aria-hidden="true" tabindex="-1"></a>KEBON_KACANG <span class="ot">&lt;-</span> gi_stars <span class="sc">%&gt;%</span> </span>
<span id="cb118-1165"><a href="#cb118-1165" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb118-1166"><a href="#cb118-1166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sub_District <span class="sc">==</span> <span class="st">"KEBON KACANG"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb118-1167"><a href="#cb118-1167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sub_District, Date, gi_star)</span>
<span id="cb118-1168"><a href="#cb118-1168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1169"><a href="#cb118-1169" aria-hidden="true" tabindex="-1"></a>KEBON_KACANG_plot<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> KEBON_KACANG, </span>
<span id="cb118-1170"><a href="#cb118-1170" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Date, </span>
<span id="cb118-1171"><a href="#cb118-1171" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> gi_star)) <span class="sc">+</span></span>
<span id="cb118-1172"><a href="#cb118-1172" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb118-1173"><a href="#cb118-1173" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span>
<span id="cb118-1174"><a href="#cb118-1174" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb118-1175"><a href="#cb118-1175" aria-hidden="true" tabindex="-1"></a>  plot<span class="ot">&lt;-</span> KEBON_KACANG_plot<span class="sc">+</span><span class="fu">ggtitle</span>(<span class="st">"Local Gi* values of KEBON KACANG"</span>)</span>
<span id="cb118-1176"><a href="#cb118-1176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1177"><a href="#cb118-1177" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplotly</span>(plot)  </span>
<span id="cb118-1178"><a href="#cb118-1178" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-1179"><a href="#cb118-1179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1182"><a href="#cb118-1182" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-1183"><a href="#cb118-1183" aria-hidden="true" tabindex="-1"></a>KEBON_KACANG <span class="sc">%&gt;%</span></span>
<span id="cb118-1184"><a href="#cb118-1184" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mk =</span> <span class="fu">list</span>(</span>
<span id="cb118-1185"><a href="#cb118-1185" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unclass</span>(</span>
<span id="cb118-1186"><a href="#cb118-1186" aria-hidden="true" tabindex="-1"></a>      Kendall<span class="sc">::</span><span class="fu">MannKendall</span>(gi_star)))) <span class="sc">%&gt;%</span> </span>
<span id="cb118-1187"><a href="#cb118-1187" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">unnest_wider</span>(mk)</span>
<span id="cb118-1188"><a href="#cb118-1188" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-1189"><a href="#cb118-1189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1190"><a href="#cb118-1190" aria-hidden="true" tabindex="-1"></a>Based on the output above, we can observe that the tau is highly negative suggesting that the trend is decreasing. The sl, which represents the p-value, is smaller than our level of significance, 0.05. Hence, we reject the null hypothesis as there is significant evidence that a decreasing trend is present in the time series data.</span>
<span id="cb118-1191"><a href="#cb118-1191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1192"><a href="#cb118-1192" aria-hidden="true" tabindex="-1"></a><span class="fu">### 7.1.2 For SRENGSENG SAWAH</span></span>
<span id="cb118-1193"><a href="#cb118-1193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1196"><a href="#cb118-1196" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-1197"><a href="#cb118-1197" aria-hidden="true" tabindex="-1"></a>SRENGSENG_SAWAH <span class="ot">&lt;-</span> gi_stars <span class="sc">%&gt;%</span> </span>
<span id="cb118-1198"><a href="#cb118-1198" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb118-1199"><a href="#cb118-1199" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sub_District <span class="sc">==</span> <span class="st">"SRENGSENG SAWAH"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb118-1200"><a href="#cb118-1200" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sub_District, Date, gi_star)</span>
<span id="cb118-1201"><a href="#cb118-1201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1202"><a href="#cb118-1202" aria-hidden="true" tabindex="-1"></a>SRENGSENG_SAWAH_plot<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> SRENGSENG_SAWAH, </span>
<span id="cb118-1203"><a href="#cb118-1203" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Date, </span>
<span id="cb118-1204"><a href="#cb118-1204" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> gi_star)) <span class="sc">+</span></span>
<span id="cb118-1205"><a href="#cb118-1205" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb118-1206"><a href="#cb118-1206" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span>
<span id="cb118-1207"><a href="#cb118-1207" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb118-1208"><a href="#cb118-1208" aria-hidden="true" tabindex="-1"></a>  plot<span class="ot">&lt;-</span> SRENGSENG_SAWAH_plot<span class="sc">+</span><span class="fu">ggtitle</span>(<span class="st">"Local Gi* values of SRENGSENG SAWAH"</span>)</span>
<span id="cb118-1209"><a href="#cb118-1209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1210"><a href="#cb118-1210" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplotly</span>(plot)  </span>
<span id="cb118-1211"><a href="#cb118-1211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1212"><a href="#cb118-1212" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-1213"><a href="#cb118-1213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1216"><a href="#cb118-1216" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-1217"><a href="#cb118-1217" aria-hidden="true" tabindex="-1"></a>SRENGSENG_SAWAH <span class="sc">%&gt;%</span></span>
<span id="cb118-1218"><a href="#cb118-1218" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mk =</span> <span class="fu">list</span>(</span>
<span id="cb118-1219"><a href="#cb118-1219" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unclass</span>(</span>
<span id="cb118-1220"><a href="#cb118-1220" aria-hidden="true" tabindex="-1"></a>      Kendall<span class="sc">::</span><span class="fu">MannKendall</span>(gi_star)))) <span class="sc">%&gt;%</span> </span>
<span id="cb118-1221"><a href="#cb118-1221" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">unnest_wider</span>(mk)</span>
<span id="cb118-1222"><a href="#cb118-1222" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-1223"><a href="#cb118-1223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1224"><a href="#cb118-1224" aria-hidden="true" tabindex="-1"></a>Based on the output above, we can observe that the tau is positive suggesting that the trend is increasing. The sl, which represents the p-value, is smaller than our level of significance, 0.05. Hence, we reject the null hypothesis as there is significant evidence that an increasing trend is present in the time series data.</span>
<span id="cb118-1225"><a href="#cb118-1225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1226"><a href="#cb118-1226" aria-hidden="true" tabindex="-1"></a><span class="fu">### 7.1.3 For KOJA</span></span>
<span id="cb118-1227"><a href="#cb118-1227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1230"><a href="#cb118-1230" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-1231"><a href="#cb118-1231" aria-hidden="true" tabindex="-1"></a>KOJA <span class="ot">&lt;-</span> gi_stars <span class="sc">%&gt;%</span> </span>
<span id="cb118-1232"><a href="#cb118-1232" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb118-1233"><a href="#cb118-1233" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sub_District <span class="sc">==</span> <span class="st">"KOJA"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb118-1234"><a href="#cb118-1234" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sub_District, Date, gi_star)</span>
<span id="cb118-1235"><a href="#cb118-1235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1236"><a href="#cb118-1236" aria-hidden="true" tabindex="-1"></a>KOJA_plot<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> KOJA, </span>
<span id="cb118-1237"><a href="#cb118-1237" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Date, </span>
<span id="cb118-1238"><a href="#cb118-1238" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> gi_star)) <span class="sc">+</span></span>
<span id="cb118-1239"><a href="#cb118-1239" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb118-1240"><a href="#cb118-1240" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span>
<span id="cb118-1241"><a href="#cb118-1241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1242"><a href="#cb118-1242" aria-hidden="true" tabindex="-1"></a>  plot<span class="ot">&lt;-</span> KOJA_plot<span class="sc">+</span><span class="fu">ggtitle</span>(<span class="st">"Local Gi* values of KOJA"</span>)</span>
<span id="cb118-1243"><a href="#cb118-1243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1244"><a href="#cb118-1244" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplotly</span>(plot)  </span>
<span id="cb118-1245"><a href="#cb118-1245" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb118-1246"><a href="#cb118-1246" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-1247"><a href="#cb118-1247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1250"><a href="#cb118-1250" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-1251"><a href="#cb118-1251" aria-hidden="true" tabindex="-1"></a>KOJA <span class="sc">%&gt;%</span></span>
<span id="cb118-1252"><a href="#cb118-1252" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mk =</span> <span class="fu">list</span>(</span>
<span id="cb118-1253"><a href="#cb118-1253" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unclass</span>(</span>
<span id="cb118-1254"><a href="#cb118-1254" aria-hidden="true" tabindex="-1"></a>      Kendall<span class="sc">::</span><span class="fu">MannKendall</span>(gi_star)))) <span class="sc">%&gt;%</span> </span>
<span id="cb118-1255"><a href="#cb118-1255" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">unnest_wider</span>(mk)</span>
<span id="cb118-1256"><a href="#cb118-1256" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-1257"><a href="#cb118-1257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1258"><a href="#cb118-1258" aria-hidden="true" tabindex="-1"></a>Based on the output above, we can observe that the tau is slightly positive, suggesting that the trend is increasing. The sl, which represents the p-value, is larger than our level of significance, 0.05. Hence, we do reject the null hypothesis as there is insufficient evidence that a trend is present in the time series data.</span>
<span id="cb118-1259"><a href="#cb118-1259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1260"><a href="#cb118-1260" aria-hidden="true" tabindex="-1"></a><span class="fu"># 7.2 Performing Emerging Hotspot Analysis</span></span>
<span id="cb118-1261"><a href="#cb118-1261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1262"><a href="#cb118-1262" aria-hidden="true" tabindex="-1"></a>Before we perform our emerging hotspot anlaysis, we will be using the new columns created earlier on to manually calculate the local Gi<span class="sc">\*</span> for each location. We can do this by grouping by Date and using <span class="co">[</span><span class="ot">local_gstar_perm()</span><span class="co">](https://sfdep.josiahparry.com/reference/local_gstar.html)</span> of sfdep package. After which, we use <span class="co">[</span><span class="ot">unnest()</span><span class="co">](https://tidyr.tidyverse.org/reference/nest.html)</span> to unnest gi_star column of the newly created gi_start data.frame.</span>
<span id="cb118-1263"><a href="#cb118-1263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1266"><a href="#cb118-1266" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-1267"><a href="#cb118-1267" aria-hidden="true" tabindex="-1"></a>ehsa <span class="ot">&lt;-</span> gi_stars <span class="sc">%&gt;%</span></span>
<span id="cb118-1268"><a href="#cb118-1268" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Sub_District) <span class="sc">%&gt;%</span></span>
<span id="cb118-1269"><a href="#cb118-1269" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mk =</span> <span class="fu">list</span>(</span>
<span id="cb118-1270"><a href="#cb118-1270" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unclass</span>(</span>
<span id="cb118-1271"><a href="#cb118-1271" aria-hidden="true" tabindex="-1"></a>      Kendall<span class="sc">::</span><span class="fu">MannKendall</span>(gi_star)))) <span class="sc">%&gt;%</span></span>
<span id="cb118-1272"><a href="#cb118-1272" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">unnest_wider</span>(mk)</span>
<span id="cb118-1273"><a href="#cb118-1273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1274"><a href="#cb118-1274" aria-hidden="true" tabindex="-1"></a>emerging <span class="ot">&lt;-</span> ehsa <span class="sc">%&gt;%</span> </span>
<span id="cb118-1275"><a href="#cb118-1275" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(sl, <span class="fu">abs</span>(tau)) <span class="sc">%&gt;%</span> </span>
<span id="cb118-1276"><a href="#cb118-1276" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb118-1277"><a href="#cb118-1277" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-1278"><a href="#cb118-1278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1279"><a href="#cb118-1279" aria-hidden="true" tabindex="-1"></a>We will then perform EHSA analysis by using <span class="co">[</span><span class="ot">emerging_hotspot_analysis()</span><span class="co">](https://pro.arcgis.com/en/pro-app/latest/tool-reference/space-time-pattern-mining/learnmoreemerging.htm)</span> of sfdep package. It takes a spacetime object x (i.e. vr_st), and the quoted name of the variable of interest (i.e. Vaccination_Rate) for .var argument. The k argument is used to specify the number of time lags which is set to 1 by default. Lastly, nsim map numbers of simulation to be performed(we will be performing 100).</span>
<span id="cb118-1280"><a href="#cb118-1280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1283"><a href="#cb118-1283" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-1284"><a href="#cb118-1284" aria-hidden="true" tabindex="-1"></a>ehsa <span class="ot">&lt;-</span> <span class="fu">emerging_hotspot_analysis</span>(</span>
<span id="cb118-1285"><a href="#cb118-1285" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> vr_st, </span>
<span id="cb118-1286"><a href="#cb118-1286" aria-hidden="true" tabindex="-1"></a>  <span class="at">.var =</span> <span class="st">"Vaccination_Rate"</span>, </span>
<span id="cb118-1287"><a href="#cb118-1287" aria-hidden="true" tabindex="-1"></a>  <span class="at">k =</span> <span class="dv">1</span>, </span>
<span id="cb118-1288"><a href="#cb118-1288" aria-hidden="true" tabindex="-1"></a>  <span class="at">nsim =</span> <span class="dv">99</span></span>
<span id="cb118-1289"><a href="#cb118-1289" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb118-1290"><a href="#cb118-1290" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-1291"><a href="#cb118-1291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1292"><a href="#cb118-1292" aria-hidden="true" tabindex="-1"></a><span class="fu">### 7.2.1 Visualising the distribution of EHSA classes</span></span>
<span id="cb118-1293"><a href="#cb118-1293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1294"><a href="#cb118-1294" aria-hidden="true" tabindex="-1"></a>In the code chunk below, <span class="co">[</span><span class="ot">ggplot2</span><span class="co">](https://ggplot2.tidyverse.org/)</span> functions is used to reveal the distribution of EHSA classes as a bar chart.</span>
<span id="cb118-1295"><a href="#cb118-1295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1298"><a href="#cb118-1298" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-1299"><a href="#cb118-1299" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ehsa,</span>
<span id="cb118-1300"><a href="#cb118-1300" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> classification)) <span class="sc">+</span></span>
<span id="cb118-1301"><a href="#cb118-1301" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span>
<span id="cb118-1302"><a href="#cb118-1302" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-1303"><a href="#cb118-1303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1304"><a href="#cb118-1304" aria-hidden="true" tabindex="-1"></a>Below is a table explaining what each class means.</span>
<span id="cb118-1305"><a href="#cb118-1305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1306"><a href="#cb118-1306" aria-hidden="true" tabindex="-1"></a>| EHSA Class Name      | Definition                                                                                                                                                                                                                                                                                                                 |</span>
<span id="cb118-1307"><a href="#cb118-1307" aria-hidden="true" tabindex="-1"></a>|----------------------|--------------------------------------------------|</span>
<span id="cb118-1308"><a href="#cb118-1308" aria-hidden="true" tabindex="-1"></a>| Oscillating coldspot | A statistically significant cold spot for the final time-step interval that has a history of also being a statistically significant hot spot during a prior time step. Less than 90 percent of the time-step intervals have been statistically significant cold spots.                                                     |</span>
<span id="cb118-1309"><a href="#cb118-1309" aria-hidden="true" tabindex="-1"></a>| Oscillating hotspot  | A statistically significant hot spot for the final time-step interval that has a history of also being a statistically significant cold spot during a prior time step. Less than 90 percent of the time-step intervals have been statistically significant hot spots.                                                      |</span>
<span id="cb118-1310"><a href="#cb118-1310" aria-hidden="true" tabindex="-1"></a>| Sporadic cold spot   | A statistically significant cold spot for the final time-step interval with a history of also being an on-again and off-again cold spot. Less than 90 percent of the time-step intervals have been statistically significant cold spots and none of the time-step intervals have been statistically significant hot spots. |</span>
<span id="cb118-1311"><a href="#cb118-1311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1312"><a href="#cb118-1312" aria-hidden="true" tabindex="-1"></a>source: <span class="co">[</span><span class="ot">esri</span><span class="co">](https://pro.arcgis.com/en/pro-app/latest/tool-reference/space-time-pattern-mining/learnmoreemerging.htm#:~:text=Oscillating%20Hot%20Spot,been%20statistically%20significant%20hot%20spots.)</span></span>
<span id="cb118-1313"><a href="#cb118-1313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1314"><a href="#cb118-1314" aria-hidden="true" tabindex="-1"></a><span class="fu">### 7.2.2 Visualising EHSA</span></span>
<span id="cb118-1315"><a href="#cb118-1315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1316"><a href="#cb118-1316" aria-hidden="true" tabindex="-1"></a>Before we can visualise EHSA, we need to join both copy_cjkt_df and ehsa together by using the code chunk below.</span>
<span id="cb118-1317"><a href="#cb118-1317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1320"><a href="#cb118-1320" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-1321"><a href="#cb118-1321" aria-hidden="true" tabindex="-1"></a>cjkt_ehsa <span class="ot">&lt;-</span> copy_cjkt_df <span class="sc">%&gt;%</span></span>
<span id="cb118-1322"><a href="#cb118-1322" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(ehsa,</span>
<span id="cb118-1323"><a href="#cb118-1323" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Sub_District"</span> <span class="ot">=</span> <span class="st">"location"</span>))</span>
<span id="cb118-1324"><a href="#cb118-1324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1325"><a href="#cb118-1325" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-1326"><a href="#cb118-1326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1327"><a href="#cb118-1327" aria-hidden="true" tabindex="-1"></a>The code chunk below plots a categorical choropleth map for the significant(p-value<span class="sc">\&lt;</span>0.05) locations using tmap functions.</span>
<span id="cb118-1328"><a href="#cb118-1328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1331"><a href="#cb118-1331" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb118-1332"><a href="#cb118-1332" aria-hidden="true" tabindex="-1"></a>ehsa_sig <span class="ot">&lt;-</span> cjkt_ehsa  <span class="sc">%&gt;%</span></span>
<span id="cb118-1333"><a href="#cb118-1333" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(p_value <span class="sc">&lt;</span> <span class="fl">0.05</span>)</span>
<span id="cb118-1334"><a href="#cb118-1334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1335"><a href="#cb118-1335" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb118-1336"><a href="#cb118-1336" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(cjkt_ehsa) <span class="sc">+</span></span>
<span id="cb118-1337"><a href="#cb118-1337" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb118-1338"><a href="#cb118-1338" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb118-1339"><a href="#cb118-1339" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(ehsa_sig) <span class="sc">+</span></span>
<span id="cb118-1340"><a href="#cb118-1340" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"classification"</span>) <span class="sc">+</span> </span>
<span id="cb118-1341"><a href="#cb118-1341" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span> </span>
<span id="cb118-1342"><a href="#cb118-1342" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb118-1343"><a href="#cb118-1343" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title=</span><span class="st">"Significant Classifications of EHSA"</span>,</span>
<span id="cb118-1344"><a href="#cb118-1344" aria-hidden="true" tabindex="-1"></a>     <span class="at">main.title.size =</span> <span class="fl">0.7</span>)</span>
<span id="cb118-1345"><a href="#cb118-1345" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb118-1346"><a href="#cb118-1346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1347"><a href="#cb118-1347" aria-hidden="true" tabindex="-1"></a><span class="fu">### 7.2.3 Statistical Conclusion</span></span>
<span id="cb118-1348"><a href="#cb118-1348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1349"><a href="#cb118-1349" aria-hidden="true" tabindex="-1"></a>Based on the graph visualising **the distribution of EHSA classes**, we can observe:</span>
<span id="cb118-1350"><a href="#cb118-1350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1351"><a href="#cb118-1351" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Oscillating hot spots has the highest numbers of sub-districts in Jakarta.</span>
<span id="cb118-1352"><a href="#cb118-1352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1353"><a href="#cb118-1353" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>As there is more oscillating hot spots than oscillating cold spots, it suggests that the data has an overall positive trend. This can be explained by the increasing vaccination rates across our study time period.</span>
<span id="cb118-1354"><a href="#cb118-1354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1355"><a href="#cb118-1355" aria-hidden="true" tabindex="-1"></a>Based on the **Significant Classifications of EHSA map**, we can observe that</span>
<span id="cb118-1356"><a href="#cb118-1356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1357"><a href="#cb118-1357" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Majority of the Oscillating hot spots tend to be spread around the central area of Jakarta.</span>
<span id="cb118-1358"><a href="#cb118-1358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1359"><a href="#cb118-1359" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Sporadic cold spots are more clustered around the central area of Jakarta.</span>
<span id="cb118-1360"><a href="#cb118-1360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1361"><a href="#cb118-1361" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Oscillating cold spots are quite spread out and tend to represent only 1 sub district</span>
<span id="cb118-1362"><a href="#cb118-1362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1363"><a href="#cb118-1363" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>There seem to only be 1 sub-district in the central area where no patterns are detected.</span>
<span id="cb118-1364"><a href="#cb118-1364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1365"><a href="#cb118-1365" aria-hidden="true" tabindex="-1"></a><span class="fu"># 8. Acknowledgment</span></span>
<span id="cb118-1366"><a href="#cb118-1366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-1367"><a href="#cb118-1367" aria-hidden="true" tabindex="-1"></a>To conclude, I would like to thank Prof. Kam for our IS415 Geospatial Analytics and Applications course materials &amp; resources. I would also like to thank my seniors, <span class="co">[</span><span class="ot">Xiao Rong Wong</span><span class="co">](https://rpubs.com/xiaorongw/IS415_Take-home_Ex02)</span> and <span class="co">[</span><span class="ot">Megan Sim</span><span class="co">](https://is415-msty.netlify.app/posts/2021-09-10-take-home-exercise-1/#joining-eda)</span> as I have referenced their codes.</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>